!function(e){function t(t){for(var i,o,r=t[0],l=t[1],c=t[2],u=0,m=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(d&&d(t);m.length;)m.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=s[0]))}return e}var i={},n={0:0},a=[];function o(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=i,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(s,i,function(t){return e[t]}.bind(null,i));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;a.push([11,1]),s()}({11:function(e,t,s){"use strict";s.r(t);var i=navigator.userAgent.includes("jsdom");async function n(e){if(i){const t=s(2),i=s(3).promisify(t.readFile);return await i(e).then(e=>e.toString())}return await fetch(e).then(e=>e.text())}let a=null;class o{constructor(){}reset(){throw new Error(`The class '${this.constructor.name}' must implement the reset() method.`)}get jsonPropertyNames(){return[]}fromOpen5e(e){throw new Error(`The class '${this.constructor.name}' must implement the fromOpen5e() method.`)}fromJson(e){this.reset();for(const t of this.jsonPropertyNames)t in e&&(this[t]=e[t])}toJson(){const e={};for(const t of this.jsonPropertyNames)t in this&&(e[t]=this[t]);return e}toHtml(){throw new Error(`The class '${this.constructor.name}' must implement the toHtml() method.`)}toMarkdown(){throw new Error(`The class '${this.constructor.name}' must implement the toMarkdown() method.`)}}class r extends o{constructor(){super(),this.reset()}reset(){this.fullName="Commoner",this.shortName="",this.isProperNoun=!1}get jsonPropertyNames(){return["fullName","shortName","isProperNoun"]}get grammaticalFullName(){return this.grammaticize(this.fullName)}get grammaticalShortName(){return this.grammaticize(this.shortName)}get grammaticalName(){return""!==this.shortName?this.grammaticalShortName:this.grammaticalFullName}grammaticize(e){return this.isProperNoun?e:"the "+e.toLowerCase()}fromOpen5e(e){this.reset(),this.fullName=e.name}toParserOptions(){return{name:this.grammaticalName,fullName:this.grammaticalFullName}}toHtml(){const e=document.createElement("h1");return e.textContent=this.fullName,e}toMarkdown(){return"> ## "+this.fullName}}var l={Tiny:4,Small:6,Medium:8,Large:10,Huge:12,Gargantuan:20},c=["aberration","beast","celestial","construct","dragon","elemental","fey","fiend","giant","humanoid","monstrosity","ooze","plant","undead"],d=["unaligned","any alignment","lawful good","neutral good","chaotic good","lawful neutral","neutral","chaotic neutral","lawful evil","neutral evil","chaotic evil"];class u extends o{constructor(){super(),this.reset()}reset(){this.size="Medium",this.type="humanoid",this.tags="any race",this.alignment="any alignment",this.useCustomText=!1,this.customText=""}get jsonPropertyNames(){return["size","type","tags","alignment","useCustomText","customText"]}get text(){return this.useCustomText?this.customText:u.constructText(this.size,this.type,this.tags,this.alignment)}static constructText(e,t,s,i){return""===s?`${e} ${t}, ${i}`:`${e} ${t} (${s}), ${i}`}fromOpen5e(e){this.reset();const t=e.size,s=e.type,i=e.subtype.trim(),n=e.alignment;Object.keys(l).includes(t)&&c.includes(s)&&d.includes(n)?(this.size=t,this.type=s,this.tags=i,this.alignment=n):(this.useCustomText=!0,this.customText=u.constructText(t,s,i,n))}toHtml(){const e=document.createElement("h2");return e.textContent=this.text,e}toMarkdown(){return`>*${this.text}*`}}const m=s(7);class h{constructor(e,t,s){this.clipboard=new m(s,{container:t,text:function(){return e}})}setSuccessCallback(e){this.clipboard.on("success",e)}setErrorCallback(e){this.clipboard.on("error",e)}destroy(){this.clipboard.destroy()}}function p(e,t,s){const i=document.createElement("h4"),n=document.createElement("p");return i.textContent=t,n.innerHTML=s,e.appendChild(i),e.appendChild(n),e}class g extends o{constructor(e){super(),this.headingName=e}get text(){throw new Error(`The class '${this.constructor.name}' must implement the text() method.`)}get htmlText(){throw new Error(`The class '${this.constructor.name}' must implement the htmlText() method.`)}toHtml(){return e=this.headingName,t=this.htmlText,p(document.createElement("property-line"),e,t);var e,t}toMarkdown(){return e=this.headingName,t=this.text,`> - **${e}** ${t}`;var e,t}}class b extends g{constructor(){super("Armor Class"),this.reset()}reset(){this.armorClass=10,this.armorType="",this.hasShield=!1,this.useCustomText=!1,this.customText="",this.htmlCustomText=""}get jsonPropertyNames(){return["armorClass","armorType","hasShield","useCustomText","customText"]}get text(){return this.useCustomText?this.customText:this.normalText}get htmlText(){return this.useCustomText?this.htmlCustomText:this.normalText}get normalText(){return this.armorType?this.hasShield?`${this.armorClass} (${this.armorType}, shield)`:`${this.armorClass} (${this.armorType})`:this.hasShield?this.armorClass+" (shield)":this.armorClass}fromOpen5e(e){this.reset();const t=e.armor_class,s=null===e.armor_desc?"":e.armor_desc;if(s.includes("*")||s.includes("_"))this.useCustomText=!0,this.customText=`${t} (${s})`;else if(s.includes("(")||s.includes(")"))this.useCustomText=!0,this.customText=s;else{const e=/,*\s*[and]*\s*shield/,i=s.match(e);if(null!==i){const e=i.index;this.armorType=s.slice(0,e),this.hasShield=!0}else this.armorType=s,this.hasShield=!1;this.armorClass=t}}}function v(e){return e.charAt(0).toUpperCase()+e.slice(1)}function f(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function w(e){return`${y(e)}${C(e)}`}function y(e){return e<0?"â€“":"+"}function C(e){return e<0?Math.abs(e).toString():e.toString()}function k(e){const t=["st","nd","rd","th"],s=e%100,i=e%10;return`${e}${!(s>=11&&s<=19)&&(i>=1&&i<=3)?t[i-1]:t[3]}`}function E(e){const t=parseInt(e,10);return isNaN(t)?null:t}class S extends g{constructor(e){super("Hit Points"),this.abilities=e,this.reset()}reset(){this._hitPoints=4,this.useHitDie=!0,this.hitDieQuantity=1,this.hitDieSize=8}get jsonPropertyNames(){return["hitPoints","useHitDie","hitDieQuantity","hitDieSize"]}get hitDieAverage(){return this.hitDieSize/2+.5}get constitutionHitPoints(){const e=this.abilities.abilities.constitution.modifier;return this.hitDieQuantity*e}set hitPoints(e){this._hitPoints=e}get hitPoints(){if(this.useHitDie){const e=Math.floor(this.hitDieQuantity*this.hitDieAverage)+this.constitutionHitPoints;this._hitPoints=Math.max(0,e)}return this._hitPoints}get text(){return this.useHitDie?this.textWithHitDie:this.hitPoints}get htmlText(){return this.text}get textWithHitDie(){return 0!=this.constitutionHitPoints?`${this.hitPoints} (${this.hitDieQuantity}d${this.hitDieSize} ${this.constitutionHitPointsText})`:`${this.hitPoints} (${this.hitDieQuantity}d${this.hitDieSize})`}get constitutionHitPointsText(){const e=this.constitutionHitPoints;return`${y(e)} ${C(e)}`}fromOpen5e(e){this.reset();const t=e.hit_dice.split(/[+d]/);this.useHitDie=!0,this.hitDieQuantity=E(t[0]),this.hitDieSize=E(t[1])}}class x extends g{constructor(){super("Speed"),this.reset()}reset(){this.walk=30,this.burrow=null,this.climb=null,this.fly=null,this.hover=!1,this.swim=null,this.useCustomText=!1,this.customText="",this.htmlCustomText=""}get jsonPropertyNames(){return["walk","burrow","climb","fly","hover","swim","useCustomText","customText"]}get text(){return this.useCustomText?this.customText:this.normalText}get htmlText(){return this.useCustomText?this.htmlCustomText:this.normalText}get normalText(){const e=[],t=this.walk?this.walk:0;if(e.push(t+" ft."),null!=this.burrow&&e.push(`burrow ${this.burrow} ft.`),null!=this.climb&&e.push(`climb ${this.climb} ft.`),null!=this.fly){const t=this.hover?" (hover)":"";e.push(`fly ${this.fly} ft.${t}`)}return null!=this.swim&&e.push(`swim ${this.swim} ft.`),e.join(", ")}fromOpen5e(e){this.reset(),"walk"in e.speed?this.walk=e.speed.walk:this.walk=null,"burrow"in e.speed&&(this.burrow=e.speed.burrow),"climb"in e.speed&&(this.climb=e.speed.climb),"fly"in e.speed&&(this.fly=e.speed.fly),"hover"in e.speed&&(this.hover=e.speed.hover),"swim"in e.speed&&(this.swim=e.speed.swim),"notes"in e.speed&&(this.useCustomText=!0,this.customText=`${this.normalText} (${e.speed.notes})`)}}class T extends o{constructor(){super(),this.abilities={strength:new M("strength","str"),dexterity:new M("dexterity","dex"),constitution:new M("constitution","con"),intelligence:new M("intelligence","int"),wisdom:new M("wisdom","wis"),charisma:new M("charisma","cha")},Object.freeze(this.abilities),this.reset()}reset(){for(const e of Object.values(this.abilities))e.reset()}get keys(){return Object.keys(this.abilities)}get values(){return Object.values(this.abilities)}get entries(){return Object.entries(this.abilities)}toParserOptions(){const e=this.entries.map(([e,t])=>[e,t.toParserOptions()]);return Object.fromEntries(e)}fromOpen5e(e){this.reset();for(const[t,s]of this.entries)s.fromOpen5e(e[t])}fromJson(e){this.reset();for(const[t,s]of this.entries)s.fromJson(e[t])}toJson(){const e=this.entries.map(([e,t])=>[e,t.toJson()]);return Object.fromEntries(e)}toHtml(){const e=document.createElement("abilities-block");for(const t of this.values){const s=t.abbreviation;e.dataset[s]=t.score}return e}toMarkdown(){return`>|STR|DEX|CON|INT|WIS|CHA|\n>|:---:|:---:|:---:|:---:|:---:|:---:|\n>|${this.values.map(e=>`${e.score} ${e.formattedModifier}`).join("|")}|`}}class M{constructor(e,t){this.name=e,this.abbreviation=t,this.reset()}reset(){this.score=10}get modifier(){return Math.floor((this.score-10)/2)}get formattedModifier(){return`(${w(this.modifier)})`}toParserOptions(){return{modifier:this.modifier}}fromOpen5e(e){this.score=e}fromJson(e){this.score=e}toJson(){return this.score}}class I extends g{constructor(e,t){super("Saving Throws");const s=e.keys.map(s=>[s,new B(e.abilities[s],t)]);this.savingThrows=Object.fromEntries(s),Object.freeze(this.savingThrows)}reset(){for(const e of this.values)e.reset()}get keys(){return Object.keys(this.savingThrows)}get values(){return Object.values(this.savingThrows)}get entries(){return Object.entries(this.savingThrows)}get text(){return this.values.filter(e=>e.isEnabled).map(e=>e.text).join(", ")}get htmlText(){return this.text}fromOpen5e(e){this.reset();for(const t of this.values)t.fromOpen5e(e)}fromJson(e){this.reset();for(const[t,s]of this.entries)s.fromJson(e[t])}toJson(){const e=this.entries.map(([e,t])=>[e,t.toJson()]);return Object.fromEntries(e)}}class B{constructor(e,t){this.abilityModel=e,this.challengeRatingModel=t,this.reset()}reset(){this.isEnabled=!1,this.override=null}get text(){return`${v(this.abilityModel.abbreviation)} ${this.formattedModifier}`}get modifier(){let e=this.abilityModel.modifier;if(this.isEnabled){if(null!==this.override)return this.override;e+=this.challengeRatingModel.proficiencyBonus}return e}get formattedModifier(){return w(this.modifier)}fromOpen5e(e){const t=this.abilityModel.name+"_save";null!==e[t]?(this.isEnabled=!0,e[t]!==this.abilityModel.modifier+this.challengeRatingModel.proficiencyBonus&&(this.override=e[t])):this.isEnabled=!1}fromJson(e){this.isEnabled=e.isEnabled,this.override=e.override}toJson(){return{isEnabled:this.isEnabled,override:this.override}}}class D extends g{constructor(e,t){super("Skills");const s=e.abilities.strength,i=e.abilities.dexterity,n=e.abilities.intelligence,a=e.abilities.wisdom,o=e.abilities.charisma;this.skills={acrobatics:new z("acrobatics","Acrobatics",i,t),animalHandling:new z("animalHandling","Animal Handling",a,t),arcana:new z("arcana","Arcana",n,t),athletics:new z("athletics","Athletics",s,t),deception:new z("deception","Deception",o,t),history:new z("history","History",n,t),insight:new z("insight","Insight",a,t),intimidation:new z("intimidation","Intimidation",o,t),investigation:new z("investigation","Investigation",n,t),medicine:new z("medicine","Medicine",a,t),nature:new z("nature","Nature",n,t),perception:new z("perception","Perception",a,t),performance:new z("performance","Performance",o,t),persuasion:new z("persuasion","Persuasion",o,t),religion:new z("religion","Religion",n,t),sleightOfHand:new z("sleightOfHand","Sleight of Hand",i,t),stealth:new z("stealth","Stealth",i,t),survival:new z("survival","Survival",a,t)},Object.freeze(this.skills)}reset(){for(const e of this.values)e.reset()}get keys(){return Object.keys(this.skills)}get values(){return Object.values(this.skills)}get entries(){return Object.entries(this.skills)}get text(){return this.values.filter(e=>e.isEnabled).map(e=>e.text).join(", ")}get htmlText(){return this.text}fromOpen5e(e){this.reset();for(const t of this.values)t.fromOpen5e(e)}fromJson(e){this.reset();for(const[t,s]of this.entries)s.fromJson(e[t])}toJson(){const e=this.entries.map(([e,t])=>[e,t.toJson()]);return Object.fromEntries(e)}}class z{constructor(e,t,s,i){this.name=e,this.prettyName=t,this.abilityModel=s,this.challengeRatingModel=i,this.reset()}reset(){this.isEnabled=!1,this.hasExpertise=!1,this.override=null}get text(){return`${this.prettyName} ${this.formattedModifier}`}get passiveScore(){let e=10+this.abilityModel.modifier;if(this.isEnabled){if(null!==this.override)return 10+this.override;e+=this.challengeRatingModel.proficiencyBonus,this.hasExpertise&&(e+=this.challengeRatingModel.proficiencyBonus)}return e}get modifier(){let e=this.abilityModel.modifier;if(this.isEnabled){if(null!==this.override)return this.override;e+=this.challengeRatingModel.proficiencyBonus,this.hasExpertise&&(e+=this.challengeRatingModel.proficiencyBonus)}return e}get formattedModifier(){return w(this.modifier)}fromOpen5e(e){if(this.name in e.skills){this.isEnabled=!0;const t=e.skills[this.name],s=this.abilityModel.modifier+this.challengeRatingModel.proficiencyBonus,i=s+this.challengeRatingModel.proficiencyBonus;if(t===s)return;t===i?this.hasExpertise=!0:this.override=t}else this.isEnabled=!1}fromJson(e){this.isEnabled=e.isEnabled,this.hasExpertise=e.hasExpertise,this.override=e.override}toJson(){return{isEnabled:this.isEnabled,hasExpertise:this.hasExpertise,override:this.override}}}class P extends g{constructor(e,t,s){super(e),this.singleName=t,this.open5eJsonKey=s,this.reset()}reset(){this.clear()}clear(){this.items=[]}get jsonPropertyNames(){return["items"]}get text(){let e="",t=!0,s=!1;for(const i of this.items){const n=i.includes(",");t?(e=i,t=!1):e+=s||n?"; "+i:", "+i,s=n}return e}get htmlText(){return this.text}fromOpen5e(e){this.clear();const t=e[this.open5eJsonKey];if(""!==t){const e=t.split(";").map(e=>e.trim());for(const t of e)if(t.includes("bludgeoning, piercing, and slashing"))this.items.push(t);else{const e=t.split(",").map(e=>e.trim()),s=P.mergeUnderstandsButTokens(e);Array.prototype.push.apply(this.items,s)}}}static mergeUnderstandsButTokens(e){let t=null;for(const[s,i]of e.entries())if(null===t&&i.startsWith("understands"))t=s;else if(null!==t&&i.includes("but")){const i=e.slice(t,s+1).join(", ");e.splice(t,s-t+1,i)}return e}}class R extends P{constructor(){super("Damage Vulnerabilities","Damage Vulnerability","damage_vulnerabilities")}}class L extends P{constructor(){super("Damage Resistances","Damage Resistance","damage_resistances")}}class A extends P{constructor(){super("Damage Immunities","Damage Immunity","damage_immunities")}}class N extends P{constructor(){super("Condition Immunities","Condition Immunity","condition_immunities")}}class F extends g{constructor(e){super("Senses"),this.skills=e,this.reset()}reset(){this.blindsight=null,this.blindBeyondThisRadius=!1,this.darkvision=null,this.tremorsense=null,this.truesight=null,this.useCustomText=!1,this.customText="",this.htmlCustomText=""}get jsonPropertyNames(){return["blindsight","blindBeyondThisRadius","darkvision","tremorsense","truesight","useCustomText","customText"]}get passivePerception(){return this.skills.skills.perception.passiveScore}get text(){return this.useCustomText?this.customText:this.normalText}get htmlText(){return this.useCustomText?this.htmlCustomText:this.normalText}get normalText(){const e=[];if(null!=this.blindsight){const t=this.blindBeyondThisRadius?" (blind beyond this radius)":"";e.push(`blindsight ${this.blindsight} ft.${t}`)}return null!=this.darkvision&&e.push(`darkvision ${this.darkvision} ft.`),null!=this.tremorsense&&e.push(`tremorsense ${this.tremorsense} ft.`),null!=this.truesight&&e.push(`truesight ${this.truesight} ft.`),e.push("passive Perception "+this.passivePerception),e.join(", ")}fromOpen5e(e){this.reset();const t=e.senses,s={};let i=!1;if(t.includes("*")||t.includes("_"))i=!0;else{const e=/^(?<category>blindsight|darkvision|tremorsense|truesight)\s(?<range>\d+)\sft\.(?<blindBeyondThisRadius>\s\(blind beyond this radius\))*$/,n=t.split(",");for(const t of n.map(e=>e.trim())){if(t.includes("passive Perception"))continue;const n=t.match(e);if(null===n){i=!0;break}{const e=n.groups.category,t=n.groups.range,i=" (blind beyond this radius)"===n.groups.blindBeyondThisRadius;s[e]=E(t),i&&(s.blindBeyondThisRadius=!0)}}}i?(this.useCustomText=!0,this.customText=t):Object.assign(this,s)}}class H extends P{constructor(){super("Languages","Language","languages")}reset(){this.clear(),this.items=["any one language (usually Common)"]}clear(){super.clear(),this.telepathy=null}get text(){let e=super.text;return null!==this.telepathy&&(""!==e&&(e+=", "),e+=`telepathy ${this.telepathy} ft.`),""===e&&(e="â€”"),e}fromOpen5e(e){super.fromOpen5e(e);const t=/(?<=^telepathy )\d+(?= ft\.$)/,s=this.items.findIndex(e=>t.test(e));if(s>=0){const e=this.items.splice(s,1)[0].match(t)[0];this.telepathy=E(e)}}fromJson(e){super.fromJson(e),this.telepathy=e.telepathy}toJson(){const e=super.toJson();return e.telepathy=this.telepathy,e}}var O={0:10,"1/8":25,"1/4":50,"1/2":100,1:200,2:450,3:700,4:1100,5:1800,6:2300,7:2900,8:3900,9:5e3,10:5900,11:7200,12:8400,13:1e4,14:11500,15:13e3,16:15e3,17:18e3,18:2e4,19:22e3,20:25e3,21:33e3,22:41e3,23:5e4,24:62e3,25:75e3,26:9e4,27:105e3,28:12e4,29:135e3,30:155e3},j={0:2,"1/8":2,"1/4":2,"1/2":2,1:2,2:2,3:2,4:2,5:3,6:3,7:3,8:3,9:4,10:4,11:4,12:4,13:5,14:5,15:5,16:5,17:6,18:6,19:6,20:6,21:7,22:7,23:7,24:7,25:8,26:8,27:8,28:8,29:9,30:9};class $ extends g{constructor(){super("Challenge"),this.reset()}reset(){this.challengeRating="0",this.experiencePoints=10,this.proficiencyBonus=2}get jsonPropertyNames(){return["challengeRating","experiencePoints","proficiencyBonus"]}updateExperiencePointsAndProficiencyBonusFromChallengeRating(){this.experiencePoints=O[this.challengeRating],this.proficiencyBonus=j[this.challengeRating]}get text(){const e=this.experiencePoints.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");return`${this.challengeRating} (${e} XP)`}get htmlText(){return this.text}toParserOptions(){return this.proficiencyBonus}fromOpen5e(e){this.reset(),this.challengeRating=e.challenge_rating,this.updateExperiencePointsAndProficiencyBonusFromChallengeRating()}}class V{constructor(e,t,s="",i=""){this.name=e,this.text=t,this.markdownText=s,this.htmlText=i}toJson(){return{name:this.name,text:this.text}}toHtml(){return e=this.name,t=this.htmlText,p(document.createElement("property-block"),e+".",t);var e,t}toMarkdown(){return e=this.name,t=this.markdownText,`> ***${e}.*** ${t}`;var e,t}}class _ extends o{constructor(e,t,s,i=V){super(),this.headingName=e,this.singleName=t,this.open5eJsonKey=s,this.blockModel=i,this.blocks=[],this.reset()}reset(){this.clear()}clear(){this.blocks.length=0}fromOpen5e(e){this.clear();const t=e[this.open5eJsonKey];if(""!==t)for(const e of t){const t=e.name,s=_.parseOpen5eBlockDescription(e.desc),i=new this.blockModel(t,s);this.blocks.push(i)}}static parseOpen5eBlockDescription(e){return e=(e=e.replace(/(?<=\.)\s*\n(?=\w)/g,"\n  ")).replace(/ *â€¢ */g,"")}fromJson(e){this.clear();for(const t of e.blocks){const e=new this.blockModel(t.name,t.text);this.blocks.push(e)}}toJson(){return{blocks:this.blocks.map(e=>e.toJson())}}toHtml(){const e=document.createDocumentFragment();if(this.headingName){const t=document.createElement("h3");t.textContent=this.headingName,e.appendChild(t)}for(const t of this.blocks)e.appendChild(t.toHtml());return e}toMarkdown(){return`${this.headingName?`> ### ${this.headingName}\n`:""}${this.blocks.map(e=>e.toMarkdown()).join("\n>\n")}`}}class G extends _{constructor(){super(null,"Special Trait","special_abilities")}}class J extends _{constructor(){super("Actions","Action","actions")}reset(){if(i)this.blocks=[];else{const e=new V("Club","*Melee Weapon Attack:* ATK[STR] to hit, reach 5 ft., one target. *Hit:* DMG[1d4 + STR] bludgeoning damage.","*Melee Weapon Attack:* +2 to hit, reach 5 ft., one target. *Hit:* 2 (1d4) bludgeoning damage.","<em>Melee Weapon Attack:</em> +2 to hit, reach 5 ft., one target. <em>Hit:</em> 2 (1d4) bludgeoning damage.");this.blocks=[e]}}}class W extends _{constructor(){super("Reactions","Reaction","reactions")}}class Q extends V{constructor(e,t,s,i){super(e,t,s,i)}toHtml(){return e=this.name,t=this.htmlText,p(document.createElement("legendary-property-block"),e+".",t);var e,t}}class q extends _{constructor(){super("Legendary Actions","Legendary Action","legendary_actions",Q)}reset(){super.reset(),this.resetDescription()}resetDescription(){this.description="[NAME] can take 3 legendary actions, choosing from the options below. Only one legendary action option can be used at a time and only at the end of another creature's turn. [NAME] regains spent legendary actions at the start of its turn.",this.markdownDescription="",this.htmlDescription=""}fromOpen5e(e){super.fromOpen5e(e),this.resetDescription();const t=e.legendary_desc;""!==t&&(this.description=t)}fromJson(e){super.fromJson(e),this.description=e.description}toJson(){const e=super.toJson();return e.description=this.description,e}toHtml(){const e=super.toHtml(),t=e.querySelector("legendary-property-block"),s=document.createElement("p");return s.innerHTML=this.htmlDescription,e.insertBefore(s,t),e}toMarkdown(){return`${`> ### ${this.headingName}\n`}${`> ${this.markdownDescription}\n`}${this.blocks.map(e=>e.toMarkdown()).join("\n>\n")}`}}class U{constructor(){this.abilities=new T,this.challengeRating=new $,this.title=new r,this.subtitle=new u,this.armorClass=new b,this.hitPoints=new S(this.abilities),this.speed=new x,this.savingThrows=new I(this.abilities,this.challengeRating),this.skills=new D(this.abilities,this.challengeRating),this.damageVulnerabilities=new R,this.damageResistances=new L,this.damageImmunities=new A,this.conditionImmunities=new N,this.senses=new F(this.skills),this.languages=new H,this.specialTraits=new G,this.actions=new J,this.reactions=new W,this.legendaryActions=new q}reset(){this.title.reset(),this.subtitle.reset(),this.armorClass.reset(),this.hitPoints.reset(),this.speed.reset(),this.abilities.reset(),this.savingThrows.reset(),this.skills.reset(),this.damageVulnerabilities.reset(),this.damageResistances.reset(),this.damageImmunities.reset(),this.conditionImmunities.reset(),this.senses.reset(),this.languages.reset(),this.challengeRating.reset(),this.specialTraits.reset(),this.actions.reset(),this.reactions.reset(),this.legendaryActions.reset()}}class K{constructor(){this.reset()}reset(){this.columns=1,this.twoColumnMode="auto",this.twoColumnHeight=600}fromJson(e){this.columns=e.columns,this.twoColumnMode=e.twoColumnMode,this.twoColumnHeight=e.twoColumnHeight}toJson(){return{columns:this.columns,twoColumnMode:this.twoColumnMode,twoColumnHeight:this.twoColumnHeight}}}class Y{constructor(){this.reset()}reset(){this.version="0.0.0",this.emptySectionsVisibility=!0,this.gettingStartedVisibility=!0}}var X=new class{constructor(){this.creature=new U,this.layoutSettings=new K,this.localSettings=new Y}reset(){this.creature.reset(),this.layoutSettings.reset()}},Z=function(){function e(t,s,i,n){this.message=t,this.expected=s,this.found=i,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s}(e,Error),e.buildMessage=function(e,t){var s={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,s="";for(t=0;t<e.parts.length;t++)s+=e.parts[t]instanceof Array?a(e.parts[t][0])+"-"+a(e.parts[t][1]):a(e.parts[t]);return"["+(e.inverted?"^":"")+s+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function i(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+i(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+i(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+i(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+i(e)}))}return"Expected "+function(e){var t,i,n,a=new Array(e.length);for(t=0;t<e.length;t++)a[t]=(n=e[t],s[n.type](n));if(a.sort(),a.length>0){for(t=1,i=1;t<a.length;t++)a[t-1]!==a[t]&&(a[i]=a[t],i++);a.length=i}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,s){s=void 0!==s?s:{};var i,n={},a={start:R},o=R,r=function(e,t,s){return`${e}${t}${s}`},l=I("[NAME]",!1),c=I("[name]",!1),d=I("[FULLNAME]",!1),u=I("[fullname]",!1),m={type:"any"},h=I("[",!1),p=I("(",!1),g=I(")",!1),b=I("*",!1),v=I("_",!1),f=I("\n",!1),w=I("\r",!1),y=I(" ",!1),C=I("\t",!1),k=I(".",!1),E=0,S=[{line:1,column:1}],x=0,T=[],M=0;if("startRule"in s){if(!(s.startRule in a))throw new Error("Can't start parsing from rule \""+s.startRule+'".');o=a[s.startRule]}function I(e,t){return{type:"literal",text:e,ignoreCase:t}}function B(e){var s,i=S[e];if(i)return i;for(s=e-1;!S[s];)s--;for(i={line:(i=S[s]).line,column:i.column};s<e;)10===t.charCodeAt(s)?(i.line++,i.column=1):i.column++,s++;return S[e]=i,i}function D(e,t){var s=B(e),i=B(t);return{start:{offset:e,line:s.line,column:s.column},end:{offset:t,line:i.line,column:i.column}}}function z(e){E<x||(E>x&&(x=E,T=[]),T.push(e))}function P(t,s,i){return new e(e.buildMessage(t,s),t,s,i)}function R(){var e,t,s;if(e=E,t=[],(s=L())!==n)for(;s!==n;)t.push(s),s=L();else t=n;return t!==n&&(e,t=t.join("")),(e=t)===n&&(e=E,(t=Q())!==n&&(e,t=""),e=t),e}function L(){var e;return(e=G())===n&&(e=function(){var e,t,s,i,a;if(e=E,(t=H())!==n)if((s=function(){var e;(e=F())===n&&(e=N());return e}())!==n){for(i=[],a=A();a!==n;)i.push(a),a=A();i!==n&&(a=function(){var e;(e=G())===n&&(e=Q());return e}())!==n?(e,o=a,t=`${t}${s}${i.join("")}${o||""}`,e=t):(E=e,e=n)}else E=e,e=n;else E=e,e=n;var o;return e}()),e}function A(){var e;return(e=function(){var e,s,i,a,o;e=E,(s=W())!==n&&(i=function(){var e,s,i;e=E,s=[],i=_();for(;i!==n;)s.push(i),i=_();e=s!==n?t.substring(e,E):s;return e}())!==n&&(a=H())!==n&&(o=F())!==n?(e,e=s=`${s}${i}${a}${o}`):(E=e,e=n);return e}())===n&&(e=function(){var e,i,a,o;e=E,(i=O())!==n?((a=function(){var e,i;e=E,"[NAME]"===t.substr(E,6)?(i="[NAME]",E+=6):(i=n,0===M&&z(l));i===n&&("[name]"===t.substr(E,6)?(i="[name]",E+=6):(i=n,0===M&&z(c)));i!==n&&(e,i=s.creature.name);return e=i}())===n&&(a=function(){var e,i;e=E,"[FULLNAME]"===t.substr(E,10)?(i="[FULLNAME]",E+=10):(i=n,0===M&&z(d));i===n&&("[fullname]"===t.substr(E,10)?(i="[fullname]",E+=10):(i=n,0===M&&z(u)));i!==n&&(e,i=s.creature.fullName);return e=i}()),a!==n&&(o=j())!==n?(e,i=r(i,a,o),e=i):(E=e,e=n)):(E=e,e=n);return e}())===n&&(e=N()),e}function N(){var e;return(e=function(){var e,s,i;if(e=E,s=[],(i=$())!==n)for(;i!==n;)s.push(i),i=$();else s=n;e=s!==n?t.substring(e,E):s;return e}())===n&&(e=function(){var e,s,i;if(e=E,s=[],(i=J())!==n)for(;i!==n;)s.push(i),i=J();else s=n;e=s!==n?t.substring(e,E):s;return e}())===n&&(e=W())===n&&(e=V()),e}function F(){var e,i,a,o;return e=E,(i=O())!==n?((a=function(){var e,i;e=E,"[NAME]"===t.substr(E,6)?(i="[NAME]",E+=6):(i=n,0===M&&z(l));i===n&&("[name]"===t.substr(E,6)?(i="[name]",E+=6):(i=n,0===M&&z(c)));i!==n&&(e,i=q(s.creature.name));return e=i}())===n&&(a=function(){var e,i;e=E,"[FULLNAME]"===t.substr(E,10)?(i="[FULLNAME]",E+=10):(i=n,0===M&&z(d));i===n&&("[fullname]"===t.substr(E,10)?(i="[fullname]",E+=10):(i=n,0===M&&z(u)));i!==n&&(e,i=q(s.creature.fullName));return e=i}()),a!==n&&(o=j())!==n?(e,e=i=r(i,a,o)):(E=e,e=n)):(E=e,e=n),e}function H(){var e,s,i;for(e=E,s=[],i=J();i!==n;)s.push(i),i=J();return e=s!==n?t.substring(e,E):s}function O(){var e,s;return e=E,(s=function(){var e;40===t.charCodeAt(E)?(e="(",E++):(e=n,0===M&&z(p));return e}())===n&&(s=null),e=s!==n?t.substring(e,E):s}function j(){var e,s;return e=E,(s=function(){var e;41===t.charCodeAt(E)?(e=")",E++):(e=n,0===M&&z(g));return e}())===n&&(s=null),e=s!==n?t.substring(e,E):s}function $(){var e,s,i;return e=E,s=E,M++,(i=W())===n&&(i=J())===n&&(i=V())===n&&(i=G()),M--,i===n?s=void 0:(E=s,s=n),s!==n?(t.length>E?(i=t.charAt(E),E++):(i=n,0===M&&z(m)),i!==n?e=s=[s,i]:(E=e,e=n)):(E=e,e=n),e}function V(){var e;return 91===t.charCodeAt(E)?(e="[",E++):(e=n,0===M&&z(h)),e}function _(){var e;return 42===t.charCodeAt(E)?(e="*",E++):(e=n,0===M&&z(b)),e===n&&(95===t.charCodeAt(E)?(e="_",E++):(e=n,0===M&&z(v))),e}function G(){var e,s,i,a;return 10===t.charCodeAt(E)?(e="\n",E++):(e=n,0===M&&z(f)),e===n&&(e=E,s=E,13===t.charCodeAt(E)?(i="\r",E++):(i=n,0===M&&z(w)),i!==n?(10===t.charCodeAt(E)?(a="\n",E++):(a=n,0===M&&z(f)),a===n&&(a=null),a!==n?s=i=[i,a]:(E=s,s=n)):(E=s,s=n),e=s!==n?t.substring(e,E):s),e}function J(){var e;return 32===t.charCodeAt(E)?(e=" ",E++):(e=n,0===M&&z(y)),e===n&&(9===t.charCodeAt(E)?(e="\t",E++):(e=n,0===M&&z(C))),e}function W(){var e;return 46===t.charCodeAt(E)?(e=".",E++):(e=n,0===M&&z(k)),e}function Q(){var e,s;return e=E,M++,t.length>E?(s=t.charAt(E),E++):(s=n,0===M&&z(m)),M--,s===n?e=void 0:(E=e,e=n),e}function q(e){return e.charAt(0).toUpperCase()+e.slice(1)}if((i=o())!==n&&E===t.length)return i;throw i!==n&&E<t.length&&z({type:"end"}),P(T,x<t.length?t.charAt(x):null,x<t.length?D(x,x+1):D(x,x))}}}(),ee=function(){function e(t,s,i,n){this.message=t,this.expected=s,this.found=i,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s}(e,Error),e.buildMessage=function(e,t){var s={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,s="";for(t=0;t<e.parts.length;t++)s+=e.parts[t]instanceof Array?a(e.parts[t][0])+"-"+a(e.parts[t][1]):a(e.parts[t]);return"["+(e.inverted?"^":"")+s+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function i(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+i(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+i(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+i(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+i(e)}))}return"Expected "+function(e){var t,i,n,a=new Array(e.length);for(t=0;t<e.length;t++)a[t]=(n=e[t],s[n.type](n));if(a.sort(),a.length>0){for(t=1,i=1;t<a.length;t++)a[t-1]!==a[t]&&(a[i]=a[t],i++);a.length=i}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,s){s=void 0!==s?s:{};var i,n={},a={start:ne},o=ne,r=Z("SDC",!1),l=Z("sdc",!1),c=Z("[",!1),d=Z("]",!1),u=Z("DMG",!1),m=Z("dmg",!1),h=function(e,t){const s=be(t),i=function(e){if(0!==e){const t=we(e),s=ye(e);return` ${t} ${s}`}return""}(s);return`${fe(e.average+s)} (${`${e.text}${i}`})`},p=Z("ATK",!1),g=Z("atk",!1),b=Z("MOD",!1),v=Z("mod",!1),f=Z("+",!1),w=Z("-",!1),y=/^[0-9]/,C={type:"class",parts:[["0","9"]],inverted:!1,ignoreCase:!1},k=Z("d",!1),E=Z("FIN",!1),S=Z("fin",!1),x=Z("STR",!1),T=Z("str",!1),M=Z("DEX",!1),I=Z("dex",!1),B=Z("CON",!1),D=Z("con",!1),z=Z("INT",!1),P=Z("int",!1),R=Z("WIS",!1),L=Z("wis",!1),A=Z("CHA",!1),N=Z("cha",!1),F=Z("PROF",!1),H=Z("prof",!1),O=function(){return parseInt(t.substring(q,Q),10)},j={type:"any"},$=Z("(",!1),V=Z(")",!1),_=Z("\n",!1),G=Z("\r",!1),J=Z(" ",!1),W=Z("\t",!1),Q=(Z(".",!1),0),q=0,U=[{line:1,column:1}],K=0,Y=[],X=0;if("startRule"in s){if(!(s.startRule in a))throw new Error("Can't start parsing from rule \""+s.startRule+'".');o=a[s.startRule]}function Z(e,t){return{type:"literal",text:e,ignoreCase:t}}function ee(e){var s,i=U[e];if(i)return i;for(s=e-1;!U[s];)s--;for(i={line:(i=U[s]).line,column:i.column};s<e;)10===t.charCodeAt(s)?(i.line++,i.column=1):i.column++,s++;return U[e]=i,i}function te(e,t){var s=ee(e),i=ee(t);return{start:{offset:e,line:s.line,column:s.column},end:{offset:t,line:i.line,column:i.column}}}function se(e){Q<K||(Q>K&&(K=Q,Y=[]),Y.push(e))}function ie(t,s,i){return new e(e.buildMessage(t,s),t,s,i)}function ne(){var e,t,s;if(e=Q,t=[],(s=ae())!==n)for(;s!==n;)t.push(s),s=ae();else t=n;return t!==n&&(q=e,t=t.join("")),(e=t)===n&&(e=Q,(t=ge())!==n&&(q=e,t=""),e=t),e}function ae(){var e;return(e=he())===n&&(e=function(){var e,t,s;if(e=Q,t=[],(s=oe())!==n)for(;s!==n;)t.push(s),s=oe();else t=n;t!==n&&(s=function(){var e;(e=he())===n&&(e=ge());return e}())!==n?(q=e,i=s,t=`${t.join("")}${i||""}`,e=t):(Q=e,e=n);var i;return e}()),e}function oe(){var e;return(e=function(){var e,i,a,o;e=Q,(i=function(){var e,s;e=Q,(s=function(){var e;40===t.charCodeAt(Q)?(e="(",Q++):(e=n,0===X&&se($));return e}())===n&&(s=null);e=s!==n?t.substring(e,Q):s;return e}())!==n&&(a=function(){var e;(e=function(){var e,i,a,o,u,m,h,p,g,b,v;e=Q,"SDC"===t.substr(Q,3)?(i="SDC",Q+=3):(i=n,0===X&&se(r));i===n&&("sdc"===t.substr(Q,3)?(i="sdc",Q+=3):(i=n,0===X&&se(l)));if(i!==n)if(91===t.charCodeAt(Q)?(a="[",Q++):(a=n,0===X&&se(c)),a!==n){for(o=[],u=pe();u!==n;)o.push(u),u=pe();if(o!==n)if((u=ue())!==n){for(m=[],h=Q,p=[],g=pe();g!==n;)p.push(g),g=pe();if(p!==n)if((g=le())!==n){for(b=[],v=pe();v!==n;)b.push(v),v=pe();b!==n&&(v=ce())!==n?h=p=[p,g,b,v]:(Q=h,h=n)}else Q=h,h=n;else Q=h,h=n;for(;h!==n;){for(m.push(h),h=Q,p=[],g=pe();g!==n;)p.push(g),g=pe();if(p!==n)if((g=le())!==n){for(b=[],v=pe();v!==n;)b.push(v),v=pe();b!==n&&(v=ce())!==n?h=p=[p,g,b,v]:(Q=h,h=n)}else Q=h,h=n;else Q=h,h=n}if(m!==n){for(h=[],p=pe();p!==n;)h.push(p),p=pe();h!==n?(93===t.charCodeAt(Q)?(p="]",Q++):(p=n,0===X&&se(d)),p!==n?(q=e,i=function(e,t){const i=be(t);return 8+e+s.proficiencyBonus+i}(u,m),e=i):(Q=e,e=n)):(Q=e,e=n)}else Q=e,e=n}else Q=e,e=n;else Q=e,e=n}else Q=e,e=n;else Q=e,e=n;return e}())===n&&(e=function(){var e,s,i,a,o,r,l,p,g,b,v;e=Q,"DMG"===t.substr(Q,3)?(s="DMG",Q+=3):(s=n,0===X&&se(u));s===n&&("dmg"===t.substr(Q,3)?(s="dmg",Q+=3):(s=n,0===X&&se(m)));if(s!==n)if(91===t.charCodeAt(Q)?(i="[",Q++):(i=n,0===X&&se(c)),i!==n){for(a=[],o=pe();o!==n;)a.push(o),o=pe();if(a!==n)if((o=function(){var e,s,i,a,o,r;e=Q,s=Q,i=[],y.test(t.charAt(Q))?(a=t.charAt(Q),Q++):(a=n,0===X&&se(C));for(;a!==n;)i.push(a),y.test(t.charAt(Q))?(a=t.charAt(Q),Q++):(a=n,0===X&&se(C));s=i!==n?t.substring(s,Q):i;if(s!==n)if(100===t.charCodeAt(Q)?(i="d",Q++):(i=n,0===X&&se(k)),i!==n){if(a=Q,o=[],y.test(t.charAt(Q))?(r=t.charAt(Q),Q++):(r=n,0===X&&se(C)),r!==n)for(;r!==n;)o.push(r),y.test(t.charAt(Q))?(r=t.charAt(Q),Q++):(r=n,0===X&&se(C));else o=n;(a=o!==n?t.substring(a,Q):o)!==n?(q=e,s=function(e,t){e||(e=1);const s=parseInt(e,10),i=parseInt(t,10)/2+.5;return{text:`${e}d${t}`,average:Math.floor(s*i)}}(s,a),e=s):(Q=e,e=n)}else Q=e,e=n;else Q=e,e=n;return e}())!==n){for(r=[],l=Q,p=[],g=pe();g!==n;)p.push(g),g=pe();if(p!==n)if((g=le())!==n){for(b=[],v=pe();v!==n;)b.push(v),v=pe();b!==n&&(v=ce())!==n?l=p=[p,g,b,v]:(Q=l,l=n)}else Q=l,l=n;else Q=l,l=n;for(;l!==n;){for(r.push(l),l=Q,p=[],g=pe();g!==n;)p.push(g),g=pe();if(p!==n)if((g=le())!==n){for(b=[],v=pe();v!==n;)b.push(v),v=pe();b!==n&&(v=ce())!==n?l=p=[p,g,b,v]:(Q=l,l=n)}else Q=l,l=n;else Q=l,l=n}if(r!==n){for(l=[],p=pe();p!==n;)l.push(p),p=pe();l!==n?(93===t.charCodeAt(Q)?(p="]",Q++):(p=n,0===X&&se(d)),p!==n?(q=e,s=h(o,r),e=s):(Q=e,e=n)):(Q=e,e=n)}else Q=e,e=n}else Q=e,e=n;else Q=e,e=n}else Q=e,e=n;else Q=e,e=n;return e}())===n&&(e=function(){var e,i,a,o,r,l,u,m,h,b,v;e=Q,"ATK"===t.substr(Q,3)?(i="ATK",Q+=3):(i=n,0===X&&se(p));i===n&&("atk"===t.substr(Q,3)?(i="atk",Q+=3):(i=n,0===X&&se(g)));if(i!==n)if(91===t.charCodeAt(Q)?(a="[",Q++):(a=n,0===X&&se(c)),a!==n){for(o=[],r=pe();r!==n;)o.push(r),r=pe();if(o!==n)if((r=de())!==n){for(l=[],u=Q,m=[],h=pe();h!==n;)m.push(h),h=pe();if(m!==n)if((h=le())!==n){for(b=[],v=pe();v!==n;)b.push(v),v=pe();b!==n&&(v=ce())!==n?u=m=[m,h,b,v]:(Q=u,u=n)}else Q=u,u=n;else Q=u,u=n;for(;u!==n;){for(l.push(u),u=Q,m=[],h=pe();h!==n;)m.push(h),h=pe();if(m!==n)if((h=le())!==n){for(b=[],v=pe();v!==n;)b.push(v),v=pe();b!==n&&(v=ce())!==n?u=m=[m,h,b,v]:(Q=u,u=n)}else Q=u,u=n;else Q=u,u=n}if(l!==n){for(u=[],m=pe();m!==n;)u.push(m),m=pe();u!==n?(93===t.charCodeAt(Q)?(m="]",Q++):(m=n,0===X&&se(d)),m!==n?(q=e,i=function(e,t){const i=be(t);return ve(e+s.proficiencyBonus+i)}(r,l),e=i):(Q=e,e=n)):(Q=e,e=n)}else Q=e,e=n}else Q=e,e=n;else Q=e,e=n}else Q=e,e=n;else Q=e,e=n;return e}())===n&&(e=function(){var e,s,i;e=Q,"MOD"===t.substr(Q,3)?(s="MOD",Q+=3):(s=n,0===X&&se(b));s===n&&("mod"===t.substr(Q,3)?(s="mod",Q+=3):(s=n,0===X&&se(v)));s!==n&&(i=re())!==n?(q=e,s=ve(i),e=s):(Q=e,e=n);return e}())===n&&(e=function(){var e,t;e=Q,(t=re())!==n&&(q=e,t=fe(t));return e=t}());return e}())!==n&&(o=function(){var e,s;e=Q,(s=function(){var e;41===t.charCodeAt(Q)?(e=")",Q++):(e=n,0===X&&se(V));return e}())===n&&(s=null);e=s!==n?t.substring(e,Q):s;return e}())!==n?(q=e,e=i=`${i}${a}${o}`):(Q=e,e=n);return e}())===n&&(e=function(){var e,s,i;if(e=Q,s=[],(i=me())!==n)for(;i!==n;)s.push(i),i=me();else s=n;e=s!==n?t.substring(e,Q):s;return e}())===n&&(e=function(){var e,s,i;if(e=Q,s=[],(i=pe())!==n)for(;i!==n;)s.push(i),i=pe();else s=n;e=s!==n?t.substring(e,Q):s;return e}()),e}function re(){var e,s,i,a,o,r,l,u,m,h;if(e=Q,91===t.charCodeAt(Q)?(s="[",Q++):(s=n,0===X&&se(c)),s!==n){for(i=[],a=pe();a!==n;)i.push(a),a=pe();if(i!==n)if((a=ce())!==n){for(o=[],r=Q,l=[],u=pe();u!==n;)l.push(u),u=pe();if(l!==n)if((u=le())!==n){for(m=[],h=pe();h!==n;)m.push(h),h=pe();m!==n&&(h=ce())!==n?r=l=[l,u,m,h]:(Q=r,r=n)}else Q=r,r=n;else Q=r,r=n;for(;r!==n;){for(o.push(r),r=Q,l=[],u=pe();u!==n;)l.push(u),u=pe();if(l!==n)if((u=le())!==n){for(m=[],h=pe();h!==n;)m.push(h),h=pe();m!==n&&(h=ce())!==n?r=l=[l,u,m,h]:(Q=r,r=n)}else Q=r,r=n;else Q=r,r=n}if(o!==n){for(r=[],l=pe();l!==n;)r.push(l),l=pe();r!==n?(93===t.charCodeAt(Q)?(l="]",Q++):(l=n,0===X&&se(d)),l!==n?(q=e,e=s=be(o,a)):(Q=e,e=n)):(Q=e,e=n)}else Q=e,e=n}else Q=e,e=n;else Q=e,e=n}else Q=e,e=n;return e}function le(){var e;return 43===t.charCodeAt(Q)?(e="+",Q++):(e=n,0===X&&se(f)),e===n&&(45===t.charCodeAt(Q)?(e="-",Q++):(e=n,0===X&&se(w))),e}function ce(){var e;return(e=de())===n&&(e=function(){var e,i;e=Q,"PROF"===t.substr(Q,4)?(i="PROF",Q+=4):(i=n,0===X&&se(F));i===n&&("prof"===t.substr(Q,4)?(i="prof",Q+=4):(i=n,0===X&&se(H)));i!==n&&(q=e,i=s.proficiencyBonus);return e=i}())===n&&(e=function(){var e,s,i,a;e=Q,45===t.charCodeAt(Q)?(s="-",Q++):(s=n,0===X&&se(w));s===n&&(s=null);if(s!==n){if(i=[],y.test(t.charAt(Q))?(a=t.charAt(Q),Q++):(a=n,0===X&&se(C)),a!==n)for(;a!==n;)i.push(a),y.test(t.charAt(Q))?(a=t.charAt(Q),Q++):(a=n,0===X&&se(C));else i=n;i!==n?(q=e,s=O(),e=s):(Q=e,e=n)}else Q=e,e=n;return e}()),e}function de(){var e,i;return(e=ue())===n&&(e=Q,"FIN"===t.substr(Q,3)?(i="FIN",Q+=3):(i=n,0===X&&se(E)),i===n&&("fin"===t.substr(Q,3)?(i="fin",Q+=3):(i=n,0===X&&se(S))),i!==n&&(q=e,i=s.abilities.strength.modifier>=s.abilities.dexterity.modifier?s.abilities.strength.modifier:s.abilities.dexterity.modifier),e=i),e}function ue(){var e,i;return e=Q,"STR"===t.substr(Q,3)?(i="STR",Q+=3):(i=n,0===X&&se(x)),i===n&&("str"===t.substr(Q,3)?(i="str",Q+=3):(i=n,0===X&&se(T))),i!==n&&(q=e,i=s.abilities.strength.modifier),(e=i)===n&&(e=Q,"DEX"===t.substr(Q,3)?(i="DEX",Q+=3):(i=n,0===X&&se(M)),i===n&&("dex"===t.substr(Q,3)?(i="dex",Q+=3):(i=n,0===X&&se(I))),i!==n&&(q=e,i=s.abilities.dexterity.modifier),(e=i)===n&&(e=Q,"CON"===t.substr(Q,3)?(i="CON",Q+=3):(i=n,0===X&&se(B)),i===n&&("con"===t.substr(Q,3)?(i="con",Q+=3):(i=n,0===X&&se(D))),i!==n&&(q=e,i=s.abilities.constitution.modifier),(e=i)===n&&(e=Q,"INT"===t.substr(Q,3)?(i="INT",Q+=3):(i=n,0===X&&se(z)),i===n&&("int"===t.substr(Q,3)?(i="int",Q+=3):(i=n,0===X&&se(P))),i!==n&&(q=e,i=s.abilities.intelligence.modifier),(e=i)===n&&(e=Q,"WIS"===t.substr(Q,3)?(i="WIS",Q+=3):(i=n,0===X&&se(R)),i===n&&("wis"===t.substr(Q,3)?(i="wis",Q+=3):(i=n,0===X&&se(L))),i!==n&&(q=e,i=s.abilities.wisdom.modifier),(e=i)===n&&(e=Q,"CHA"===t.substr(Q,3)?(i="CHA",Q+=3):(i=n,0===X&&se(A)),i===n&&("cha"===t.substr(Q,3)?(i="cha",Q+=3):(i=n,0===X&&se(N))),i!==n&&(q=e,i=s.abilities.charisma.modifier),e=i))))),e}function me(){var e,s,i;return e=Q,s=Q,X++,(i=pe())===n&&(i=he()),X--,i===n?s=void 0:(Q=s,s=n),s!==n?(t.length>Q?(i=t.charAt(Q),Q++):(i=n,0===X&&se(j)),i!==n?e=s=[s,i]:(Q=e,e=n)):(Q=e,e=n),e}function he(){var e,s,i,a;return 10===t.charCodeAt(Q)?(e="\n",Q++):(e=n,0===X&&se(_)),e===n&&(e=Q,s=Q,13===t.charCodeAt(Q)?(i="\r",Q++):(i=n,0===X&&se(G)),i!==n?(10===t.charCodeAt(Q)?(a="\n",Q++):(a=n,0===X&&se(_)),a===n&&(a=null),a!==n?s=i=[i,a]:(Q=s,s=n)):(Q=s,s=n),e=s!==n?t.substring(e,Q):s),e}function pe(){var e;return 32===t.charCodeAt(Q)?(e=" ",Q++):(e=n,0===X&&se(J)),e===n&&(9===t.charCodeAt(Q)?(e="\t",Q++):(e=n,0===X&&se(W))),e}function ge(){var e,s;return e=Q,X++,t.length>Q?(s=t.charAt(Q),Q++):(s=n,0===X&&se(j)),X--,s===n?e=void 0:(Q=e,e=n),e}function be(e,t=0){return e.reduce((e,t)=>{const s=t[1],i=t[3];return"+"===s?e+i:"-"===s?e-i:void 0},t)}function ve(e){return`${we(e)}${ye(e)}`}function fe(e){if(e<0){return`${we(e)}${ye(e)}`}return e.toString()}function we(e){return e<0?"â€“":"+"}function ye(e){return e<0?Math.abs(e).toString():e.toString()}if((i=o())!==n&&Q===t.length)return i;throw i!==n&&Q<t.length&&se({type:"end"}),ie(Y,K<t.length?t.charAt(K):null,K<t.length?te(K,K+1):te(K,K))}}}(),te=function(){function e(t,s,i,n){this.message=t,this.expected=s,this.found=i,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s}(e,Error),e.buildMessage=function(e,t){var s={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,s="";for(t=0;t<e.parts.length;t++)s+=e.parts[t]instanceof Array?a(e.parts[t][0])+"-"+a(e.parts[t][1]):a(e.parts[t]);return"["+(e.inverted?"^":"")+s+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function i(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+i(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+i(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+i(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+i(e)}))}return"Expected "+function(e){var t,i,n,a=new Array(e.length);for(t=0;t<e.length;t++)a[t]=(n=e[t],s[n.type](n));if(a.sort(),a.length>0){for(t=1,i=1;t<a.length;t++)a[t-1]!==a[t]&&(a[i]=a[t],i++);a.length=i}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,s){s=void 0!==s?s:{};var i,n={},a={start:B},o=B,r=S("**",!1),l=function(e){return`<strong>${e.join("")}</strong>`},c=S("__",!1),d=S("*",!1),u=function(e){return`<em>${e.join("")}</em>`},m=S("_",!1),h={type:"any"},p=S("\\",!1),g=S("\n",!1),b=S("\r",!1),v=S(" ",!1),f=S("\t",!1),w=0,y=[{line:1,column:1}],C=0,k=[],E=0;if("startRule"in s){if(!(s.startRule in a))throw new Error("Can't start parsing from rule \""+s.startRule+'".');o=a[s.startRule]}function S(e,t){return{type:"literal",text:e,ignoreCase:t}}function x(e){var s,i=y[e];if(i)return i;for(s=e-1;!y[s];)s--;for(i={line:(i=y[s]).line,column:i.column};s<e;)10===t.charCodeAt(s)?(i.line++,i.column=1):i.column++,s++;return y[e]=i,i}function T(e,t){var s=x(e),i=x(t);return{start:{offset:e,line:s.line,column:s.column},end:{offset:t,line:i.line,column:i.column}}}function M(e){w<C||(w>C&&(C=w,k=[]),k.push(e))}function I(t,s,i){return new e(e.buildMessage(t,s),t,s,i)}function B(){var e,t,s;if(e=w,t=[],(s=D())!==n)for(;s!==n;)t.push(s),s=D();else t=n;return t!==n&&(e,t=t.join("")),(e=t)===n&&(e=w,(t=O())!==n&&(e,t=""),e=t),e}function D(){var e;return(e=F())===n&&(e=function(){var e,t,s;if(e=w,t=[],(s=z())!==n)for(;s!==n;)t.push(s),s=z();else t=n;t!==n&&(s=function(){var e;(e=F())===n&&(e=O());return e}())!==n?(e,i=s,t=`${t.join("")}${i||""}`,e=t):(w=e,e=n);var i;return e}()),e}function z(){var e;return(e=N())===n&&(e=function(){var e;(e=function(){var e;(e=P())===n&&(e=R());return e}())===n&&(e=function(){var e;(e=function(){var e,s,i,a;if(e=w,(s=function(){var e,s,i;e=w,s=w,E++,i=N(),E--,i===n?s=void 0:(w=s,s=n);s!==n?(42===t.charCodeAt(w)?(i="*",w++):(i=n,0===E&&M(d)),i!==n?e=s=[s,i]:(w=e,e=n)):(w=e,e=n);return e}())!==n){if(i=[],(a=z())!==n)for(;a!==n;)i.push(a),a=z();else i=n;i!==n&&(a=function(){var e,s,i,a;e=w,s=w,E++,i=P(),E--,i===n?s=void 0:(w=s,s=n);s!==n?(i=w,E++,a=N(),E--,a===n?i=void 0:(w=i,i=n),i!==n?(42===t.charCodeAt(w)?(a="*",w++):(a=n,0===E&&M(d)),a!==n?e=s=[s,i,a]:(w=e,e=n)):(w=e,e=n)):(w=e,e=n);return e}())!==n?(e,s=u(i),e=s):(w=e,e=n)}else w=e,e=n;return e}())===n&&(e=function(){var e,s,i,a;if(e=w,(s=function(){var e,s,i;e=w,s=w,E++,i=N(),E--,i===n?s=void 0:(w=s,s=n);s!==n?(95===t.charCodeAt(w)?(i="_",w++):(i=n,0===E&&M(m)),i!==n?e=s=[s,i]:(w=e,e=n)):(w=e,e=n);return e}())!==n){if(i=[],(a=z())!==n)for(;a!==n;)i.push(a),a=z();else i=n;i!==n&&(a=function(){var e,s,i,a;e=w,s=w,E++,i=R(),E--,i===n?s=void 0:(w=s,s=n);s!==n?(i=w,E++,a=N(),E--,a===n?i=void 0:(w=i,i=n),i!==n?(95===t.charCodeAt(w)?(a="_",w++):(a=n,0===E&&M(m)),a!==n?e=s=[s,i,a]:(w=e,e=n)):(w=e,e=n)):(w=e,e=n);return e}())!==n?(e,s=u(i),e=s):(w=e,e=n)}else w=e,e=n;return e}());return e}());return e}())===n&&(e=function(){var e,s,i;if(e=w,s=[],(i=L())!==n)for(;i!==n;)s.push(i),i=L();else s=n;e=s!==n?t.substring(e,w):s;return e}())===n&&(e=function(){var e,s,i;if(e=w,s=[],(i=H())!==n)for(;i!==n;)s.push(i),i=H();else s=n;e=s!==n?t.substring(e,w):s;return e}()),e}function P(){var e,s,i;if(e=w,function(){var e,s,i;return e=w,s=w,E++,i=N(),E--,i===n?s=void 0:(w=s,s=n),s!==n?("**"===t.substr(w,2)?(i="**",w+=2):(i=n,0===E&&M(r)),i!==n?e=s=[s,i]:(w=e,e=n)):(w=e,e=n),e}()!==n){if(s=[],(i=z())!==n)for(;i!==n;)s.push(i),i=z();else s=n;s!==n&&(i=function(){var e,s,i;return e=w,s=w,E++,i=N(),E--,i===n?s=void 0:(w=s,s=n),s!==n?("**"===t.substr(w,2)?(i="**",w+=2):(i=n,0===E&&M(r)),i!==n?e=s=[s,i]:(w=e,e=n)):(w=e,e=n),e}())!==n?(e,e=l(s)):(w=e,e=n)}else w=e,e=n;return e}function R(){var e,s,i;if(e=w,function(){var e,s,i;return e=w,s=w,E++,i=N(),E--,i===n?s=void 0:(w=s,s=n),s!==n?("__"===t.substr(w,2)?(i="__",w+=2):(i=n,0===E&&M(c)),i!==n?e=s=[s,i]:(w=e,e=n)):(w=e,e=n),e}()!==n){if(s=[],(i=z())!==n)for(;i!==n;)s.push(i),i=z();else s=n;s!==n&&(i=function(){var e,s,i;return e=w,s=w,E++,i=N(),E--,i===n?s=void 0:(w=s,s=n),s!==n?("__"===t.substr(w,2)?(i="__",w+=2):(i=n,0===E&&M(c)),i!==n?e=s=[s,i]:(w=e,e=n)):(w=e,e=n),e}())!==n?(e,e=l(s)):(w=e,e=n)}else w=e,e=n;return e}function L(){var e,s,i;return e=w,s=w,E++,(i=A())===n&&(i=N())===n&&(i=H())===n&&(i=F()),E--,i===n?s=void 0:(w=s,s=n),s!==n?(t.length>w?(i=t.charAt(w),w++):(i=n,0===E&&M(h)),i!==n?e=s=[s,i]:(w=e,e=n)):(w=e,e=n),e}function A(){var e;return 42===t.charCodeAt(w)?(e="*",w++):(e=n,0===E&&M(d)),e===n&&(95===t.charCodeAt(w)?(e="_",w++):(e=n,0===E&&M(m))),e}function N(){var e,s,i;return e=w,92===t.charCodeAt(w)?(s="\\",w++):(s=n,0===E&&M(p)),s!==n&&(i=A())!==n?(e,e=s=i):(w=e,e=n),e}function F(){var e,s,i,a;return 10===t.charCodeAt(w)?(e="\n",w++):(e=n,0===E&&M(g)),e===n&&(e=w,s=w,13===t.charCodeAt(w)?(i="\r",w++):(i=n,0===E&&M(b)),i!==n?(10===t.charCodeAt(w)?(a="\n",w++):(a=n,0===E&&M(g)),a===n&&(a=null),a!==n?s=i=[i,a]:(w=s,s=n)):(w=s,s=n),e=s!==n?t.substring(e,w):s),e}function H(){var e;return 32===t.charCodeAt(w)?(e=" ",w++):(e=n,0===E&&M(v)),e===n&&(9===t.charCodeAt(w)?(e="\t",w++):(e=n,0===E&&M(f))),e}function O(){var e,s;return e=w,E++,t.length>w?(s=t.charAt(w),w++):(s=n,0===E&&M(h)),E--,s===n?e=void 0:(w=e,e=n),e}if((i=o())!==n&&w===t.length)return i;throw i!==n&&w<t.length&&M({type:"end"}),I(k,C<t.length?t.charAt(C):null,C<t.length?T(C,C+1):T(C,C))}}}();function se(e,t=!0,s=!0,i=!0,n={}){let a={text:e,nameParserResults:null,mathParserResults:null,markdownParserResults:null};if(t){if(a.nameParserResults=function(e,t={}){return t.creature=X.creature.title.toParserOptions(),ne(Z,e,t)}(a.text,n),a.nameParserResults.error)return a;a.text=a.nameParserResults.outputText}if(s){if(a.mathParserResults=function(e,t={}){return t.abilities=X.creature.abilities.toParserOptions(),t.proficiencyBonus=X.creature.challengeRating.toParserOptions(),ne(ee,e,t)}(a.text,n),a.mathParserResults.error)return a;a.text=a.mathParserResults.outputText}if(i){if(a.markdownParserResults=ie(a.text,n),a.markdownParserResults.error)return a;a.text=a.markdownParserResults.outputText}return a}function ie(e,t={}){return ne(te,e,t)}function ne(e,t,s){const i={inputText:t,outputText:null,error:null};try{const n=e.parse(t,s);i.outputText=n}catch(e){i.error={message:e.message,location:e.location}}return i}class ae extends HTMLTextAreaElement{static async define(){customElements.define("block-textarea",this,{extends:"textarea"})}constructor(){super(),this.htmlText=null}get fieldName(){const e=this.getAttribute("pretty-name");return e||this.name}validate(e){this.required&&""===this.value&&e.add(this,this.fieldName+" cannot be blank."),this.parse(e)}parse(e=null){const t=se(f(this.value));e&&(t.nameParserResults.error?e.add(this,this.fieldName+" has at least one invalid name expression."):t.mathParserResults.error?e.add(this,this.fieldName+" has at least one invalid math expression."):t.markdownParserResults.error&&e.add(this,this.fieldName+" has invalid markdown syntax.")),t.mathParserResults.error||(this.markdownText=t.mathParserResults.outputText.replace(/\n/g,"  \n> ")),this.htmlText=t.text}}class oe extends HTMLSelectElement{static async define(){customElements.define("dynamic-select",this,{extends:"select"})}constructor(){super()}enable(){this.removeAttribute("disabled")}disable(){this.setAttribute("disabled","")}get isEnabled(){return!this.hasAttribute("disabled")}clear(){for(;this.options.length>0;)this.remove(0)}populate(e){for(const t of e)this.add(t)}}function re(e){const t=e.tagName;(function(e,t){return"INPUT"===e&&("text"===t||"number"===t)})(t,e.getAttribute("type"))||function(e){return"TEXTAREA"===e}(t)?(e.focus(),e.select()):e.focus()}function le(e,t){const s=e.tagName,i=e.getAttribute("type");"INPUT"===s&&"checkbox"===i?e.checked=t:e.value=t,e.dispatchEvent(new Event("input"))}function ce(e,t,s="text",i="value"){for(const n of t){const t=new Option(n[s],n[i]);e.appendChild(t)}}function de(e,t){ce(e,t.map(e=>({text:e})))}function ue(e,t){ce(e,t.map(e=>({value:e})))}class me extends HTMLInputElement{static async define(){customElements.define("enable-disable-elements-checkbox",this,{extends:"input"})}constructor(){super(),this.enabledElements=[],this.disabledElements=[]}connectedCallback(){this.isConnected&&!this.isInitialized&&(this.addEventListener("input",this.onInputCheckbox.bind(this)),this.initialized=!0)}onInputCheckbox(){const e=this.checked?this.enabledElements:this.disabledElements,t=this.checked?this.disabledElements:this.enabledElements;for(const[t,s]of e.entries())s.removeAttribute("disabled"),0===t&&re(s);for(const e of t)e.setAttribute("disabled","")}enableElementsWhenChecked(...e){this.enabledElements=this.enabledElements.concat(e)}disableElementsWhenChecked(...e){this.disabledElements=this.disabledElements.concat(e)}}class he extends HTMLInputElement{static async define(){customElements.define("number-input",this,{extends:"input"})}constructor(){super()}connectedCallback(){this.isConnected&&!this.isInitialized&&(this.addEventListener("input",this.onInput),this.initialized=!0)}onInput(){if(this.value){let e=this.valueAsInt;this.min&&e<this.minAsInt?this.value=this.min:this.max&&e>this.maxAsInt?this.value=this.max:this.value=e}}validate(e){if(null===this.valueAsInt){const t=this.getAttribute("pretty-name"),s=t||this.name;e.add(this,s+" must be a valid number.")}}get valueAsInt(){return E(this.value)}get minAsInt(){return E(this.min)}get maxAsInt(){return E(this.max)}}class pe extends HTMLSelectElement{static async define(){customElements.define("number-select",this,{extends:"select"})}constructor(){super()}get valueAsInt(){return E(this.value)}}class ge extends HTMLDataListElement{static async define(){customElements.define("property-datalist",this,{extends:"datalist"})}constructor(){super()}setOptionEnabled(e,t){const s=this.findOption(e);null!==s&&(t?s.removeAttribute("disabled"):s.setAttribute("disabled",""))}findOption(e){for(const t of this.childNodes)if("OPTION"===t.tagName&&t.value===e)return t;return null}}const be=s(8)(window);class ve extends HTMLParagraphElement{static async define(){customElements.define("sanitized-paragraph",this,{extends:"p"})}constructor(){super()}set innerHTMLSanitized(e){var t;this.innerHTML=(t=e,be.sanitize(t,{ALLOWED_TAGS:["strong","em","b","i"]}))}get innerHTMLSanitized(){return this.innerHTML}}class fe extends HTMLInputElement{static async define(){customElements.define("text-input",this,{extends:"input"})}constructor(){super(),this.htmlText=""}get fieldName(){const e=this.getAttribute("pretty-name");return e||this.name}validate(e){this.required&&""===this.value?e.add(this,this.fieldName+" cannot be blank."):"parsed"in this.dataset&&this.parse(e)}parse(e){const t=ie(f(this.value));if(t.error){const t=this.fieldName+" has invalid Markdown syntax.";e.add(this,t)}else this.htmlText=t.outputText}}var we=new class{constructor(){this.templates=new Map}async addTemplate(e,t){const s=await n(t);this.templates.set(e,s)}hasTemplate(e){return this.templates.has(e)}getTemplate(e){return this.templates.get(e)}};class ye extends HTMLElement{static get elementName(){throw new Error(`The class '${this.name}' must implement the elementName() getter.`)}static get templatePaths(){return new Map}static async define(){for(const[e,t]of this.templatePaths)we.hasTemplate(e)||await we.addTemplate(e,t);customElements.define(this.elementName,this)}constructor(e){super(),this.isInitialized=!1,this.attachShadow({mode:"open"});for(const t of e.keys()){const e=we.getTemplate(t),s=document.createRange().createContextualFragment(e);this.shadowRoot.appendChild(s.cloneNode(!0))}}connectedCallback(){}}class Ce extends ye{static get elementName(){return"error-messages"}static get templatePaths(){return super.templatePaths.set("error-messages","src/html/elements/autonomous/error-messages.html")}constructor(){super(Ce.templatePaths),this.container=this.shadowRoot.getElementById("error-messages"),this.list=this.shadowRoot.getElementById("error-messages-list"),this.errors=[]}add(e,t){let s={fieldElement:e,message:t};this.errors.push(s),e.classList.add("section__error-highlight"),this.container.classList.remove("error-messages_hidden");let i=Ce.createErrorMessageElement(t);this.list.appendChild(i)}clear(){for(this.container.classList.add("error-messages_hidden");this.errors.length>0;){this.errors.pop().fieldElement.classList.remove("section__error-highlight")}let e=this.list;for(;e.hasChildNodes();)e.removeChild(e.lastChild)}focusOnFirstErrorField(){re(this.errors[0].fieldElement)}get any(){return this.errors.length>0}static createErrorMessageElement(e){let t=document.createElement("li"),s=document.createTextNode(e);return t.appendChild(s),t}}const ke="getting-started-help-box_hidden";class Ee extends ye{static get elementName(){return"getting-started-help-box"}static get templatePaths(){return super.templatePaths.set("getting-started-help-box","src/html/elements/autonomous/getting-started-help-box.html")}constructor(){super(Ee.templatePaths),this.container=this.shadowRoot.getElementById("container"),this.closeButton=this.shadowRoot.getElementById("close-button")}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.closeButton.addEventListener("click",this.onClickCloseButton.bind(this)),this.isInitialized=!0)}onClickCloseButton(){const e=new CustomEvent("toggleGettingStarted",{bubbles:!0,composed:!0});this.dispatchEvent(e)}set visible(e){e?this.container.classList.remove(ke):this.container.classList.add(ke)}get visible(){return!this.container.classList.contains(ke)}}class Se extends ye{static get elementName(){return"loading-screen"}static get templatePaths(){return super.templatePaths.set("loading-screen","src/html/elements/autonomous/loading-screen.html")}constructor(){super(Se.templatePaths),this.container=this.shadowRoot.getElementById("container"),this.statusElement=this.shadowRoot.getElementById("status")}set visible(e){e?this.container.classList.remove("loading-screen_hidden"):this.container.classList.add("loading-screen_hidden")}get visible(){return!this.container.classList.contains("loading-screen_hidden")}set status(e){this.statusElement.textContent=e}get status(){return this.statusElement.textContent}}class xe extends ye{static get elementName(){return"property-block"}static get templatePaths(){return super.templatePaths.set("property-block","src/html/elements/autonomous/property-block.html")}constructor(){super(xe.templatePaths)}}class Te extends ye{static get elementName(){return"property-line"}static get templatePaths(){return super.templatePaths.set("property-line","src/html/elements/autonomous/property-line.html")}constructor(){super(Te.templatePaths)}}class Me extends ye{static get elementName(){return"section-divider"}static get templatePaths(){return super.templatePaths.set("section-divider","src/html/elements/autonomous/section-divider.html")}static get hiddenClassName(){return"section-divider_hidden"}constructor(){super(Me.templatePaths),this.divider=this.shadowRoot.querySelector(".section-divider"),this.hidden=!0}get hidden(){return this.divider.classList.contains(Me.hiddenClassName)}set hidden(e){e?this.divider.classList.add(Me.hiddenClassName):this.divider.classList.remove(Me.hiddenClassName)}}class Ie extends ye{static get elementName(){return"slide-toggle"}static get templatePaths(){return super.templatePaths.set("slide-toggle","src/html/elements/autonomous/slide-toggle.html")}constructor(){super(Ie.templatePaths),this.checkbox=this.shadowRoot.getElementById("slide-toggle-checkbox"),this.control=this.shadowRoot.getElementById("slide-toggle-control")}connectedCallback(){if(this.isConnected&&!this.isInitialized){super.connectedCallback(),this.control.dataset.uncheckedText=this.dataset.uncheckedText?this.dataset.uncheckedText:"Off",this.control.dataset.checkedText=this.dataset.checkedText?this.dataset.checkedText:"On";const e="vertical"===this.dataset.orientation?"slide-toggle__vertical-control":"slide-toggle__horizontal-control";this.control.classList.add(e),this.checked=this.hasAttribute("checked"),this.isInitialized=!0}}get checked(){return this.checkbox.checked}set checked(e){this.checkbox.checked=e}addEventListener(e,t){this.checkbox.addEventListener(e,t)}click(){this.checkbox.click()}}class Be extends ye{static get elementName(){return"spell-category-box"}static get templatePaths(){return super.templatePaths.set("spell-category-box","src/html/elements/autonomous/spell-category-box.html")}constructor(e){super(Be.templatePaths,e),this.container=this.shadowRoot.getElementById("container"),this.heading=this.shadowRoot.getElementById("heading"),this.propertyList=this.shadowRoot.getElementById("property-list"),this.propertyList.singleItemName="spell"}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.isInitialized=!0)}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?(this.setAttribute("disabled",""),this.container.classList.add("spell-category__container_disabled")):(this.removeAttribute("disabled"),this.container.classList.remove("spell-category__container_disabled"))}}class De extends ye{static get elementName(){return"tapered-rule"}static get templatePaths(){return super.templatePaths.set("tapered-rule","src/html/elements/autonomous/tapered-rule.html")}constructor(){super(De.templatePaths)}}class ze extends ye{static get elementName(){return"custom-dialog"}static get templatePaths(){return super.templatePaths.set("custom-dialog","src/html/elements/autonomous/dialogs/custom-dialog.html")}constructor(e,t=null){super(e,t),this.dialog=this.shadowRoot.getElementById("dialog"),this.closeButton=this.shadowRoot.getElementById("close-button")}connectedCallback(){super.connectedCallback(),this.closeButton.addEventListener("click",this.onClickCloseButton.bind(this))}onClickCloseButton(){this.closeModal()}set open(e){e?this.dialog.setAttribute("open",""):this.dialog.removeAttribute("open")}get open(){return this.dialog.getAttribute("open")}showModal(){i?this.open=!0:this.dialog.showModal()}closeModal(){i?this.open=!1:this.dialog.close()}}const Pe="option-dialog__status-label_success",Re="option-dialog__status-label_error";class Le extends ze{static get elementName(){return"option-dialog"}static get templatePaths(){return super.templatePaths.set("option-dialog","src/html/elements/autonomous/dialogs/option-dialog.html")}constructor(e,t=null){super(e,t),this.statusLabel=this.shadowRoot.getElementById("status-label"),this.cancelButton=this.shadowRoot.getElementById("cancel-button")}connectedCallback(){super.connectedCallback(),this.cancelButton.addEventListener("click",this.onClickCloseButton.bind(this))}get statusText(){return this.statusLabel.textContent}get statusType(){return this.statusLabel.classList.contains(Pe)?"success":this.statusLabel.classList.contains(Re)?"error":null}setStatus(e,t=null){switch(this.statusLabel.textContent=e,this.statusLabel.classList.remove(Pe),this.statusLabel.classList.remove(Re),t){case"success":this.statusLabel.classList.add(Pe);break;case"error":this.statusLabel.classList.add(Re)}}}class Ae extends Le{static get elementName(){return"import-dialog"}static get templatePaths(){return super.templatePaths.set("import-dialog","src/html/elements/autonomous/dialogs/import-dialog.html")}constructor(e){super(e),this.importCallback=null}connectedCallback(){super.connectedCallback()}launch(e){this.importCallback=e}}const Ne="import-json-dialog__file-upload-drop-zone_drag-enter";class Fe extends Ae{static get elementName(){return"import-json-dialog"}static get templatePaths(){return super.templatePaths.set("import-json-dialog","src/html/elements/autonomous/dialogs/import-json-dialog.html")}constructor(){super(Fe.templatePaths),this.fileInput=this.shadowRoot.getElementById("file-input"),this.chooseFileButton=this.shadowRoot.getElementById("choose-file-button"),this.fileUploadDropZone=this.shadowRoot.getElementById("file-upload-drop-zone"),this.dragEnterCounter=0}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.fileInput.addEventListener("change",this.onFileSelected.bind(this)),this.chooseFileButton.addEventListener("click",this.onClickChooseFileButton.bind(this)),this.fileUploadDropZone.addEventListener("dragenter",this.onFileDragEnter.bind(this)),this.fileUploadDropZone.addEventListener("dragleave",this.onFileDragLeave.bind(this)),this.fileUploadDropZone.addEventListener("dragover",this.onFileDragOver.bind(this)),this.fileUploadDropZone.addEventListener("drop",this.onFileDropped.bind(this)),this.isInitialized=!0)}onClickChooseFileButton(e){e.preventDefault(),this.fileInput.click()}onFileSelected(){const e=this.fileInput.files[0];this.importFile(e)}onFileDragEnter(){this.dragEnterCounter++,this.fileUploadDropZone.classList.add(Ne)}onFileDragLeave(){this.dragEnterCounter--,0===this.dragEnterCounter&&this.fileUploadDropZone.classList.remove(Ne)}onFileDragOver(e){e.preventDefault()}onFileDropped(e){e.preventDefault();const t=e.dataTransfer.items;if(t)if(t.length<1)this.setStatus("Error: Dragged item contains no data.","error");else if(t.length>1)this.setStatus("Error: Cannot upload multiple dragged items.","error");else if("file"!==t[0].kind)this.setStatus("Error: Dragged item is not a file.","error");else{const e=t[0].getAsFile();this.importFile(e)}}async importFile(e){this.setStatus("Uploading file...");const t=await e.text(),s=JSON.parse(t);this.importCallback(s),this.closeModal()}launch(e){super.launch(e),this.fileInput.value="",this.fileUploadDropZone.classList.remove(Ne),this.setStatus(""),this.showModal()}}var He=[{name:"Aboleth",slug:"aboleth"},{name:"Acolyte",slug:"acolyte"},{name:"Adult Black Dragon",slug:"adult-black-dragon"},{name:"Adult Blue Dragon",slug:"adult-blue-dragon"},{name:"Adult Brass Dragon",slug:"adult-brass-dragon"},{name:"Adult Bronze Dragon",slug:"adult-bronze-dragon"},{name:"Adult Copper Dragon",slug:"adult-copper-dragon"},{name:"Adult Gold Dragon",slug:"adult-gold-dragon"},{name:"Adult Green Dragon",slug:"adult-green-dragon"},{name:"Adult Red Dragon",slug:"adult-red-dragon"},{name:"Adult Silver Dragon",slug:"adult-silver-dragon"},{name:"Adult White Dragon",slug:"adult-white-dragon"},{name:"Air Elemental",slug:"air-elemental"},{name:"Ancient Black Dragon",slug:"ancient-black-dragon"},{name:"Ancient Blue Dragon",slug:"ancient-blue-dragon"},{name:"Ancient Brass Dragon",slug:"ancient-brass-dragon"},{name:"Ancient Bronze Dragon",slug:"ancient-bronze-dragon"},{name:"Ancient Copper Dragon",slug:"ancient-copper-dragon"},{name:"Ancient Gold Dragon",slug:"ancient-gold-dragon"},{name:"Ancient Green Dragon",slug:"ancient-green-dragon"},{name:"Ancient Red Dragon",slug:"ancient-red-dragon"},{name:"Ancient Silver Dragon",slug:"ancient-silver-dragon"},{name:"Ancient White Dragon",slug:"ancient-white-dragon"},{name:"Androsphinx",slug:"androsphinx"},{name:"Animated Armor",slug:"animated-armor"},{name:"Ankheg",slug:"ankheg"},{name:"Ape",slug:"ape"},{name:"Archmage",slug:"archmage"},{name:"Assassin",slug:"assassin"},{name:"Awakened Shrub",slug:"awakened-shrub"},{name:"Awakened Tree",slug:"awakened-tree"},{name:"Axe Beak",slug:"axe-beak"},{name:"Azer",slug:"azer"},{name:"Baboon",slug:"baboon"},{name:"Badger",slug:"badger"},{name:"Balor",slug:"balor"},{name:"Bandit Captain",slug:"bandit-captain"},{name:"Bandit",slug:"bandit"},{name:"Barbed Devil",slug:"barbed-devil"},{name:"Basilisk",slug:"basilisk"},{name:"Bat",slug:"bat"},{name:"Bearded Devil",slug:"bearded-devil"},{name:"Behir",slug:"behir"},{name:"Berserker",slug:"berserker"},{name:"Black Bear",slug:"black-bear"},{name:"Black Dragon Wyrmling",slug:"black-dragon-wyrmling"},{name:"Black Pudding",slug:"black-pudding"},{name:"Blink Dog",slug:"blink-dog"},{name:"Blood Hawk",slug:"blood-hawk"},{name:"Blue Dragon Wyrmling",slug:"blue-dragon-wyrmling"},{name:"Boar",slug:"boar"},{name:"Bone Devil",slug:"bone-devil"},{name:"Brass Dragon Wyrmling",slug:"brass-dragon-wyrmling"},{name:"Bronze Dragon Wyrmling",slug:"bronze-dragon-wyrmling"},{name:"Brown Bear",slug:"brown-bear"},{name:"Bugbear",slug:"bugbear"},{name:"Bulette",slug:"bulette"},{name:"Camel",slug:"camel"},{name:"Cat",slug:"cat"},{name:"Centaur",slug:"centaur"},{name:"Chain Devil",slug:"chain-devil"},{name:"Chimera",slug:"chimera"},{name:"Chuul",slug:"chuul"},{name:"Clay Golem",slug:"clay-golem"},{name:"Cloaker",slug:"cloaker"},{name:"Cloud Giant",slug:"cloud-giant"},{name:"Cockatrice",slug:"cockatrice"},{name:"Commoner",slug:"commoner"},{name:"Constrictor Snake",slug:"constrictor-snake"},{name:"Copper Dragon Wyrmling",slug:"copper-dragon-wyrmling"},{name:"Couatl",slug:"couatl"},{name:"Crab",slug:"crab"},{name:"Crocodile",slug:"crocodile"},{name:"Cult Fanatic",slug:"cult-fanatic"},{name:"Cultist",slug:"cultist"},{name:"Darkmantle",slug:"darkmantle"},{name:"Death Dog",slug:"death-dog"},{name:"Deep Gnome (Svirfneblin)",slug:"deep-gnome-svirfneblin"},{name:"Deer",slug:"deer"},{name:"Deva",slug:"deva"},{name:"Dire Wolf",slug:"dire-wolf"},{name:"Djinni",slug:"djinni"},{name:"Doppelganger",slug:"doppelganger"},{name:"Draft Horse",slug:"draft-horse"},{name:"Dragon Turtle",slug:"dragon-turtle"},{name:"Dretch",slug:"dretch"},{name:"Drider",slug:"drider"},{name:"Drow",slug:"drow"},{name:"Druid",slug:"druid"},{name:"Dryad",slug:"dryad"},{name:"Duergar",slug:"duergar"},{name:"Dust Mephit",slug:"dust-mephit"},{name:"Eagle",slug:"eagle"},{name:"Earth Elemental",slug:"earth-elemental"},{name:"Efreeti",slug:"efreeti"},{name:"Elephant",slug:"elephant"},{name:"Elk",slug:"elk"},{name:"Erinyes",slug:"erinyes"},{name:"Ettercap",slug:"ettercap"},{name:"Ettin",slug:"ettin"},{name:"Fire Elemental",slug:"fire-elemental"},{name:"Fire Giant",slug:"fire-giant"},{name:"Flesh Golem",slug:"flesh-golem"},{name:"Flying Snake",slug:"flying-snake"},{name:"Flying Sword",slug:"flying-sword"},{name:"Frog",slug:"frog"},{name:"Frost Giant",slug:"frost-giant"},{name:"Gargoyle",slug:"gargoyle"},{name:"Gelatinous Cube",slug:"gelatinous-cube"},{name:"Ghast",slug:"ghast"},{name:"Ghost",slug:"ghost"},{name:"Ghoul",slug:"ghoul"},{name:"Giant Ape",slug:"giant-ape"},{name:"Giant Badger",slug:"giant-badger"},{name:"Giant Bat",slug:"giant-bat"},{name:"Giant Boar",slug:"giant-boar"},{name:"Giant Centipede",slug:"giant-centipede"},{name:"Giant Constrictor Snake",slug:"giant-constrictor-snake"},{name:"Giant Crab",slug:"giant-crab"},{name:"Giant Crocodile",slug:"giant-crocodile"},{name:"Giant Eagle",slug:"giant-eagle"},{name:"Giant Elk",slug:"giant-elk"},{name:"Giant Fire Beetle",slug:"giant-fire-beetle"},{name:"Giant Frog",slug:"giant-frog"},{name:"Giant Goat",slug:"giant-goat"},{name:"Giant Hyena",slug:"giant-hyena"},{name:"Giant Lizard",slug:"giant-lizard"},{name:"Giant Octopus",slug:"giant-octopus"},{name:"Giant Owl",slug:"giant-owl"},{name:"Giant Poisonous Snake",slug:"giant-poisonous-snake"},{name:"Giant Rat (Diseased)",slug:"giant-rat-diseased"},{name:"Giant Rat",slug:"giant-rat"},{name:"Giant Scorpion",slug:"giant-scorpion"},{name:"Giant Sea Horse",slug:"giant-sea-horse"},{name:"Giant Shark",slug:"giant-shark"},{name:"Giant Spider",slug:"giant-spider"},{name:"Giant Toad",slug:"giant-toad"},{name:"Giant Vulture",slug:"giant-vulture"},{name:"Giant Wasp",slug:"giant-wasp"},{name:"Giant Weasel",slug:"giant-weasel"},{name:"Giant Wolf Spider",slug:"giant-wolf-spider"},{name:"Gibbering Mouther",slug:"gibbering-mouther"},{name:"Glabrezu",slug:"glabrezu"},{name:"Gladiator",slug:"gladiator"},{name:"Gnoll",slug:"gnoll"},{name:"Goat",slug:"goat"},{name:"Goblin",slug:"goblin"},{name:"Gold Dragon Wyrmling",slug:"gold-dragon-wyrmling"},{name:"Gorgon",slug:"gorgon"},{name:"Gray Ooze",slug:"gray-ooze"},{name:"Green Dragon Wyrmling",slug:"green-dragon-wyrmling"},{name:"Green Hag",slug:"green-hag"},{name:"Grick",slug:"grick"},{name:"Griffon",slug:"griffon"},{name:"Grimlock",slug:"grimlock"},{name:"Guard",slug:"guard"},{name:"Guardian Naga",slug:"guardian-naga"},{name:"Gynosphinx",slug:"gynosphinx"},{name:"Half-Red Dragon Veteran",slug:"half-red-dragon-veteran"},{name:"Harpy",slug:"harpy"},{name:"Hawk",slug:"hawk"},{name:"Hell Hound",slug:"hell-hound"},{name:"Hezrou",slug:"hezrou"},{name:"Hill Giant",slug:"hill-giant"},{name:"Hippogriff",slug:"hippogriff"},{name:"Hobgoblin",slug:"hobgoblin"},{name:"Homunculus",slug:"homunculus"},{name:"Horned Devil",slug:"horned-devil"},{name:"Hunter Shark",slug:"hunter-shark"},{name:"Hydra",slug:"hydra"},{name:"Hyena",slug:"hyena"},{name:"Ice Devil",slug:"ice-devil"},{name:"Ice Mephit",slug:"ice-mephit"},{name:"Imp",slug:"imp"},{name:"Invisible Stalker",slug:"invisible-stalker"},{name:"Iron Golem",slug:"iron-golem"},{name:"Jackal",slug:"jackal"},{name:"Killer Whale",slug:"killer-whale"},{name:"Knight",slug:"knight"},{name:"Kobold",slug:"kobold"},{name:"Kraken",slug:"kraken"},{name:"Lamia",slug:"lamia"},{name:"Lemure",slug:"lemure"},{name:"Lich",slug:"lich"},{name:"Lion",slug:"lion"},{name:"Lizard",slug:"lizard"},{name:"Lizardfolk",slug:"lizardfolk"},{name:"Mage",slug:"mage"},{name:"Magma Mephit",slug:"magma-mephit"},{name:"Magmin",slug:"magmin"},{name:"Mammoth",slug:"mammoth"},{name:"Manticore",slug:"manticore"},{name:"Marilith",slug:"marilith"},{name:"Mastiff",slug:"mastiff"},{name:"Medusa",slug:"medusa"},{name:"Merfolk",slug:"merfolk"},{name:"Merrow",slug:"merrow"},{name:"Mimic",slug:"mimic"},{name:"Minotaur Skeleton",slug:"minotaur-skeleton"},{name:"Minotaur",slug:"minotaur"},{name:"Mule",slug:"mule"},{name:"Mummy Lord",slug:"mummy-lord"},{name:"Mummy",slug:"mummy"},{name:"Nalfeshnee",slug:"nalfeshnee"},{name:"Night Hag",slug:"night-hag"},{name:"Nightmare",slug:"nightmare"},{name:"Noble",slug:"noble"},{name:"Ochre Jelly",slug:"ochre-jelly"},{name:"Octopus",slug:"octopus"},{name:"Ogre Zombie",slug:"ogre-zombie"},{name:"Ogre",slug:"ogre"},{name:"Oni",slug:"oni"},{name:"Orc",slug:"orc"},{name:"Otyugh",slug:"otyugh"},{name:"Owl",slug:"owl"},{name:"Owlbear",slug:"owlbear"},{name:"Panther",slug:"panther"},{name:"Pegasus",slug:"pegasus"},{name:"Phase Spider",slug:"phase-spider"},{name:"Pit Fiend",slug:"pit-fiend"},{name:"Planetar",slug:"planetar"},{name:"Plesiosaurus",slug:"plesiosaurus"},{name:"Poisonous Snake",slug:"poisonous-snake"},{name:"Polar Bear",slug:"polar-bear"},{name:"Pony",slug:"pony"},{name:"Priest",slug:"priest"},{name:"Pseudodragon",slug:"pseudodragon"},{name:"Purple Worm",slug:"purple-worm"},{name:"Quasit",slug:"quasit"},{name:"Quipper",slug:"quipper"},{name:"Rakshasa",slug:"rakshasa"},{name:"Rat",slug:"rat"},{name:"Raven",slug:"raven"},{name:"Red Dragon Wyrmling",slug:"red-dragon-wyrmling"},{name:"Reef Shark",slug:"reef-shark"},{name:"Remorhaz",slug:"remorhaz"},{name:"Rhinoceros",slug:"rhinoceros"},{name:"Riding Horse",slug:"riding-horse"},{name:"Roc",slug:"roc"},{name:"Roper",slug:"roper"},{name:"Rug of Smothering",slug:"rug-of-smothering"},{name:"Rust Monster",slug:"rust-monster"},{name:"Saber-Toothed Tiger",slug:"saber-toothed-tiger"},{name:"Sahuagin",slug:"sahuagin"},{name:"Salamander",slug:"salamander"},{name:"Satyr",slug:"satyr"},{name:"Scorpion",slug:"scorpion"},{name:"Scout",slug:"scout"},{name:"Sea Hag",slug:"sea-hag"},{name:"Sea Horse",slug:"sea-horse"},{name:"Shadow",slug:"shadow"},{name:"Shambling Mound",slug:"shambling-mound"},{name:"Shield Guardian",slug:"shield-guardian"},{name:"Shrieker",slug:"shrieker"},{name:"Silver Dragon Wyrmling",slug:"silver-dragon-wyrmling"},{name:"Skeleton",slug:"skeleton"},{name:"Solar",slug:"solar"},{name:"Specter",slug:"specter"},{name:"Spider",slug:"spider"},{name:"Spirit Naga",slug:"spirit-naga"},{name:"Sprite",slug:"sprite"},{name:"Spy",slug:"spy"},{name:"Steam Mephit",slug:"steam-mephit"},{name:"Stirge",slug:"stirge"},{name:"Stone Giant",slug:"stone-giant"},{name:"Stone Golem",slug:"stone-golem"},{name:"Storm Giant",slug:"storm-giant"},{name:"Succubus/Incubus",slug:"succubus-incubus"},{name:"Swarm of Bats",slug:"swarm-of-bats"},{name:"Swarm of Beetles",slug:"swarm-of-beetles"},{name:"Swarm of Centipedes",slug:"swarm-of-centipedes"},{name:"Swarm of Insects",slug:"swarm-of-insects"},{name:"Swarm of Poisonous Snakes",slug:"swarm-of-poisonous-snakes"},{name:"Swarm of Quippers",slug:"swarm-of-quippers"},{name:"Swarm of Rats",slug:"swarm-of-rats"},{name:"Swarm of Ravens",slug:"swarm-of-ravens"},{name:"Swarm of Spiders",slug:"swarm-of-spiders"},{name:"Swarm of Wasps",slug:"swarm-of-wasps"},{name:"Tarrasque",slug:"tarrasque"},{name:"Thug",slug:"thug"},{name:"Tiger",slug:"tiger"},{name:"Treant",slug:"treant"},{name:"Tribal Warrior",slug:"tribal-warrior"},{name:"Triceratops",slug:"triceratops"},{name:"Troll",slug:"troll"},{name:"Tyrannosaurus Rex",slug:"tyrannosaurus-rex"},{name:"Unicorn",slug:"unicorn"},{name:"Vampire Spawn",slug:"vampire-spawn"},{name:"Vampire",slug:"vampire"},{name:"Veteran",slug:"veteran"},{name:"Violet Fungus",slug:"violet-fungus"},{name:"Vrock",slug:"vrock"},{name:"Vulture",slug:"vulture"},{name:"Warhorse Skeleton",slug:"warhorse-skeleton"},{name:"Warhorse",slug:"warhorse"},{name:"Water Elemental",slug:"water-elemental"},{name:"Weasel",slug:"weasel"},{name:"Werebear",slug:"werebear"},{name:"Wereboar",slug:"wereboar"},{name:"Wererat",slug:"wererat"},{name:"Weretiger",slug:"weretiger"},{name:"Werewolf",slug:"werewolf"},{name:"White Dragon Wyrmling",slug:"white-dragon-wyrmling"},{name:"Wight",slug:"wight"},{name:"Will-o'-Wisp",slug:"will-o-wisp"},{name:"Winter Wolf",slug:"winter-wolf"},{name:"Wolf",slug:"wolf"},{name:"Worg",slug:"worg"},{name:"Wraith",slug:"wraith"},{name:"Wyvern",slug:"wyvern"},{name:"Xorn",slug:"xorn"},{name:"Young Black Dragon",slug:"young-black-dragon"},{name:"Young Blue Dragon",slug:"young-blue-dragon"},{name:"Young Brass Dragon",slug:"young-brass-dragon"},{name:"Young Bronze Dragon",slug:"young-bronze-dragon"},{name:"Young Copper Dragon",slug:"young-copper-dragon"},{name:"Young Gold Dragon",slug:"young-gold-dragon"},{name:"Young Green Dragon",slug:"young-green-dragon"},{name:"Young Red Dragon",slug:"young-red-dragon"},{name:"Young Silver Dragon",slug:"young-silver-dragon"},{name:"Young White Dragon",slug:"young-white-dragon"},{name:"Zombie",slug:"zombie"}];class Oe extends Ae{static get elementName(){return"import-srd-dialog"}static get templatePaths(){return super.templatePaths.set("import-srd-dialog","src/html/elements/autonomous/dialogs/import-srd-dialog.html")}constructor(){super(Oe.templatePaths),this.creatureSelect=this.shadowRoot.getElementById("creature-select"),this.importButton=this.shadowRoot.getElementById("import-button")}connectedCallback(){super.connectedCallback(),this.importButton.addEventListener("click",this.onClickImportButton.bind(this)),this.isInitialized=!0}async onClickImportButton(){const e=`examples/5e-srd/${this.creatureSelect.value}.json`,t=await n(e),s=JSON.parse(t);this.importCallback(s),this.closeModal()}launch(e){super.launch(e),0===this.creatureSelect.options.length&&this.creatureSelect.populate(He.map(e=>new Option(e.name,e.slug))),this.setStatus("Choose a creature:"),this.showModal()}}class je{constructor(){this.cachedCreatureLists=new Map}static getCreatureListUrl(e){return"https://api.open5e.com/monsters/?format=json&fields=name,slug&limit=1000&document__slug="+e}static getCreatureUrl(e){return"https://api.open5e.com/monsters/"+e}async loadCreatureList(e){if(this.cachedCreatureLists.has(e))return this.cachedCreatureLists.get(e);const t=je.getCreatureListUrl(e),s=(await fetch(t).then(e=>e.json())).results;return this.cachedCreatureLists.set(e,s),s}async loadCreature(e){const t=je.getCreatureUrl(e);return await fetch(t).then(e=>e.json())}}class $e extends Ae{static get elementName(){return"import-open5e-dialog"}static get templatePaths(){return super.templatePaths.set("import-open5e-dialog","src/html/elements/autonomous/dialogs/import-open5e-dialog.html")}constructor(){super($e.templatePaths),this.client=new je,this.srdRadioButton=this.shadowRoot.getElementById("srd-radio"),this.tobRadioButton=this.shadowRoot.getElementById("tob-radio"),this.ccRadioButton=this.shadowRoot.getElementById("cc-radio"),this.creatureSelect=this.shadowRoot.getElementById("creature-select"),this.importButton=this.shadowRoot.getElementById("import-button")}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.srdRadioButton.addEventListener("change",this.onChangeSource.bind(this)),this.tobRadioButton.addEventListener("change",this.onChangeSource.bind(this)),this.ccRadioButton.addEventListener("change",this.onChangeSource.bind(this)),this.importButton.addEventListener("click",this.onClickImportButton.bind(this)),this.isInitialized=!0)}async onChangeSource(){const e=(t=this,s="source",t.shadowRoot.querySelector(`input[name="${s}"]:checked`)).value;var t,s;let i;this.setStatus("Retrieving creature list from Open5e..."),this.creatureSelect.disable(),this.creatureSelect.clear();try{i=await this.client.loadCreatureList(e)}catch(e){return void this.setStatus("Error: Unable to load creature list.","error")}this.creatureSelect.populate(i.map(e=>new Option(e.name,e.slug))),this.creatureSelect.enable(),this.setStatus("Choose a creature:")}async onClickImportButton(){const e=this.creatureSelect.value;let t;try{t=await this.client.loadCreature(e)}catch(e){this.setStatus("Error: Unable to load creature.","error")}this.importCallback(t),this.closeModal()}launch(e){super.launch(e),this.showModal()}}class Ve extends Le{static get elementName(){return"reset-dialog"}static get templatePaths(){return super.templatePaths.set("reset-dialog","src/html/elements/autonomous/dialogs/reset-dialog.html")}constructor(){super(Ve.templatePaths),this.resetButton=this.shadowRoot.getElementById("reset-button"),this.resetCallback=null}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.resetButton.addEventListener("click",this.onClickResetButton.bind(this)),this.isInitialized=!0)}onClickResetButton(){this.resetCallback(),this.closeModal()}launch(e){this.resetCallback=e,this.showModal()}}class _e extends Le{static get elementName(){return"export-dialog"}static get templatePaths(){return super.templatePaths.set("export-dialog","src/html/elements/autonomous/dialogs/export-dialog.html")}constructor(){super(_e.templatePaths),this.copyToClipboardButton=this.shadowRoot.getElementById("copy-to-clipboard-button"),this.downloadAsFileButton=this.shadowRoot.getElementById("download-as-file-button"),this.clipboard=null,this.exportContent=null,this.exportContentType=null,this.exportFileName=null}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.downloadAsFileButton.addEventListener("click",this.onClickDownloadAsFileButton.bind(this)),this.isInitialized=!0)}onClickDownloadAsFileButton(){!function(e,t,s){const i=new Blob([e],{type:t}),n=document.createElement("a");n.download=s,n.href=URL.createObjectURL(i),n.click()}(this.exportContent,this.exportContentType,this.exportFileName),this.setStatus("File download initiated.","success")}onClickCloseButton(){super.onClickCloseButton(),this.clipboard.destroy()}launch(e,t,s){this.exportContent=e,this.exportContentType=t,this.exportFileName=s,this.setStatus("Choose one of the following options:"),this.clipboard=new h(e,this.dialog,this.copyToClipboardButton),this.clipboard.setSuccessCallback(()=>{this.setStatus("Copied to clipboard.","success")}),this.clipboard.setErrorCallback(()=>{this.setStatus("Press Ctrl+C to copy to clipboard.","error")}),this.showModal()}}class Ge{constructor(e=null){this.reset(),e&&this.populateFromJsObject(e)}reset(e=!0){this.name="",this.isFinesse=!1,this._reach=5,this._normalRange=20,this._longRange=60,this.damageCategories={melee:new Je({isEnabled:e}),ranged:new Je,versatile:new Je,bonus:new Je}}populateFromJsObject(e){e.name&&(this.name=e.name),e.isFinesse&&(this.isFinesse=e.isFinesse),e.reach&&(this.reach=e.reach),e.normalRange&&(this.normalRange=e.normalRange),e.longRange&&(this.longRange=e.longRange);for(const t in this.damageCategories){const s=e.damageCategories[t]?e.damageCategories[t]:null;s&&this.damageCategories[t].populateFromJsObject(s)}}get damageCategoryKeys(){return Object.keys(this.damageCategories)}get damageCategoryEntries(){return Object.entries(this.damageCategories)}set reach(e){this._reach=e}get reach(){return this._reach?this._reach:0}set normalRange(e){this._normalRange=e}get normalRange(){return this._normalRange?this._normalRange:0}set longRange(e){this._longRange=e}get longRange(){return this._longRange?this._longRange:0}get generatedText(){const e=this.damageCategories.melee,t=this.damageCategories.ranged,s=this.damageCategories.versatile,i=this.damageCategories.bonus;if(e.isEnabled||t.isEnabled){const n=this.generatedTextParserAbilityModifier(e.isEnabled,t.isEnabled);return`*${this.generatedTextAttackType(e.isEnabled,t.isEnabled)}:* ${this.generatedTextToHit(n)}, ${this.generatedTextReachOrRange(e.isEnabled,t.isEnabled)}, one target. *Hit:* ${this.generatedTextDamage(e,t,s,i,n)}.`}return""}generatedTextParserAbilityModifier(e,t){return this.isFinesse?"FIN":e?"STR":t?"DEX":""}generatedTextAttackType(e,t){return e&&t?"Melee or Ranged Weapon Attack":e?"Melee Weapon Attack":t?"Ranged Weapon Attack":""}generatedTextToHit(e){return`ATK[${e}] to hit`}generatedTextReachOrRange(e,t){return e&&t?`reach ${this.reach} ft. or range ${this.normalRange}/${this.longRange} ft.`:e?`reach ${this.reach} ft.`:t?`range ${this.normalRange}/${this.longRange} ft.`:""}generatedTextDamage(e,t,s,i,n){const a=e.isEnabled&&t.isEnabled,o=e.hasSameValuesWith(t);return`${this.generatedTextMeleeRangedDamage(e,t,n)}${this.generatedTextVersatileDamage(s,n,a)}${this.generatedTextBonusDamage(i,s.isEnabled,a,o)}`}generatedTextMeleeRangedDamage(e,t,s){if(e.isEnabled&&t.isEnabled){const i=e.generateDamageText(s);if(e.hasSameValuesWith(t))return i;return`${i} in melee or ${t.generateDamageText(s)} at range`}return e.isEnabled?e.generateDamageText(s):t.isEnabled?t.generateDamageText(s):""}generatedTextVersatileDamage(e,t,s){if(e.isEnabled){return`, or ${e.generateDamageText(t)} if used with two hands${s?" to make a melee attack":""}`}return""}generatedTextBonusDamage(e,t,s,i){if(e.isEnabled){return`${t||s&&!i?",":""} plus ${e.generateDamageText()}`}return""}renderText(e){if(""===e)return"";const t=se(e,!1);return t.mathParserResults.error?"Error: Generated text has at least one invalid math expression.":t.markdownParserResults.error?"Error: Generated text has invalid markdown syntax.":t.text}}class Je{constructor(e=null){this.reset(),e&&this.populateFromJsObject(e)}reset(){this.isEnabled=!1,this.damageType="",this.damageDieQuantity=1,this.damageDieSize=8}populateFromJsObject(e){e.isEnabled&&(this.isEnabled=e.isEnabled),e.damageType&&(this.damageType=e.damageType),e.damageDieQuantity&&(this.damageDieQuantity=e.damageDieQuantity),e.damageDieSize&&(this.damageDieSize=e.damageDieSize)}set damageDieQuantity(e){this._damageDieQuantity=e}get damageDieQuantity(){return this._damageDieQuantity?this._damageDieQuantity:1}set damageDieSize(e){this._damageDieSize=e}get damageDieSize(){return this._damageDieSize?this._damageDieSize:0}generateDamageText(e){const t=this.damageType?" "+this.damageType:"";if(1===this.damageDieSize){return`${this.damageDieQuantity*this.damageDieSize}${t} damage`}return e?`DMG[${this.damageDieQuantity}d${this.damageDieSize} + ${e}]${t} damage`:`DMG[${this.damageDieQuantity}d${this.damageDieSize}]${t} damage`}hasSameValuesWith(e){return this.damageType===e.damageType&&this.damageDieQuantity===e.damageDieQuantity&&this.damageDieSize===e.damageDieSize}}var We={Club:{name:"Club",description:"Simple Melee, 1d4 bludgeoning, light",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:4}}},Dagger:{name:"Dagger",description:"Simple Melee, 1d4 piercing, finesse, light, thrown (range 20/60)",isFinesse:!0,reach:5,normalRange:20,longRange:60,damageCategories:{melee:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:4},ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:4}}},Greatclub:{name:"Greatclub",description:"Simple Melee, 1d8 bludgeoning, two-handed",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:8}}},Handaxe:{name:"Handaxe",description:"Simple Melee, 1d6 slashing, light, thrown (range 20/60)",reach:5,normalRange:20,longRange:60,damageCategories:{melee:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:6},ranged:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:6}}},Javelin:{name:"Javelin",description:"Simple Melee, 1d6 piercing, thrown (range 30/120)",reach:5,normalRange:30,longRange:120,damageCategories:{melee:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:6},ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:6}}},"Light Hammer":{name:"Light Hammer",description:"Simple Melee, 1d4 bludgeoning, light, thrown (range 20/60)",reach:5,normalRange:20,longRange:60,damageCategories:{melee:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:4},ranged:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:4}}},Mace:{name:"Mace",description:"Simple Melee, 1d6 bludgeoning",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:6}}},Quarterstaff:{name:"Quarterstaff",description:"Simple Melee, 1d6 bludgeoning, versatile (1d8)",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:6},versatile:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:8}}},Sickle:{name:"Sickle",description:"Simple Melee, 1d4 slashing, light",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:4}}},Spear:{name:"Spear",description:"Simple Melee, 1d6 piercing, thrown (range 20/60), versatile (1d8)",reach:5,normalRange:20,longRange:60,damageCategories:{melee:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:6},ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:6},versatile:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:8}}},"Light Crossbow":{name:"Light Crossbow",description:"Simple Ranged, 1d8 piercing, ammunition (range 80/320), loading, two-handed",normalRange:80,longRange:320,damageCategories:{ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:8}}},Dart:{name:"Dart",description:"Simple Ranged, 1d4 piercing, finesse, thrown (range 20/60)",isFinesse:!0,normalRange:20,longRange:60,damageCategories:{ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:4}}},Shortbow:{name:"Shortbow",description:"Simple Ranged, 1d6 piercing, ammunition (range 80/320), two-handed",normalRange:80,longRange:320,damageCategories:{ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:6}}},Sling:{name:"Sling",description:"Simple Ranged, 1d4 bludgeoning, ammunition (range 30/120)",normalRange:30,longRange:120,damageCategories:{ranged:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:4}}},Battleaxe:{name:"Battleaxe",description:"Martial Melee, 1d8 slashing, versatile (1d10)",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:8},versatile:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:10}}},Flail:{name:"Flail",description:"Martial Melee, 1d8 bludgeoning",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:8}}},Glaive:{name:"Glaive",description:"Martial Melee, 1d10 slashing, heavy, reach, two-handed",reach:10,damageCategories:{melee:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:10}}},Greataxe:{name:"Greataxe",description:"Martial Melee, 1d12 slashing, heavy, two-handed",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:12}}},Greatsword:{name:"Greatsword",description:"Martial Melee, 2d6 slashing, heavy, two-handed",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"slashing",damageDieQuantity:2,damageDieSize:6}}},Halberd:{name:"Halberd",description:"Martial Melee, 1d10 slashing, heavy, reach, two-handed",reach:10,damageCategories:{melee:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:10}}},Lance:{name:"Lance",description:"Martial Melee, 1d12 piercing, reach, special",reach:10,damageCategories:{melee:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:12}}},Longsword:{name:"Longsword",description:"Martial Melee, 1d8 slashing, versatile (1d10)",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:8},versatile:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:10}}},Maul:{name:"Maul",description:"Martial Melee, 2d6 bludgeoning, heavy, two-handed",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:2,damageDieSize:6}}},Morningstar:{name:"Morningstar",description:"Martial Melee, 1d8 piercing",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:8}}},Pike:{name:"Pike",description:"Martial Melee, 1d10 piercing, heavy, reach, two-handed",reach:10,damageCategories:{melee:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:10}}},Rapier:{name:"Rapier",description:"Martial Melee, 1d8 piercing, finesse",isFinesse:!0,reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:8}}},Scimitar:{name:"Scimitar",description:"Martial Melee, 1d6 slashing, finesse, light",isFinesse:!0,reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:6}}},Shortsword:{name:"Shortsword",description:"Martial Melee, 1d6 piercing, finesse, light",isFinesse:!0,reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:6}}},Trident:{name:"Trident",description:"Martial Melee, 1d6 piercing, thrown (range 20/60), versatile (1d8)",reach:5,normalRange:20,longRange:60,damageCategories:{melee:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:6},ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:6},versatile:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:8}}},"War Pick":{name:"War Pick",description:"Martial Melee, 1d8 piercing",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:8}}},Warhammer:{name:"Warhammer",description:"Martial Melee, 1d8 bludgeoning, versatile (1d10)",reach:5,damageCategories:{melee:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:8},versatile:{isEnabled:!0,damageType:"bludgeoning",damageDieQuantity:1,damageDieSize:10}}},Whip:{name:"Whip",description:"Martial Melee, 1d4 slashing, finesse, reach",isFinesse:!0,reach:10,damageCategories:{melee:{isEnabled:!0,damageType:"slashing",damageDieQuantity:1,damageDieSize:4}}},Blowgun:{name:"Blowgun",description:"Martial Ranged, 1 piercing, ammunition (range 25/100), loading",normalRange:25,longRange:100,damageCategories:{ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:1}}},"Hand Crossbow":{name:"Hand Crossbow",description:"Martial Ranged, 1d6 piercing, ammunition (range 30/120), light, loading",normalRange:30,longRange:120,damageCategories:{ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:6}}},"Heavy Crossbow":{name:"Heavy Crossbow",description:"Martial Ranged, 1d10 piercing, ammunition (range 100/400), heavy, loading, two-handed",normalRange:100,longRange:400,damageCategories:{ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:10}}},Longbow:{name:"Longbow",description:"Martial Ranged, 1d8 piercing, ammunition (range 150/600), heavy, two-handed",normalRange:150,longRange:600,damageCategories:{ranged:{isEnabled:!0,damageType:"piercing",damageDieQuantity:1,damageDieSize:8}}}},Qe=["acid","bludgeoning","cold","fire","force","lightning","necrotic","piercing","poison","psychic","radiant","slashing","thunder"];class qe extends ze{static get elementName(){return"generate-attack-dialog"}static get templatePaths(){return super.templatePaths.set("generate-attack-dialog","src/html/elements/autonomous/dialogs/generate-attack-dialog.html")}constructor(e=null){super(qe.templatePaths,e),this.attackModel=new Ge,this.errorMessages=this.shadowRoot.getElementById("error-messages"),this.weaponNameInput=this.shadowRoot.getElementById("weapon-name-input"),this.finesseInput=this.shadowRoot.getElementById("finesse-input"),this.predefinedWeaponsDataList=this.shadowRoot.getElementById("predefined-weapons"),this.damageTypesDataList=this.shadowRoot.getElementById("damage-types"),this.damageCategoryInputs={};for(const e of this.attackModel.damageCategoryKeys)this.damageCategoryInputs[e]={enabled:this.shadowRoot.getElementById(e+"-enabled-input"),damageType:this.shadowRoot.getElementById(e+"-damage-type-input"),damageDieQuantity:this.shadowRoot.getElementById(e+"-damage-die-quantity-input"),damageDieSize:this.shadowRoot.getElementById(e+"-damage-die-size-input")};this.reachInput=this.shadowRoot.getElementById("reach-input"),this.normalRangeInput=this.shadowRoot.getElementById("normal-range-input"),this.longRangeInput=this.shadowRoot.getElementById("long-range-input"),this.generatedTextElement=this.shadowRoot.getElementById("generated-text"),this.renderedTextElement=this.shadowRoot.getElementById("rendered-text"),this.cancelButton=this.shadowRoot.getElementById("cancel-button"),this.resetButton=this.shadowRoot.getElementById("reset-button"),this.generateAttackButton=this.shadowRoot.getElementById("generate-attack-button")}connectedCallback(){if(this.isConnected&&!this.isInitialized){super.connectedCallback();for(const e of this.attackModel.damageCategoryKeys){const t=this.damageCategoryInputs[e],s=[t.damageType,t.damageDieQuantity,t.damageDieSize];"melee"===e?s.push(this.reachInput):"ranged"===e&&(s.push(this.normalRangeInput),s.push(this.longRangeInput)),t.enabled.enableElementsWhenChecked(...s),t.enabled.addEventListener("input",this.onInputDamageCategoryEnabled.bind(this,e)),t.damageType.addEventListener("input",this.onInputDamageCategoryDamageType.bind(this,e)),t.damageDieQuantity.addEventListener("input",this.onInputDamageCategoryDamageDieQuantity.bind(this,e)),t.damageDieSize.addEventListener("input",this.onInputDamageCategoryDamageDieSize.bind(this,e))}this.weaponNameInput.addEventListener("input",this.onInputWeaponName.bind(this)),this.finesseInput.addEventListener("input",this.onInputFinesse.bind(this)),this.reachInput.addEventListener("input",this.onInputReach.bind(this)),this.normalRangeInput.addEventListener("input",this.onInputNormalRange.bind(this)),this.longRangeInput.addEventListener("input",this.onInputLongRange.bind(this)),this.cancelButton.addEventListener("click",this.onClickCloseButton.bind(this)),this.resetButton.addEventListener("click",this.onClickResetButton.bind(this)),this.generateAttackButton.addEventListener("click",this.onClickGenerateAttackButton.bind(this)),ce(this.predefinedWeaponsDataList,Object.values(We),"description","name"),ue(this.damageTypesDataList,Qe),this.isInitialized=!0,this.update()}}onInputWeaponName(){const e=this.weaponNameInput.value,t=We[e];t?(this.reset(!1),this.attackModel.populateFromJsObject(t),this.populateFieldsFromModel(this.attackModel)):this.attackModel.name=e,this.update()}onInputFinesse(){this.attackModel.isFinesse=this.finesseInput.checked,this.update()}onInputDamageCategoryEnabled(e){this.attackModel.damageCategories[e].isEnabled=this.damageCategoryInputs[e].enabled.checked,this.update()}onInputDamageCategoryDamageType(e){this.attackModel.damageCategories[e].damageType=this.damageCategoryInputs[e].damageType.value,this.update()}onInputDamageCategoryDamageDieQuantity(e){this.attackModel.damageCategories[e].damageDieQuantity=this.damageCategoryInputs[e].damageDieQuantity.valueAsInt,this.update()}onInputDamageCategoryDamageDieSize(e){this.attackModel.damageCategories[e].damageDieSize=this.damageCategoryInputs[e].damageDieSize.valueAsInt,this.update()}onInputReach(){this.attackModel.reach=this.reachInput.valueAsInt,this.update()}onInputNormalRange(){this.attackModel.normalRange=this.normalRangeInput.valueAsInt,this.update()}onInputLongRange(){this.attackModel.longRange=this.longRangeInput.valueAsInt,this.update()}onClickResetButton(){this.reset()}onClickGenerateAttackButton(){this.generateAttack()}get generatedText(){return this.generatedTextElement.textContent}get renderedText(){return this.renderedTextElement.innerHTMLSanitized}launch(){this.showModal(),this.update(),re(this.weaponNameInput)}reset(e=!0){this.attackModel.reset(e),this.populateFieldsFromModel(this.attackModel),this.update(),re(this.weaponNameInput)}checkForErrors(){this.weaponNameInput.validate(this.errorMessages);const e=this.damageCategoryInputs.melee.enabled,t=this.damageCategoryInputs.ranged.enabled;e.checked||t.checked||this.errorMessages.add(e,'At least one of "Melee" or "Ranged" must be enabled.')}generateAttack(){if(this.errorMessages.clear(),this.checkForErrors(),this.errorMessages.any)return void this.errorMessages.focusOnFirstErrorField();const e=new CustomEvent("generateAttack",{bubbles:!0,composed:!0,detail:{name:this.attackModel.name,text:this.attackModel.generatedText}});this.dispatchEvent(e),this.closeModal(),this.reset()}populateFieldsFromModel(e){this.weaponNameInput.value=e.name,this.finesseInput.checked=e.isFinesse;for(const t of e.damageCategoryKeys){const s=e.damageCategories[t],i=this.damageCategoryInputs[t];i.enabled.checked=s.isEnabled,i.enabled.dispatchEvent(new Event("input")),i.damageType.value=s.damageType,i.damageDieQuantity.value=s.damageDieQuantity,i.damageDieSize.value=s.damageDieSize}this.reachInput.value=e.reach,this.normalRangeInput.value=e.normalRange,this.longRangeInput.value=e.longRange}update(){const e=this.attackModel.generatedText;this.generatedTextElement.textContent=e,this.renderedTextElement.innerHTMLSanitized=this.attackModel.renderText(e)}}var Ue={innate:{ability:"charisma",hasCantrips:!0},generic:{ability:"charisma",hasCantrips:!0},bard:{ability:"charisma",hasCantrips:!0,spellCountMethod:"fixed",levels:{1:{knownCantripCount:2,fixedSpellCount:4,spellSlots:[2]},2:{knownCantripCount:2,fixedSpellCount:5,spellSlots:[3]},3:{knownCantripCount:2,fixedSpellCount:6,spellSlots:[4,2]},4:{knownCantripCount:3,fixedSpellCount:7,spellSlots:[4,3]},5:{knownCantripCount:3,fixedSpellCount:8,spellSlots:[4,3,2]},6:{knownCantripCount:3,fixedSpellCount:9,spellSlots:[4,3,3]},7:{knownCantripCount:3,fixedSpellCount:10,spellSlots:[4,3,3,1]},8:{knownCantripCount:3,fixedSpellCount:11,spellSlots:[4,3,3,2]},9:{knownCantripCount:3,fixedSpellCount:12,spellSlots:[4,3,3,3,1]},10:{knownCantripCount:4,fixedSpellCount:14,spellSlots:[4,3,3,3,2]},11:{knownCantripCount:4,fixedSpellCount:15,spellSlots:[4,3,3,3,2,1]},12:{knownCantripCount:4,fixedSpellCount:15,spellSlots:[4,3,3,3,2,1]},13:{knownCantripCount:4,fixedSpellCount:16,spellSlots:[4,3,3,3,2,1,1]},14:{knownCantripCount:4,fixedSpellCount:18,spellSlots:[4,3,3,3,2,1,1]},15:{knownCantripCount:4,fixedSpellCount:19,spellSlots:[4,3,3,3,2,1,1,1]},16:{knownCantripCount:4,fixedSpellCount:19,spellSlots:[4,3,3,3,2,1,1,1]},17:{knownCantripCount:4,fixedSpellCount:20,spellSlots:[4,3,3,3,2,1,1,1,1]},18:{knownCantripCount:4,fixedSpellCount:22,spellSlots:[4,3,3,3,3,1,1,1,1]},19:{knownCantripCount:4,fixedSpellCount:22,spellSlots:[4,3,3,3,3,2,1,1,1]},20:{knownCantripCount:4,fixedSpellCount:22,spellSlots:[4,3,3,3,3,2,2,1,1]}}},cleric:{ability:"wisdom",hasCantrips:!0,spellCountMethod:"abilityModPlusLevel",levels:{1:{knownCantripCount:3,spellSlots:[2]},2:{knownCantripCount:3,spellSlots:[3]},3:{knownCantripCount:3,spellSlots:[4,2]},4:{knownCantripCount:4,spellSlots:[4,3]},5:{knownCantripCount:4,spellSlots:[4,3,2]},6:{knownCantripCount:4,spellSlots:[4,3,3]},7:{knownCantripCount:4,spellSlots:[4,3,3,1]},8:{knownCantripCount:4,spellSlots:[4,3,3,2]},9:{knownCantripCount:4,spellSlots:[4,3,3,3,1]},10:{knownCantripCount:5,spellSlots:[4,3,3,3,2]},11:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1]},12:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1]},13:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1,1]},14:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1,1]},15:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1,1,1]},16:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1,1,1]},17:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1,1,1,1]},18:{knownCantripCount:5,spellSlots:[4,3,3,3,3,1,1,1,1]},19:{knownCantripCount:5,spellSlots:[4,3,3,3,3,2,1,1,1]},20:{knownCantripCount:5,spellSlots:[4,3,3,3,3,2,2,1,1]}}},druid:{ability:"wisdom",hasCantrips:!0,spellCountMethod:"abilityModPlusLevel",levels:{1:{knownCantripCount:2,spellSlots:[2]},2:{knownCantripCount:2,spellSlots:[3]},3:{knownCantripCount:2,spellSlots:[4,2]},4:{knownCantripCount:3,spellSlots:[4,3]},5:{knownCantripCount:3,spellSlots:[4,3,2]},6:{knownCantripCount:3,spellSlots:[4,3,3]},7:{knownCantripCount:3,spellSlots:[4,3,3,1]},8:{knownCantripCount:3,spellSlots:[4,3,3,2]},9:{knownCantripCount:3,spellSlots:[4,3,3,3,1]},10:{knownCantripCount:4,spellSlots:[4,3,3,3,2]},11:{knownCantripCount:4,spellSlots:[4,3,3,3,2,1]},12:{knownCantripCount:4,spellSlots:[4,3,3,3,2,1]},13:{knownCantripCount:4,spellSlots:[4,3,3,3,2,1,1]},14:{knownCantripCount:4,spellSlots:[4,3,3,3,2,1,1]},15:{knownCantripCount:4,spellSlots:[4,3,3,3,2,1,1,1]},16:{knownCantripCount:4,spellSlots:[4,3,3,3,2,1,1,1]},17:{knownCantripCount:4,spellSlots:[4,3,3,3,2,1,1,1,1]},18:{knownCantripCount:4,spellSlots:[4,3,3,3,3,1,1,1,1]},19:{knownCantripCount:4,spellSlots:[4,3,3,3,3,2,1,1,1]},20:{knownCantripCount:4,spellSlots:[4,3,3,3,3,2,2,1,1]}}},paladin:{ability:"charisma",hasCantrips:!1,spellCountMethod:"abilityModPlusHalfLevel",levels:{1:{spellSlots:[]},2:{spellSlots:[2]},3:{spellSlots:[3]},4:{spellSlots:[3]},5:{spellSlots:[4,2]},6:{spellSlots:[4,2]},7:{spellSlots:[4,3]},8:{spellSlots:[4,3]},9:{spellSlots:[4,3,2]},10:{spellSlots:[4,3,2]},11:{spellSlots:[4,3,3]},12:{spellSlots:[4,3,3]},13:{spellSlots:[4,3,3,1]},14:{spellSlots:[4,3,3,1]},15:{spellSlots:[4,3,3,2]},16:{spellSlots:[4,3,3,2]},17:{spellSlots:[4,3,3,3,1]},18:{spellSlots:[4,3,3,3,1]},19:{spellSlots:[4,3,3,3,2]},20:{spellSlots:[4,3,3,3,2]}}},ranger:{ability:"wisdom",hasCantrips:!1,spellCountMethod:"fixed",levels:{1:{fixedSpellCount:0,spellSlots:[]},2:{fixedSpellCount:2,spellSlots:[2]},3:{fixedSpellCount:3,spellSlots:[3]},4:{fixedSpellCount:3,spellSlots:[3]},5:{fixedSpellCount:4,spellSlots:[4,2]},6:{fixedSpellCount:4,spellSlots:[4,2]},7:{fixedSpellCount:5,spellSlots:[4,3]},8:{fixedSpellCount:5,spellSlots:[4,3]},9:{fixedSpellCount:6,spellSlots:[4,3,2]},10:{fixedSpellCount:6,spellSlots:[4,3,2]},11:{fixedSpellCount:7,spellSlots:[4,3,3]},12:{fixedSpellCount:7,spellSlots:[4,3,3]},13:{fixedSpellCount:8,spellSlots:[4,3,3,1]},14:{fixedSpellCount:8,spellSlots:[4,3,3,1]},15:{fixedSpellCount:9,spellSlots:[4,3,3,2]},16:{fixedSpellCount:9,spellSlots:[4,3,3,2]},17:{fixedSpellCount:10,spellSlots:[4,3,3,3,1]},18:{fixedSpellCount:10,spellSlots:[4,3,3,3,1]},19:{fixedSpellCount:11,spellSlots:[4,3,3,3,2]},20:{fixedSpellCount:11,spellSlots:[4,3,3,3,2]}}},sorcerer:{ability:"charisma",hasCantrips:!0,spellCountMethod:"fixed",levels:{1:{knownCantripCount:4,fixedSpellCount:2,spellSlots:[2]},2:{knownCantripCount:4,fixedSpellCount:3,spellSlots:[3]},3:{knownCantripCount:4,fixedSpellCount:4,spellSlots:[4,2]},4:{knownCantripCount:5,fixedSpellCount:5,spellSlots:[4,3]},5:{knownCantripCount:5,fixedSpellCount:6,spellSlots:[4,3,2]},6:{knownCantripCount:5,fixedSpellCount:7,spellSlots:[4,3,3]},7:{knownCantripCount:5,fixedSpellCount:8,spellSlots:[4,3,3,1]},8:{knownCantripCount:5,fixedSpellCount:9,spellSlots:[4,3,3,2]},9:{knownCantripCount:5,fixedSpellCount:10,spellSlots:[4,3,3,3,1]},10:{knownCantripCount:6,fixedSpellCount:11,spellSlots:[4,3,3,3,2]},11:{knownCantripCount:6,fixedSpellCount:12,spellSlots:[4,3,3,3,2,1]},12:{knownCantripCount:6,fixedSpellCount:12,spellSlots:[4,3,3,3,2,1]},13:{knownCantripCount:6,fixedSpellCount:13,spellSlots:[4,3,3,3,2,1,1]},14:{knownCantripCount:6,fixedSpellCount:13,spellSlots:[4,3,3,3,2,1,1]},15:{knownCantripCount:6,fixedSpellCount:14,spellSlots:[4,3,3,3,2,1,1,1]},16:{knownCantripCount:6,fixedSpellCount:14,spellSlots:[4,3,3,3,2,1,1,1]},17:{knownCantripCount:6,fixedSpellCount:15,spellSlots:[4,3,3,3,2,1,1,1,1]},18:{knownCantripCount:6,fixedSpellCount:15,spellSlots:[4,3,3,3,3,1,1,1,1]},19:{knownCantripCount:6,fixedSpellCount:15,spellSlots:[4,3,3,3,3,2,1,1,1]},20:{knownCantripCount:6,fixedSpellCount:15,spellSlots:[4,3,3,3,3,2,2,1,1]}}},warlock:{ability:"charisma",hasCantrips:!0,spellCountMethod:"fixed",levels:{1:{knownCantripCount:2,fixedSpellCount:2,spellSlots:[1]},2:{knownCantripCount:2,fixedSpellCount:3,spellSlots:[2]},3:{knownCantripCount:2,fixedSpellCount:4,spellSlots:[0,2]},4:{knownCantripCount:3,fixedSpellCount:5,spellSlots:[0,2]},5:{knownCantripCount:3,fixedSpellCount:6,spellSlots:[0,0,2]},6:{knownCantripCount:3,fixedSpellCount:7,spellSlots:[0,0,2]},7:{knownCantripCount:3,fixedSpellCount:8,spellSlots:[0,0,0,2]},8:{knownCantripCount:3,fixedSpellCount:9,spellSlots:[0,0,0,2]},9:{knownCantripCount:3,fixedSpellCount:10,spellSlots:[0,0,0,0,2]},10:{knownCantripCount:4,fixedSpellCount:10,spellSlots:[0,0,0,0,2]},11:{knownCantripCount:4,fixedSpellCount:11,spellSlots:[0,0,0,0,3,0]},12:{knownCantripCount:4,fixedSpellCount:11,spellSlots:[0,0,0,0,3,0]},13:{knownCantripCount:4,fixedSpellCount:12,spellSlots:[0,0,0,0,3,0,0]},14:{knownCantripCount:4,fixedSpellCount:12,spellSlots:[0,0,0,0,3,0,0]},15:{knownCantripCount:4,fixedSpellCount:13,spellSlots:[0,0,0,0,3,0,0,0]},16:{knownCantripCount:4,fixedSpellCount:13,spellSlots:[0,0,0,0,3,0,0,0]},17:{knownCantripCount:4,fixedSpellCount:14,spellSlots:[0,0,0,0,4,0,0,0,0]},18:{knownCantripCount:4,fixedSpellCount:14,spellSlots:[0,0,0,0,4,0,0,0,0]},19:{knownCantripCount:4,fixedSpellCount:15,spellSlots:[0,0,0,0,4,0,0,0,0]},20:{knownCantripCount:4,fixedSpellCount:15,spellSlots:[0,0,0,0,4,0,0,0,0]}}},wizard:{ability:"intelligence",hasCantrips:!0,spellCountMethod:"abilityModPlusLevel",levels:{1:{knownCantripCount:3,spellSlots:[2]},2:{knownCantripCount:3,spellSlots:[3]},3:{knownCantripCount:3,spellSlots:[4,2]},4:{knownCantripCount:4,spellSlots:[4,3]},5:{knownCantripCount:4,spellSlots:[4,3,2]},6:{knownCantripCount:4,spellSlots:[4,3,3]},7:{knownCantripCount:4,spellSlots:[4,3,3,1]},8:{knownCantripCount:4,spellSlots:[4,3,3,2]},9:{knownCantripCount:4,spellSlots:[4,3,3,3,1]},10:{knownCantripCount:5,spellSlots:[4,3,3,3,2]},11:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1]},12:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1]},13:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1,1]},14:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1,1]},15:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1,1,1]},16:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1,1,1]},17:{knownCantripCount:5,spellSlots:[4,3,3,3,2,1,1,1,1]},18:{knownCantripCount:5,spellSlots:[4,3,3,3,3,1,1,1,1]},19:{knownCantripCount:5,spellSlots:[4,3,3,3,3,2,1,1,1]},20:{knownCantripCount:5,spellSlots:[4,3,3,3,3,2,2,1,1]}}}},Ke=[{name:"Acid Arrow",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"1 action",range:"90 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"powdered rhubarb leaf and an adder's stomach"},classes:["wizard"],description:""},{name:"Acid Splash",source:"srd",level:0,school:"conjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Aid",source:"srd",level:2,school:"abjuration",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a tiny strip of white cloth"},classes:["cleric","paladin"],description:""},{name:"Alarm",source:"srd",level:1,school:"abjuration",ritual:!0,castingTime:"1 minute",range:"30 feet",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a tiny bell and a piece of fine silver wire"},classes:["ranger","wizard"],description:""},{name:"Alter Self",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Animal Friendship",source:"srd",level:1,school:"enchantment",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a morsel of food"},classes:["bard","druid","ranger"],description:""},{name:"Animal Messenger",source:"srd",level:2,school:"enchantment",ritual:!0,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a morsel of food"},classes:["bard","druid","ranger"],description:""},{name:"Animal Shapes",source:"srd",level:8,school:"transmutation",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 24 hours",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid"],description:""},{name:"Animate Dead",source:"srd",level:3,school:"necromancy",ritual:!1,castingTime:"1 minute",range:"10 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a drop of blood, a piece of flesh, and a pinch of bone dust"},classes:["cleric","wizard"],description:""},{name:"Animate Objects",source:"srd",level:5,school:"transmutation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","sorcerer","wizard"],description:""},{name:"Antilife Shell",source:"srd",level:5,school:"abjuration",ritual:!1,castingTime:"1 action",range:"self (10-foot radius)",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid"],description:""},{name:"Antimagic Field",source:"srd",level:8,school:"abjuration",ritual:!1,castingTime:"1 action",range:"self (10-foot-radius sphere)",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of powdered iron or iron filings"},classes:["cleric","wizard"],description:""},{name:"Antipathy/Sympathy",source:"srd",level:8,school:"enchantment",ritual:!1,castingTime:"1 hour",range:"60 feet",concentration:!1,duration:"10 days",components:{verbal:!0,somatic:!0,material:!0,items:"either a lump of alum soaked in vinegar for the antipathy effect or a drop of honey for the sympathy effect"},classes:["druid","wizard"],description:""},{name:"Arcane Eye",source:"srd",level:4,school:"divination",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of bat fur"},classes:["wizard"],description:""},{name:"Arcane Hand",source:"srd",level:5,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"an eggshell and a snakeskin glove"},classes:["wizard"],description:""},{name:"Arcane Lock",source:"srd",level:2,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"until dispelled",components:{verbal:!0,somatic:!0,material:!0,items:"gold dust worth at least 25 gp, which the spell consumes"},classes:["wizard"],description:""},{name:"Arcane Sword",source:"srd",level:7,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a miniature platinum sword with a grip and pommel of copper and zinc, worth 250 gp"},classes:["bard","wizard"],description:""},{name:"Arcanist's Magic Aura",source:"srd",level:2,school:"illusion",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a small square of silk"},classes:["wizard"],description:""},{name:"Astral Projection",source:"srd",level:9,school:"necromancy",ritual:!1,castingTime:"1 hour",range:"10 feet",concentration:!1,duration:"special",components:{verbal:!0,somatic:!0,material:!0,items:"for each creature you affect with this spell, you must provide one jacinth worth at least 1,000 gp and one ornately carved bar of silver worth at least 100 gp, all of which the spell consumes"},classes:["cleric","warlock","wizard"],description:""},{name:"Augury",source:"srd",level:2,school:"divination",ritual:!0,castingTime:"1 minute",range:"self",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"specially marked sticks, bones, or similar tokens worth at least 25 gp"},classes:["cleric"],description:""},{name:"Awaken",source:"srd",level:5,school:"transmutation",ritual:!1,castingTime:"8 hours",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"an agate worth at least 1,000 gp, which the spell consumes"},classes:["bard","druid"],description:""},{name:"Bane",source:"srd",level:1,school:"enchantment",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a drop of blood"},classes:["bard","cleric"],description:""},{name:"Banishment",source:"srd",level:4,school:"abjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"an item distasteful to the target"},classes:["cleric","paladin","sorcerer","wizard"],description:""},{name:"Barkskin",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a handful of oak bark"},classes:["druid","ranger"],description:""},{name:"Beacon of Hope",source:"srd",level:3,school:"abjuration",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Bestow Curse",source:"srd",level:3,school:"necromancy",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","cleric","wizard"],description:""},{name:"Black Tentacles",source:"srd",level:4,school:"conjuration",ritual:!1,castingTime:"1 action",range:"90 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a piece of tentacle from a giant octopus or a giant squid"},classes:["wizard"],description:""},{name:"Blade Barrier",source:"srd",level:6,school:"evocation",ritual:!1,castingTime:"1 action",range:"90 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Bless",source:"srd",level:1,school:"enchantment",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a sprinkling of holy water"},classes:["cleric","paladin"],description:""},{name:"Blight",source:"srd",level:4,school:"necromancy",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid","sorcerer","warlock","wizard"],description:""},{name:"Blindness/Deafness",source:"srd",level:2,school:"necromancy",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard","cleric","sorcerer","wizard"],description:""},{name:"Blink",source:"srd",level:3,school:"transmutation",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Blur",source:"srd",level:2,school:"illusion",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Branding Smite",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"1 bonus action",range:"self",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["paladin"],description:""},{name:"Burning Hands",source:"srd",level:1,school:"evocation",ritual:!1,castingTime:"1 action",range:"self (15-foot cone)",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Call Lightning",source:"srd",level:3,school:"conjuration",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid"],description:""},{name:"Calm Emotions",source:"srd",level:2,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","cleric"],description:""},{name:"Chain Lightning",source:"srd",level:6,school:"evocation",ritual:!1,castingTime:"1 action",range:"150 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of fur; a piece of amber, glass, or a crystal ord; and three silver pins"},classes:["sorcerer","wizard"],description:""},{name:"Charm Person",source:"srd",level:1,school:"enchantment",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","druid","sorcerer","warlock","wizard"],description:""},{name:"Chill Touch",source:"srd",level:0,school:"necromancy",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"1 round",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","warlock","wizard"],description:""},{name:"Circle of Death",source:"srd",level:6,school:"necromancy",ritual:!1,castingTime:"1 action",range:"150 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"the powder of a crushed black pearl worth at least 500 gp"},classes:["sorcerer","warlock","wizard"],description:""},{name:"Clairvoyance",source:"srd",level:3,school:"divination",ritual:!1,castingTime:"10 minutes",range:"1 mile",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a focus worth at least 100 gp, either a jeweled horn for hearing or a glass eye for seeing"},classes:["bard","cleric","sorcerer","wizard"],description:""},{name:"Clone",source:"srd",level:8,school:"necromancy",ritual:!1,castingTime:"1 hour",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a diamond worth at least 1,000 gp and at least 1 cubic inch of flesh of the creature that is to be cloned, which the spell consumes, and a vessel worth at least 2,000 gp that has a sealable lid and is large enough to hold a Medium creature, such as a huge urn, coffin, mud-filled cyst in the ground, or crystal container filled with salt water"},classes:["wizard"],description:""},{name:"Cloudkill",source:"srd",level:5,school:"conjuration",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"up to 10 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Color Spray",source:"srd",level:1,school:"illusion",ritual:!1,castingTime:"1 action",range:"self (15-foot cone)",concentration:!1,duration:"1 round",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of powder or sand that is colored red, yellow, and blue"},classes:["sorcerer","wizard"],description:""},{name:"Command",source:"srd",level:1,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"1 round",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["cleric","paladin"],description:""},{name:"Commune",source:"srd",level:5,school:"divination",ritual:!0,castingTime:"1 minute",range:"self",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"incense and a vial of holy or unholy water"},classes:["cleric"],description:""},{name:"Commune with Nature",source:"srd",level:5,school:"divination",ritual:!0,castingTime:"1 minute",range:"self",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid","ranger"],description:""},{name:"Comprehend Languages",source:"srd",level:1,school:"divination",ritual:!0,castingTime:"1 action",range:"self",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of soot and salt"},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Compulsion",source:"srd",level:4,school:"enchantment",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard"],description:""},{name:"Cone of Cold",source:"srd",level:5,school:"evocation",ritual:!1,castingTime:"1 action",range:"self (60-foot cone)",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a small crystal or glass cone"},classes:["sorcerer","wizard"],description:""},{name:"Confusion",source:"srd",level:4,school:"enchantment",ritual:!1,castingTime:"1 action",range:"90 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"three nut shells"},classes:["bard","druid","sorcerer","wizard"],description:""},{name:"Conjure Animals",source:"srd",level:3,school:"conjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid","ranger"],description:""},{name:"Conjure Celestial",source:"srd",level:7,school:"conjuration",ritual:!1,castingTime:"1 minute",range:"90 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Conjure Elemental",source:"srd",level:5,school:"conjuration",ritual:!1,castingTime:"1 minute",range:"90 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"burning incense for air, soft clay for earth, sulfur and phosphorus for fire, or water and sand for water"},classes:["druid","wizard"],description:""},{name:"Conjure Fey",source:"srd",level:6,school:"conjuration",ritual:!1,castingTime:"1 minute",range:"90 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid","warlock"],description:""},{name:"Conjure Minor Elementals",source:"srd",level:4,school:"conjuration",ritual:!1,castingTime:"1 minute",range:"90 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid","wizard"],description:""},{name:"Conjure Woodland Beings",source:"srd",level:4,school:"conjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"one holly berry per creature summoned"},classes:["druid","ranger"],description:""},{name:"Contact Other Plane",source:"srd",level:5,school:"divination",ritual:!0,castingTime:"1 minute",range:"self",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["warlock","wizard"],description:""},{name:"Contagion",source:"srd",level:5,school:"necromancy",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"7 days",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","druid"],description:""},{name:"Contingency",source:"srd",level:6,school:"evocation",ritual:!1,castingTime:"10 minutes",range:"self",concentration:!1,duration:"10 days",components:{verbal:!0,somatic:!0,material:!0,items:"a statuette of yourself carved from ivory and decorated with gems worth at least 1,500 gp"},classes:["wizard"],description:""},{name:"Continual Flame",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"until dispelled",components:{verbal:!0,somatic:!0,material:!0,items:"ruby dust worth 50 gp, which the spell consumes"},classes:["cleric","wizard"],description:""},{name:"Control Water",source:"srd",level:4,school:"transmutation",ritual:!1,castingTime:"1 action",range:"300 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a drop of water and a pinch of dust"},classes:["cleric","druid","wizard"],description:""},{name:"Control Weather",source:"srd",level:8,school:"transmutation",ritual:!1,castingTime:"10 minutes",range:"self (5-mile radius)",concentration:!0,duration:"up to 8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"burning incense and bits of earth and wood mixed in water"},classes:["cleric","druid","wizard"],description:""},{name:"Counterspell",source:"srd",level:3,school:"abjuration",ritual:!1,castingTime:"1 reaction, which you can take when you see a creature within 60 feet of you casting a spell",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!1,somatic:!0,material:!1,items:""},classes:["sorcerer","warlock","wizard"],description:""},{name:"Create Food and Water",source:"srd",level:3,school:"conjuration",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","paladin"],description:""},{name:"Create or Destroy Water",source:"srd",level:1,school:"transmutation",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a drop of water if creating water or a few grains of sand if destroying it"},classes:["cleric","druid"],description:""},{name:"Create Undead",source:"srd",level:6,school:"necromancy",ritual:!1,castingTime:"1 minute",range:"10 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"one clay pot filled with grave dirt, one clay pot filled with brackish water, and one 150 gp black onyx stone for each corpse"},classes:["cleric","warlock","wizard"],description:""},{name:"Creation",source:"srd",level:5,school:"illusion",ritual:!1,castingTime:"1 minute",range:"30 feet",concentration:!1,duration:"special",components:{verbal:!0,somatic:!0,material:!0,items:"a tiny piece of matter of the same type of the item you plan to create"},classes:["sorcerer","wizard"],description:""},{name:"Cure Wounds",source:"srd",level:1,school:"evocation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","cleric","druid","paladin","ranger"],description:""},{name:"Dancing Lights",source:"srd",level:0,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of phosphorus or wychwood, or a glowworm"},classes:["bard","sorcerer","wizard"],description:""},{name:"Darkness",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"bat fur and a drop of pitch or piece of coal"},classes:["sorcerer","warlock","wizard"],description:""},{name:"Darkvision",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"either a pinch of dried carrot or an agate"},classes:["druid","ranger","sorcerer","wizard"],description:""},{name:"Daylight",source:"srd",level:3,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","druid","paladin","ranger","sorcerer"],description:""},{name:"Death Ward",source:"srd",level:4,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","paladin"],description:""},{name:"Delayed Blast Fireball",source:"srd",level:7,school:"evocation",ritual:!1,castingTime:"1 action",range:"150 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a tiny ball of bat guano and sulfur"},classes:["sorcerer","wizard"],description:""},{name:"Demiplane",source:"srd",level:8,school:"conjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"1 hour",components:{verbal:!1,somatic:!0,material:!1,items:""},classes:["warlock","wizard"],description:""},{name:"Detect Evil and Good",source:"srd",level:1,school:"divination",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","paladin"],description:""},{name:"Detect Magic",source:"srd",level:1,school:"divination",ritual:!0,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","cleric","druid","paladin","ranger","sorcerer","wizard"],description:""},{name:"Detect Poison and Disease",source:"srd",level:1,school:"divination",ritual:!0,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a yew leaf"},classes:["cleric","druid","paladin","ranger"],description:""},{name:"Detect Thoughts",source:"srd",level:2,school:"divination",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a copper piece"},classes:["bard","sorcerer","wizard"],description:""},{name:"Dimension Door",source:"srd",level:4,school:"conjuration",ritual:!1,castingTime:"1 action",range:"500 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Disguise Self",source:"srd",level:1,school:"illusion",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","sorcerer","wizard"],description:""},{name:"Disintegrate",source:"srd",level:6,school:"transmutation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a lodestone and a pinch of dust"},classes:["sorcerer","wizard"],description:""},{name:"Dispel Evil and Good",source:"srd",level:5,school:"abjuration",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"holy water or powdered silver and iron"},classes:["cleric","paladin"],description:""},{name:"Dispel Magic",source:"srd",level:3,school:"abjuration",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","cleric","druid","paladin","sorcerer","warlock","wizard"],description:""},{name:"Divination",source:"srd",level:4,school:"divination",ritual:!0,castingTime:"1 action",range:"self",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"incense and a sacrificial offering appropriate to your religion, together worth at least 25 gp, which the spell consumes"},classes:["cleric"],description:""},{name:"Divine Favor",source:"srd",level:1,school:"evocation",ritual:!1,castingTime:"1 bonus action",range:"self",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["paladin"],description:""},{name:"Divine Word",source:"srd",level:7,school:"evocation",ritual:!1,castingTime:"1 bonus action",range:"30 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["cleric"],description:""},{name:"Dominate Beast",source:"srd",level:4,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid","sorcerer"],description:""},{name:"Dominate Monster",source:"srd",level:8,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Dominate Person",source:"srd",level:5,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","sorcerer","wizard"],description:""},{name:"Dream",source:"srd",level:5,school:"illusion",ritual:!1,castingTime:"1 minute",range:"special",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a handful of sand, a dab of ink, and a writing quill plucked from a sleeping bird"},classes:["bard","warlock","wizard"],description:""},{name:"Druidcraft",source:"srd",level:0,school:"transmutation",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid"],description:""},{name:"Earthquake",source:"srd",level:8,school:"evocation",ritual:!1,castingTime:"1 action",range:"500 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of dirt, a piece of rock, and a lump of clay"},classes:["cleric","druid","sorcerer"],description:""},{name:"Eldritch Blast",source:"srd",level:0,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["warlock"],description:""},{name:"Enhance Ability",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"fur or a feather from a beast"},classes:["bard","cleric","druid","sorcerer"],description:""},{name:"Enlarge/Reduce",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of powdered iron"},classes:["sorcerer","wizard"],description:""},{name:"Entangle",source:"srd",level:1,school:"conjuration",ritual:!1,castingTime:"1 action",range:"90 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid"],description:""},{name:"Enthrall",source:"srd",level:2,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","warlock"],description:""},{name:"Etherealness",source:"srd",level:7,school:"transmutation",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"up to 8 hours",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","cleric","sorcerer","warlock","wizard"],description:""},{name:"Expeditious Retreat",source:"srd",level:1,school:"transmuation",ritual:!1,castingTime:"1 bonus action",range:"self",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","warlock","wizard"],description:""},{name:"Eyebite",source:"srd",level:6,school:"necromancy",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Fabricate",source:"srd",level:4,school:"transmutation",ritual:!1,castingTime:"10 minutes",range:"120 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["wizard"],description:""},{name:"Faerie Fire",source:"srd",level:1,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard","druid"],description:""},{name:"Faithful Hound",source:"srd",level:4,school:"conjuration",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a tiny silver whistle, a piece of pone, and a thread"},classes:["wizard"],description:""},{name:"False Life",source:"srd",level:1,school:"necromancy",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a small amount of alcohol or distilled spirits"},classes:["sorcerer","wizard"],description:""},{name:"Fear",source:"srd",level:3,school:"illusion",ritual:!1,castingTime:"1 action",range:"self (30-foot cone)",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a white feather or the heart of a hen"},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Feather Fall",source:"srd",level:1,school:"transmutation",ritual:!1,castingTime:"1 reaction, which you take when you or a creature within 60 feet of you falls",range:"60 feet",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!1,material:!0,items:"a small feather or piece of down"},classes:["bard","sorcerer","wizard"],description:""},{name:"Feeblemind",source:"srd",level:8,school:"enchantment",ritual:!1,castingTime:"1 action",range:"150 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a handful of clay, crystal, glass, or mineral spheres"},classes:["bard","druid","warlock","wizard"],description:""},{name:"Find Familiar",source:"srd",level:1,school:"conjuration",ritual:!0,castingTime:"1 hour",range:"10 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"10 gp worth of charcoal, incense, and herbs that must be consumed by fire in a brass brazier"},classes:["wizard"],description:""},{name:"Find Steed",source:"srd",level:2,school:"conjuration",ritual:!1,castingTime:"10 minutes",range:"30 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["paladin"],description:""},{name:"Find the Path",source:"srd",level:6,school:"divination",ritual:!1,castingTime:"1 minute",range:"self",concentration:!0,duration:"up to 1 day",components:{verbal:!0,somatic:!0,material:!0,items:"a set of divinatory toolsâ€”such as bones, ivory sticks, cards, teeth, or carved runesâ€”worth 100 gp and an object from the location you wish to find"},classes:["bard","cleric","druid"],description:""},{name:"Find Traps",source:"srd",level:2,school:"divination",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","druid","ranger"],description:""},{name:"Finger of Death",source:"srd",level:7,school:"necromancy",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","warlock","wizard"],description:""},{name:"Fireball",source:"srd",level:3,school:"evocation",ritual:!1,castingTime:"1 action",range:"150 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a tiny ball of bat guano and sulfur"},classes:["sorcerer","wizard"],description:""},{name:"Fire Bolt",source:"srd",level:0,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Fire Shield",source:"srd",level:4,school:"evocation",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of phosphorus or a firefly"},classes:["wizard"],description:""},{name:"Fire Storm",source:"srd",level:7,school:"evocation",ritual:!1,castingTime:"1 action",range:"150 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","druid","sorcerer"],description:""},{name:"Flame Blade",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"1 bonus action",range:"self",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"leaf of sumac"},classes:["druid"],description:""},{name:"Flame Strike",source:"srd",level:5,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"pinch of sulfur"},classes:["cleric"],description:""},{name:"Flaming Sphere",source:"srd",level:2,school:"conjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of tallow, a pinch of brimstone, and a dusting of powdered iron"},classes:["druid","wizard"],description:""},{name:"Flesh to Stone",source:"srd",level:6,school:"transmutation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of lime, water, earth"},classes:["warlock","wizard"],description:""},{name:"Floating Disk",source:"srd",level:1,school:"conjuration",ritual:!0,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a drop of mercury"},classes:["wizard"],description:""},{name:"Fly",source:"srd",level:3,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a wing feather from any bird"},classes:["sorcerer","warlock","wizard"],description:""},{name:"Fog Cloud",source:"srd",level:1,school:"conjuration",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid","ranger","sorcerer","wizard"],description:""},{name:"Forbiddance",source:"srd",level:6,school:"abjuration",ritual:!0,castingTime:"10 minutes",range:"touch",concentration:!1,duration:"1 day",components:{verbal:!0,somatic:!0,material:!0,items:"a sprinkling of holy water, rare incense, and powdered ruby worth at least 1,000 gp"},classes:["cleric"],description:""},{name:"Forcecage",source:"srd",level:7,school:"evocation",ritual:!1,castingTime:"1 action",range:"100 feet",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"ruby dust worth 1,500 gp"},classes:["bard","warlock","wizard"],description:""},{name:"Foresight",source:"srd",level:9,school:"divination",ritual:!1,castingTime:"1 minute",range:"touch",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a hummingbird feather"},classes:["bard","druid","warlock","wizard"],description:""},{name:"Freedom of Movement",source:"srd",level:4,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a leather strap, bound around the arm or a similar appendage"},classes:["bard","cleric","druid","ranger"],description:""},{name:"Freezing Sphere",source:"srd",level:6,school:"evocation",ritual:!1,castingTime:"1 action",range:"300 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a small crystal sphere"},classes:["wizard"],description:""},{name:"Gaseous Form",source:"srd",level:3,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of gauze and a wisp of smoke"},classes:["sorcerer","warlock","wizard"],description:""},{name:"Gate",source:"srd",level:9,school:"conjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a diamond worth at least 5,000 gp"},classes:["cleric","sorcerer","wizard"],description:""},{name:"Geas",source:"srd",level:5,school:"enchantment",ritual:!1,castingTime:"1 minute",range:"60 feet",concentration:!1,duration:"30 days",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard","cleric","druid","paladin","wizard"],description:""},{name:"Gentle Repose",source:"srd",level:2,school:"necromancy",ritual:!0,castingTime:"1 action",range:"touch",concentration:!1,duration:"10 days",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of salt and one copper piece placed on each of the corpse's eyes, which must remain there for the duration"},classes:["cleric","wizard"],description:""},{name:"Giant Insect",source:"srd",level:4,school:"transmutation",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid"],description:""},{name:"Glibness",source:"srd",level:8,school:"transmutation",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard","warlock"],description:""},{name:"Globe of Invulnerability",source:"srd",level:6,school:"abjuration",ritual:!1,castingTime:"1 action",range:"self (10-foot radius",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a glass or crystal bead that shatters when the spell ends"},classes:["sorcerer","wizard"],description:""},{name:"Glyph of Warding",source:"srd",level:3,school:"abjuration",ritual:!1,castingTime:"1 hour",range:"touch",concentration:!1,duration:"until dispelled or triggered",components:{verbal:!0,somatic:!0,material:!0,items:"incense and powdered diamond worth at least 200 gp, which the spell consumes"},classes:["bard","cleric","wizard"],description:""},{name:"Goodberry",source:"srd",level:1,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a sprig of mistletoe"},classes:["druid","ranger"],description:""},{name:"Grease",source:"srd",level:1,school:"conjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of pork rind or butter"},classes:["wizard"],description:""},{name:"Greater Invisibility",source:"srd",level:4,school:"illusion",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","sorcerer","wizard"],description:""},{name:"Greater Restoration",source:"srd",level:5,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"diamond dust worth at least 100gp, which the spell consumes"},classes:["bard","cleric","druid"],description:""},{name:"Guardian of Faith",source:"srd",level:4,school:"conjuration",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["cleric"],description:""},{name:"Guards and Wards",source:"srd",level:6,school:"abjuration",ritual:!1,castingTime:"10 minutes",range:"touch",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!0,material:!0,items:"burning incense, a small measure of brimstone and oil, a knotted string, a small amount of umber hulk blood, and a small silver rod worth at least 10 gp"},classes:["bard","wizard"],description:""},{name:"Guidance",source:"srd",level:0,school:"divination",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","druid"],description:""},{name:"Guiding Bolt",source:"srd",level:1,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"1 round",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Gust of Wind",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"1 action",range:"self (60-foot line)",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a legume seed"},classes:["druid","sorcerer","wizard"],description:""},{name:"Hallow",source:"srd",level:5,school:"evocation",ritual:!1,castingTime:"24 hours",range:"touch",concentration:!1,duration:"until dispelled",components:{verbal:!0,somatic:!0,material:!0,items:"herbs, oils, and incense worth at least 1,000 gp, which the spell consumes"},classes:["cleric"],description:""},{name:"Hallucinatory Terrain",source:"srd",level:4,school:"illusion",ritual:!1,castingTime:"10 minutes",range:"300 feet",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a stone, a twig, and a bit of green plant"},classes:["bard","druid","warlock","wizard"],description:""},{name:"Harm",source:"srd",level:6,school:"necromancy",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Haste",source:"srd",level:3,school:"transmutation",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a shaving of licorice root"},classes:["sorcerer","wizard"],description:""},{name:"Heal",source:"srd",level:6,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","druid"],description:""},{name:"Healing Word",source:"srd",level:1,school:"evocation",ritual:!1,castingTime:"1 bonus action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard","cleric","druid"],description:""},{name:"Heat Metal",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a piece of iron and a flame"},classes:["bard","druid"],description:""},{name:"Hellish Rebuke",source:"srd",level:1,school:"evocation",ritual:!1,castingTime:"1 reaction, which you can take in response to being damaged by a creature within 60 feet of you that you can see",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["warlock"],description:""},{name:"Heroes' Feast",source:"srd",level:6,school:"conjuration",ritual:!1,castingTime:"10 minutes",range:"30 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a gem-encrusted bowl worth at least 1,000 gp, which the spell consumes"},classes:["cleric","druid"],description:""},{name:"Heroism",source:"srd",level:1,school:"enchantment",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","paladin"],description:""},{name:"Hideous Laughter",source:"srd",level:1,school:"enchantment",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"tiny tarts and a feather that is waved in the air"},classes:["bard","wizard"],description:""},{name:"Hold Monster",source:"srd",level:5,school:"enchantment",ritual:!1,castingTime:"1 action",range:"90 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a small, straight piece of iron"},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Hold Person",source:"srd",level:2,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a small, straight piece of iron"},classes:["bard","cleric","druid","sorcerer","warlock","wizard"],description:""},{name:"Holy Aura",source:"srd",level:8,school:"abjuration",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a tiny reliquary worth at least 1,000 gp containing a sacred relic, such as a scrap of cloth from a saint's robe or a piece of parchment from a religious text"},classes:["cleric"],description:""},{name:"Hunter's Mark",source:"srd",level:1,school:"divination",ritual:!1,castingTime:"1 bonus action",range:"90 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["ranger"],description:""},{name:"Hypnotic Pattern",source:"srd",level:3,school:"illusion",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!1,somatic:!0,material:!0,items:""},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Ice Storm",source:"srd",level:4,school:"evocation",ritual:!1,castingTime:"1 action",range:"300 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of dust and a few drops of water"},classes:["druid","sorcerer","wizard"],description:""},{name:"Identify",source:"srd",level:1,school:"divination",ritual:!1,castingTime:"1 minute",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a pearl worth at least 100 gp and an owl feather"},classes:["bard","wizard"],description:""},{name:"Illusory Script",source:"srd",level:1,school:"illusion",ritual:!0,castingTime:"1 minute",range:"touch",concentration:!1,duration:"10 days",components:{verbal:!1,somatic:!0,material:!0,items:""},classes:["bard","warlock","wizard"],description:""},{name:"Imprisonment",source:"srd",level:9,school:"abjuration",ritual:!1,castingTime:"1 minute",range:"30 feet",concentration:!1,duration:"until dispelled",components:{verbal:!0,somatic:!0,material:!0,items:"a vellum depiction or a carved statuette in the likeness of the target, and a special component that varies according to the version of the spell you choose, worth at least 500 gp per Hit Die of the target"},classes:["warlock","wizard"],description:""},{name:"Incendiary Cloud",source:"srd",level:8,school:"conjuration",ritual:!1,castingTime:"1 action",range:"150 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Inflict Wounds",source:"srd",level:1,school:"necromancy",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Insect Plague",source:"srd",level:5,school:"conjuration",ritual:!1,castingTime:"1 action",range:"300 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a few grains of sugar, some kernels of grain, and a smear of fat"},classes:["cleric","druid","sorcerer"],description:""},{name:"Instant Summons",source:"srd",level:6,school:"conjuration",ritual:!0,castingTime:"1 minute",range:"touch",concentration:!1,duration:"until dispelled",components:{verbal:!0,somatic:!0,material:!0,items:"a sapphire worth 1,000 gp"},classes:["wizard"],description:""},{name:"Invisibility",source:"srd",level:2,school:"illusion",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"an eyelash encased in gum arabic"},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Irresistible Dance",source:"srd",level:6,school:"enchantment",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard","wizard"],description:""},{name:"Jump",source:"srd",level:1,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a grasshopper's hind leg"},classes:["druid","ranger","sorcerer","wizard"],description:""},{name:"Knock",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard","sorcerer","wizard"],description:""},{name:"Legend Lore",source:"srd",level:5,school:"divination",ritual:!1,castingTime:"10 minutes",range:"self",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"incense worth at least 250 gp, which the spell consumes, and four ivory strips worth at least 50 gp each"},classes:["bard","cleric","wizard"],description:""},{name:"Lesser Restoration",source:"srd",level:2,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","cleric","druid","paladin","ranger"],description:""},{name:"Levitate",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"either a small leather loop or a piece of golden wire bent into a cup shape with a long shank on one end"},classes:["sorcerer","wizard"],description:""},{name:"Light",source:"srd",level:0,school:"evocation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!1,material:!0,items:""},classes:["bard","cleric","sorcerer","wizard"],description:""},{name:"Lightning Bolt",source:"srd",level:3,school:"evocation",ritual:!1,castingTime:"1 action",range:"self (100-foot line)",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of fur and a rod of amber, crystal, or glass"},classes:["sorcerer","wizard"],description:""},{name:"Locate Animals or Plants",source:"srd",level:2,school:"divination",ritual:!0,castingTime:"1 action",range:"self",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of fur from a bloodhound"},classes:["bard","druid","ranger"],description:""},{name:"Locate Creature",source:"srd",level:4,school:"divination",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of fur from a bloodhound"},classes:["bard","cleric","druid","paladin","ranger","wizard"],description:""},{name:"Locate Object",source:"srd",level:2,school:"divination",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a forked twig"},classes:["bard","cleric","druid","paladin","ranger","wizard"],description:""},{name:"Longstrider",source:"srd",level:1,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of dirt"},classes:["bard","druid","ranger","wizard"],description:""},{name:"Mage Armor",source:"srd",level:1,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a piece of cured leather"},classes:["sorcerer","wizard"],description:""},{name:"Mage Hand",source:"srd",level:0,school:"conjuration",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Magic Circle",source:"srd",level:3,school:"abjuration",ritual:!1,castingTime:"1 minute",range:"10 feet",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"holy water or powdered silver and iron worth at least 100 gp, which the spell consumes"},classes:["cleric","paladin","warlock","wizard"],description:""},{name:"Magic Jar",source:"srd",level:6,school:"necromancy",ritual:!1,castingTime:"1 minute",range:"self",concentration:!1,duration:"until dispelled",components:{verbal:!0,somatic:!0,material:!0,items:"a gem, crystal, reliquary, or some other ornamental container worth at least 500 gp"},classes:["wizard"],description:""},{name:"Magic Missile",source:"srd",level:1,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Magic Mouth",source:"srd",level:2,school:"illusion",ritual:!1,castingTime:"1 minute",range:"30 feet",concentration:!1,duration:"until dispelled",components:{verbal:!0,somatic:!0,material:!0,items:"a small bit of honeycomb and jade dust worth at least 10 gp, which the spell consumes"},classes:["bard","wizard"],description:""},{name:"Magic Weapon",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 bonus action",range:"touch",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["paladin","wizard"],description:""},{name:"Magnificent Mansion",source:"srd",level:7,school:"conjuration",ritual:!1,castingTime:"1 minute",range:"300 feet",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a minature portal carved from ivory, a small piece of polished marble, and a tiny silver spoon, each item worth at least 5 gp"},classes:["bard","wizard"],description:""},{name:"Major Image",source:"srd",level:3,school:"illusion",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of fleece"},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Mass Cure Wounds",source:"srd",level:5,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","cleric","druid"],description:""},{name:"Mass Heal",source:"srd",level:9,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Mass Healing Word",source:"srd",level:3,school:"evocation",ritual:!1,castingTime:"1 bonus action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["cleric"],description:""},{name:"Mass Suggestion",source:"srd",level:6,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!1,material:!0,items:"a snake's tongue and either a bit of honeycomb or a drop of sweet oil"},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Maze",source:"srd",level:8,school:"conjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["wizard"],description:""},{name:"Meld into Stone",source:"srd",level:3,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","druid"],description:""},{name:"Mending",source:"srd",level:0,school:"transmutation",ritual:!1,castingTime:"1 minute",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"two lodestones"},classes:["bard","cleric","druid","sorcerer","wizard"],description:""},{name:"Message",source:"srd",level:0,school:"transmutation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"1 round",components:{verbal:!0,somatic:!0,material:!0,items:"a short piece of copper wire"},classes:["bard","sorcerer","wizard"],description:""},{name:"Meteor Swarm",source:"srd",level:9,school:"evocation",ritual:!1,castingTime:"1 action",range:"1 mile",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Mind Blank",source:"srd",level:8,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","wizard"],description:""},{name:"Minor Illusion",source:"srd",level:0,school:"illusion",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"1 minute",components:{verbal:!1,somatic:!0,material:!0,items:"a bit of fleece"},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Mirage Arcane",source:"srd",level:7,school:"illusion",ritual:!1,castingTime:"10 minutes",range:"sight",concentration:!1,duration:"10 days",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","druid","wizard"],description:""},{name:"Mirror Image",source:"srd",level:2,school:"illusion",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","warlock","wizard"],description:""},{name:"Mislead",source:"srd",level:5,school:"illusion",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 hour",components:{verbal:!1,somatic:!0,material:!1,items:""},classes:["bard","wizard"],description:""},{name:"Misty Step",source:"srd",level:2,school:"conjuration",ritual:!1,castingTime:"1 bonus action",range:"self",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["sorcerer","warlock","wizard"],description:""},{name:"Modify Memory",source:"srd",level:5,school:"enchantment",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","wizard"],description:""},{name:"Moonbeam",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"several seeds of any moonseed plant and a piece of opalescent feldspar"},classes:["druid"],description:""},{name:"Move Earth",source:"srd",level:6,school:"transmutation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 2 hours",components:{verbal:!0,somatic:!0,material:!0,items:"an iron blade and a small bag containing a mixture of soilsâ€”clay, loam, and sand"},classes:["druid","sorcerer","wizard"],description:""},{name:"Nondetection",source:"srd",level:3,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of diamond dust worth 25 gp sprinkled over the target, which the spell consumes"},classes:["bard","ranger","wizard"],description:""},{name:"Pass without Trace",source:"srd",level:2,school:"abjuration",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"ashes from a burned leaf of mistletoe and a sprig of spruce"},classes:["druid","ranger"],description:""},{name:"Passwall",source:"srd",level:5,school:"transmutation",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of sesame seeds"},classes:["wizard"],description:""},{name:"Phantasmal Killer",source:"srd",level:4,school:"illusion",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["wizard"],description:""},{name:"Phantom Steed",source:"srd",level:3,school:"illusion",ritual:!0,castingTime:"1 minute",range:"30 feet",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["wizard"],description:""},{name:"Planar Ally",source:"srd",level:6,school:"conjuration",ritual:!1,castingTime:"10 minutes",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Planar Binding",source:"srd",level:5,school:"abjuration",ritual:!1,castingTime:"1 hour",range:"60 feet",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a jewel worth at least 1,000 gp, which the spell consumes"},classes:["bard","cleric","druid","wizard"],description:""},{name:"Plane Shift",source:"srd",level:7,school:"conjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a forked, metal rod worth at least 250 gp, attuned to a particular plane of existence"},classes:["cleric","druid","sorcerer","warlock","wizard"],description:""},{name:"Plant Growth",source:"srd",level:3,school:"transmutation",ritual:!1,castingTime:"1 action or 8 hours",range:"150 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","druid","ranger"],description:""},{name:"Poison Spray",source:"srd",level:0,school:"conjuration",ritual:!1,castingTime:"1 action",range:"10 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid","sorcerer","warlock","wizard"],description:""},{name:"Polymorph",source:"srd",level:4,school:"transmutation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a caterpillar cocoon"},classes:["bard","druid","sorcerer","wizard"],description:""},{name:"Power Word Kill",source:"srd",level:9,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard"],description:""},{name:"Power Word Stun",source:"srd",level:8,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Prayer of Healing",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"10 minutes",range:"30 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["cleric"],description:""},{name:"Prestidigitation",source:"srd",level:0,school:"transmutation",ritual:!1,castingTime:"1 action",range:"10 feet",concentration:!1,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Prismatic Spray",source:"srd",level:7,school:"evocation",ritual:!1,castingTime:"1 action",range:"self (60-foot cone)",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Prismatic Wall",source:"srd",level:9,school:"abjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["wizard"],description:""},{name:"Private Sanctum",source:"srd",level:4,school:"abjuration",ritual:!1,castingTime:"10 minutes",range:"120 feet",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a thin sheet of lead, a piece of opaque glass, a wad of cotton or cloth, and powdered chrysolite"},classes:["wizard"],description:""},{name:"Produce Flame",source:"srd",level:0,school:"conjuration",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid"],description:""},{name:"Programmed Illusion",source:"srd",level:6,school:"illusion",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"until dispelled",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of fleece and jade dust worth at least 25 gp"},classes:["bard","wizard"],description:""},{name:"Project Image",source:"srd",level:7,school:"illusion",ritual:!1,castingTime:"1 action",range:"500 miles",concentration:!0,duration:"up to 1 day",components:{verbal:!0,somatic:!0,material:!0,items:"a small replica of you made from materials worth at least 5 gp"},classes:["bard","wizard"],description:""},{name:"Protection from Energy",source:"srd",level:3,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","druid","ranger","sorcerer","wizard"],description:""},{name:"Protection from Evil and Good",source:"srd",level:1,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"holy water or powdered silver and iron, which the spell consumes"},classes:["cleric","paladin","warlock","wizard"],description:""},{name:"Protection from Poison",source:"srd",level:2,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","druid","paladin","ranger"],description:""},{name:"Purify Food and Drink",source:"srd",level:1,school:"transmutation",ritual:!0,castingTime:"1 action",range:"10 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","druid","paladin"],description:""},{name:"Raise Dead",source:"srd",level:5,school:"necromancy",ritual:!1,castingTime:"1 hour",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a diamond worth at least 500 gp, which the spell consumes"},classes:["bard","cleric","paladin"],description:""},{name:"Ray of Enfeeblement",source:"srd",level:2,school:"necromancy",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["warlock","wizard"],description:""},{name:"Ray of Frost",source:"srd",level:0,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Regenerate",source:"srd",level:7,school:"transmutation",ritual:!1,castingTime:"1 minute",range:"touch",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a prayer wheel and holy water"},classes:["bard","cleric","druid"],description:""},{name:"Reincarnate",source:"srd",level:5,school:"transmutation",ritual:!1,castingTime:"1 hour",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"rare oils and unguents worth at least 1,000 gp, which the spell consumes"},classes:["druid"],description:""},{name:"Remove Curse",source:"srd",level:3,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric","paladin","warlock","wizard"],description:""},{name:"Resilient Sphere",source:"srd",level:4,school:"evocation",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a hemispherical piece of clear crystal and a matching hemispherical piece of gum arabic"},classes:["wizard"],description:""},{name:"Resistance",source:"srd",level:0,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a miniature cloak"},classes:["cleric","druid"],description:""},{name:"Resurrection",source:"srd",level:7,school:"necromancy",ritual:!1,castingTime:"1 hour",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a diamond worth at least 1,000 gp, which the spell consumes"},classes:["bard","cleric"],description:""},{name:"Reverse Gravity",source:"srd",level:7,school:"transmutation",ritual:!1,castingTime:"1 action",range:"100 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a lodestone and iron filings"},classes:["druid","sorcerer","wizard"],description:""},{name:"Revivify",source:"srd",level:3,school:"necromancy",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"diamonds worth 300 gp, which the spell consumes"},classes:["cleric","paladin"],description:""},{name:"Rope Trick",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"powdered corn extract and a twisted loop of parchment"},classes:["wizard"],description:""},{name:"Sacred Flame",source:"srd",level:0,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Sanctuary",source:"srd",level:1,school:"abjuration",ritual:!1,castingTime:"1 bonus action",range:"30 feet",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a small silver mirror"},classes:["cleric"],description:""},{name:"Scorching Ray",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Scrying",source:"srd",level:5,school:"divination",ritual:!1,castingTime:"10 minutes",range:"self",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a focus worth at least 1,000 gp, such as a crystal ball, a silver mirror, or a font filled with holy water"},classes:["bard","cleric","druid","warlock","wizard"],description:""},{name:"Secret Chest",source:"srd",level:4,school:"conjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"an exquisite chest, 3 feet by 2 feet, constructed from rare materials worth at least 5,000 gp, and a Tiny replica made from the same materials worth at least 50 gp"},classes:["wizard"],description:""},{name:"See Invisibility",source:"srd",level:2,school:"divination",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of talc and a small sprinkling of powdered silver"},classes:["bard","sorcerer","wizard"],description:""},{name:"Seeming",source:"srd",level:5,school:"illusion",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","sorcerer","wizard"],description:""},{name:"Sending",source:"srd",level:3,school:"evocation",ritual:!1,castingTime:"1 action",range:"unlimited",concentration:!1,duration:"1 round",components:{verbal:!0,somatic:!0,material:!0,items:"a short piece of fine copper wire"},classes:["bard","cleric","wizard"],description:""},{name:"Sequester",source:"srd",level:7,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"until dispelled",components:{verbal:!0,somatic:!0,material:!0,items:"a powder composed of diamond, emerald, ruby, and sapphire dust worth at least 5,000 gp, which the spell consumes"},classes:["wizard"],description:""},{name:"Shapechange",source:"srd",level:9,school:"transmutation",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a jade circlet worth at least 1,500 gp, which you must place on your head before you cast the spell"},classes:["druid","wizard"],description:""},{name:"Shatter",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a chip of mica"},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Shield",source:"srd",level:1,school:"abjuration",ritual:!1,castingTime:"1 reaction, which you take when you are hit by an attack or targeted by the magic missile spell",range:"self",concentration:!1,duration:"1 round",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Shield of Faith",source:"srd",level:1,school:"abjuration",ritual:!1,castingTime:"1 bonus action",range:"60 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a small parchment with a bit of holy text written on it"},classes:["cleric","paladin"],description:""},{name:"Shillelagh",source:"srd",level:0,school:"transmutation",ritual:!1,castingTime:"1 bonus action",range:"touch",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"mistletoe, a shamrock leaf, and a club or quarterstaff"},classes:["druid"],description:""},{name:"Shocking Grasp",source:"srd",level:0,school:"evocation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Silence",source:"srd",level:2,school:"illusion",ritual:!0,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","cleric","ranger"],description:""},{name:"Silent Image",source:"srd",level:1,school:"illusion",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of fleece"},classes:["bard","sorcerer","wizard"],description:""},{name:"Simulacrum",source:"srd",level:7,school:"illusion",ritual:!1,castingTime:"12 hours",range:"touch",concentration:!1,duration:"until dispelled",components:{verbal:!0,somatic:!0,material:!0,items:"snow or ice in quantities sufficient to make a life-size copy of the duplicated creature; some hair, fingernail clippings, or other piece of that creature's body placed inside the snow or ice; and powdered ruby worth 1,500 gp, sprinkled over the duplicate and consumed by the spell"},classes:["wizard"],description:""},{name:"Sleep",source:"srd",level:1,school:"enchantment",ritual:!1,castingTime:"1 action",range:"90 feet",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of fine sand, rose petals, or a cricket"},classes:["bard","sorcerer","wizard"],description:""},{name:"Sleet Storm",source:"srd",level:3,school:"conjuration",ritual:!1,castingTime:"1 action",range:"150 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of dust and a few drops of water"},classes:["druid","sorcerer","wizard"],description:""},{name:"Slow",source:"srd",level:3,school:"transmutation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a drop of molasses"},classes:["sorcerer","wizard"],description:""},{name:"Spare the Dying",source:"srd",level:0,school:"necromancy",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Speak with Animals",source:"srd",level:1,school:"divination",ritual:!0,castingTime:"1 action",range:"self",concentration:!1,duration:"10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","druid","ranger"],description:""},{name:"Speak with Dead",source:"srd",level:3,school:"necromancy",ritual:!1,castingTime:"1 action",range:"10 feet",concentration:!1,duration:"10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"burning incense"},classes:["bard","cleric"],description:""},{name:"Speak with Plants",source:"srd",level:3,school:"transmutation",ritual:!1,castingTime:"1 action",range:"self (30-foot radius)",concentration:!1,duration:"10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","druid","ranger"],description:""},{name:"Spider Climb",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a drop of bitumen and a spider"},classes:["sorcerer","warlock","wizard"],description:""},{name:"Spike Growth",source:"srd",level:2,school:"transmutation",ritual:!1,castingTime:"1 action",range:"150 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"seven sharp thorns or seven small twigs, each sharpened to a point"},classes:["druid","ranger"],description:""},{name:"Spirit Guardians",source:"srd",level:3,school:"conjuration",ritual:!1,castingTime:"1 action",range:"self (15-foot radius)",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a holy symbol"},classes:["cleric"],description:""},{name:"Spiritual Weapon",source:"srd",level:2,school:"evocation",ritual:!1,castingTime:"1 bonus action",range:"60 feet",concentration:!1,duration:"1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["cleric"],description:""},{name:"Stinking Cloud",source:"srd",level:3,school:"conjuration",ritual:!1,castingTime:"1 action",range:"90 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a rotten egg or several skunk cabbage leaves"},classes:["bard","sorcerer","wizard"],description:""},{name:"Stone Shape",source:"srd",level:4,school:"transmutation",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"soft clay, which must be worked into roughly the desired shape of the stone object"},classes:["cleric","druid","wizard"],description:""},{name:"Stoneskin",source:"srd",level:4,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"diamond dust worth 100 gp, which the spell consumes"},classes:["druid","ranger","sorcerer","wizard"],description:""},{name:"Storm of Vengeance",source:"srd",level:9,school:"conjuration",ritual:!1,castingTime:"1 action",range:"sight",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid"],description:""},{name:"Suggestion",source:"srd",level:2,school:"enchantment",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 8 hours",components:{verbal:!0,somatic:!1,material:!0,items:"a snake's tongue and either a bit of honeycomb or a drop of sweet oil"},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Sunbeam",source:"srd",level:6,school:"evocation",ritual:!1,castingTime:"1 action",range:"self (60-foot line)",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a magnifying glass"},classes:["druid","sorcerer","wizard"],description:""},{name:"Sunburst",source:"srd",level:8,school:"evocation",ritual:!1,castingTime:"1 action",range:"150 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"fire and a piece of sunstone"},classes:["druid","sorcerer","wizard"],description:""},{name:"Symbol",source:"srd",level:7,school:"abjuration",ritual:!1,castingTime:"1 minute",range:"touch",concentration:!1,duration:"until dispelled or triggered",components:{verbal:!0,somatic:!0,material:!0,items:"mercury, phosphorus, and powdered diamond and opal with a total value of at least 1,000 gp, which the spell consumes"},classes:["bard","cleric","wizard"],description:""},{name:"Telekinesis",source:"srd",level:5,school:"transmutation",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Telepathic Bond",source:"srd",level:5,school:"divination",ritual:!0,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"pieces of eggshell from two different kinds of creatures"},classes:["wizard"],description:""},{name:"Teleport",source:"srd",level:7,school:"conjuration",ritual:!1,castingTime:"1 action",range:"10 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard","sorcerer","wizard"],description:""},{name:"Teleportation Circle",source:"srd",level:5,school:"conjuration",ritual:!1,castingTime:"1 minute",range:"10 feet",concentration:!1,duration:"1 round",components:{verbal:!0,somatic:!1,material:!0,items:"rare chalks and inks infused with precious gems worth 50 gp, which the spell consumes"},classes:["bard","sorcerer","wizard"],description:""},{name:"Thaumaturgy",source:"srd",level:0,school:"transmutation",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"up to 1 minute",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["cleric"],description:""},{name:"Thunderwave",source:"srd",level:1,school:"evocation",ritual:!1,castingTime:"1 action",range:"self (15-foot cube)",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","druid","sorcerer","wizard"],description:""},{name:"Time Stop",source:"srd",level:9,school:"transmutation",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Tiny Hut",source:"srd",level:3,school:"evocation",ritual:!0,castingTime:"1 minute",range:"self (10-foot-radius hemisphere)",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a small crystal bead"},classes:["bard","wizard"],description:""},{name:"Tongues",source:"srd",level:3,school:"divination",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!1,material:!0,items:"a small clay model of a ziggurat"},classes:["bard","cleric","sorcerer","warlock","wizard"],description:""},{name:"Transport via Plants",source:"srd",level:6,school:"conjuration",ritual:!1,castingTime:"1 action",range:"10 feet",concentration:!1,duration:"1 round",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid"],description:""},{name:"Tree Stride",source:"srd",level:5,school:"conjuration",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["druid","ranger"],description:""},{name:"True Polymorph",source:"srd",level:9,school:"transmutation",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a drop of mercury, a dollop of gum arabic, and a wisp of smoke"},classes:["bard","warlock","wizard"],description:""},{name:"True Resurrection",source:"srd",level:9,school:"necromancy",ritual:!1,castingTime:"1 hour",range:"touch",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!0,material:!0,items:"a sprinkle of holy water and diamonds worth at least 25,000 gp, which the spell consumes"},classes:["cleric","druid"],description:""},{name:"True Seeing",source:"srd",level:6,school:"divination",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"an ointment for the eyes that costs 25 gp; is made from mushroom powder, saffron, and fat; and is consumed by the spell"},classes:["bard","cleric","sorcerer","warlock","wizard"],description:""},{name:"True Strike",source:"srd",level:0,school:"divination",ritual:!1,castingTime:"1 action",range:"30 feet",concentration:!0,duration:"up to 1 round",components:{verbal:!1,somatic:!0,material:!1,items:""},classes:["bard","sorcerer","warlock","wizard"],description:""},{name:"Unseen Servant",source:"srd",level:1,school:"conjuration",ritual:!0,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a piece of string and a bit of wood"},classes:["bard","warlock","wizard"],description:""},{name:"Vampiric Touch",source:"srd",level:3,school:"necromancy",ritual:!1,castingTime:"1 action",range:"self",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["warlock","wizard"],description:""},{name:"Vicious Mockery",source:"srd",level:0,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["bard"],description:""},{name:"Wall of Fire",source:"srd",level:4,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a small piece of phosphorus"},classes:["druid","sorcerer","wizard"],description:""},{name:"Wall of Force",source:"srd",level:5,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a pinch of powder made by crushing a clear gemstone"},classes:["wizard"],description:""},{name:"Wall of Ice",source:"srd",level:6,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a small piece of quartz"},classes:["wizard"],description:""},{name:"Wall of Stone",source:"srd",level:5,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a small block of granite"},classes:["druid","sorcerer","wizard"],description:""},{name:"Wall of Thorns",source:"srd",level:6,school:"conjuration",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 10 minutes",components:{verbal:!0,somatic:!0,material:!0,items:"a handful of thorns"},classes:["druid"],description:""},{name:"Warding Bond",source:"srd",level:2,school:"abjuration",ritual:!1,castingTime:"1 action",range:"touch",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a pair of platinum rings worth at least 50 gp each, which you and the target must wear for the duration"},classes:["cleric"],description:""},{name:"Water Breathing",source:"srd",level:3,school:"transmutation",ritual:!0,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"24 hours",components:{verbal:!0,somatic:!0,material:!0,items:"a short reed or piece of straw"},classes:["druid","ranger","sorcerer","wizard"],description:""},{name:"Water Walk",source:"srd",level:3,school:"transmutation",ritual:!0,castingTime:"1 action",range:"30 feet",concentration:!1,duration:"1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a piece of cork"},classes:["cleric","druid","ranger","sorcerer"],description:""},{name:"Web",source:"srd",level:2,school:"conjuration",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!0,duration:"up to 1 hour",components:{verbal:!0,somatic:!0,material:!0,items:"a bit of spiderweb"},classes:["sorcerer","wizard"],description:""},{name:"Weird",source:"srd",level:9,school:"illusion",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["wizard"],description:""},{name:"Wind Walk",source:"srd",level:6,school:"transmutation",ritual:!1,castingTime:"1 minute",range:"30 feet",concentration:!1,duration:"8 hours",components:{verbal:!0,somatic:!0,material:!0,items:"fire and holy water"},classes:["druid"],description:""},{name:"Wind Wall",source:"srd",level:3,school:"evocation",ritual:!1,castingTime:"1 action",range:"120 feet",concentration:!0,duration:"up to 1 minute",components:{verbal:!0,somatic:!0,material:!0,items:"a tiny fan and a feather of exotic origin"},classes:["druid","ranger"],description:""},{name:"Wish",source:"srd",level:9,school:"conjuration",ritual:!1,castingTime:"1 action",range:"self",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["sorcerer","wizard"],description:""},{name:"Word of Recall",source:"srd",level:6,school:"conjuration",ritual:!1,castingTime:"1 action",range:"5 feet",concentration:!1,duration:"instantaneous",components:{verbal:!0,somatic:!1,material:!1,items:""},classes:["cleric"],description:""},{name:"Zone of Truth",source:"srd",level:2,school:"enchantment",ritual:!1,castingTime:"1 action",range:"60 feet",concentration:!1,duration:"10 minutes",components:{verbal:!0,somatic:!0,material:!1,items:""},classes:["bard","cleric","paladin"],description:""}];class Ye{constructor(){this.spellCategories=[];for(let e=0;e<=9;e++)this.spellCategories[e]=new Xe(this,e);this.reset()}reset(){this.spellcasterType="generic",this.spellcasterAbility="charisma",this.spellcasterLevel=1,this.requiresVerbalComponents=!0,this.requiresSomaticComponents=!0,this.requiresMaterialComponents=!0,this.clearAllSpells()}clearAllSpells(){for(let e=0;e<=9;e++)this.spellCategories[e].reset()}get blockName(){return"innate"===this.spellcasterType?"Innate Spellcasting":"Spellcasting"}get spellSlotQuantities(){return"innate"===this.spellcasterType?[0,0,0]:"generic"===this.spellcasterType?[0,0,0,0,0,0,0,0,0]:Ue[this.spellcasterType].levels[this.spellcasterLevel].spellSlots}get currentCantripCount(){return"innate"===this.spellcasterType?0:this.spellCategories[0].spells.length}get knownCantripCount(){const e=Ue[this.spellcasterType];return"innate"!==this.spellcasterType&&"generic"!==this.spellcasterType&&e.hasCantrips?e.levels[this.spellcasterLevel].knownCantripCount:0}get currentSpellCount(){const e="innate"===this.spellcasterType?0:1;let t=this.spellCategories.filter(t=>t.level>=e&&t.isEnabled);return"warlock"===this.spellcasterType&&(t=t.filter(e=>e.level<=5)),t.map(e=>e.spells.length).reduce((e,t)=>e+t,0)}get preparedSpellCount(){if("innate"===this.spellcasterType||"generic"===this.spellcasterType)return 0;const e=Ue[this.spellcasterType];switch(e.spellCountMethod){case"fixed":return e.levels[this.spellcasterLevel].fixedSpellCount;case"abilityModPlusLevel":return X.creature.abilities.abilities[this.spellcasterAbility].modifier+this.spellcasterLevel;case"abilityModPlusHalfLevel":return Math.floor(X.creature.abilities.abilities[this.spellcasterAbility].modifier+this.spellcasterLevel/2);default:return 0}}get generatedText(){const e="generic"===this.spellcasterType?"":" "+this.spellcasterType,t=v(this.spellcasterAbility),s=X.creature.abilities.abilities[this.spellcasterAbility].abbreviation.toUpperCase(),i=k(this.spellcasterLevel),n=this.spellCategories.map(e=>e.generatedText).filter(e=>""!==e).join("\n"),a=this.componentsText;if("innate"===this.spellcasterType){return`[NAME]'s innate spellcasting ability is ${t} (spell save DC SDC[${s}], ATK[${s}] to hit with spell attacks). It can innately cast the following spells${a?", requiring "+a:""}:\n\n${n}`}return`[NAME] is a ${i}-level spellcaster. Its spellcasting ability is ${t} (spell save DC SDC[${s}], ATK[${s}] to hit with spell attacks).${a?` It requires ${a} to cast its spells.`:""} [NAME] has the following${e} spells prepared:\n\n${n}`}get componentsText(){switch(this.requiresVerbalComponents+this.requiresSomaticComponents+this.requiresMaterialComponents){case 0:return"no components";case 1:return this.requiresVerbalComponents?"only verbal components":this.requiresSomaticComponents?"only somatic components":this.requiresMaterialComponents?"only material components":"";case 2:return this.requiresVerbalComponents?this.requiresSomaticComponents?this.requiresMaterialComponents?"":"no material components":"no somatic components":"no verbal components";default:return""}}renderText(e){if(""===e)return"";const t=se(e);return t.nameParserResults.error?"Error: Generated text has at least one invalid name expression.":t.mathParserResults.error?"Error: Generated text has at least one invalid math expression.":t.markdownParserResults.error?"Error: Generated text has invalid markdown syntax.":t.text}}class Xe{constructor(e,t){this.spellcastingModel=e,this.level=t,this.spells=[],this.reset()}reset(){this.spells.splice(0)}get isEnabled(){return 0===this.level?Ue[this.spellcastingModel.spellcasterType].hasCantrips:this.level<=this.spellcastingModel.spellSlotQuantities.length}get title(){if(!this.isEnabled)return"";if("innate"===this.spellcastingModel.spellcasterType)switch(this.level){case 0:return"At will";case 1:return"3/day each";case 2:return"2/day each";case 3:return"1/day each";default:return""}if(0===this.level)return"Cantrips (at will)";const e=k(this.level);if("generic"===this.spellcastingModel.spellcasterType)return e+" level";if("warlock"===this.spellcastingModel.spellcasterType&&this.level>=6)return e+" level (1/long rest)";var t;return`${e} level (${1===(t=this.spellSlotQuantity)?t+" slot":t+" slots"})`}get spellSlotQuantity(){return this.spellcastingModel.spellSlotQuantities[this.level-1]}get availableSpells(){const e=this.spellcastingModel.spellcasterType;let t=Ke;return"innate"!==e&&(t=t.filter(e=>e.level===this.level),"generic"!==e&&(t=t.filter(t=>t.classes.includes(e)))),t}get generatedText(){if(!this.isEnabled||0===this.spells.length)return"";const e=this.spells.map(e=>`*${e.toLowerCase()}*`).join(", ");return`${this.title}: ${e}`}}function Ze(e){const t=v(e.school),s=0===e.level?t+" Cantrip":`Lvl ${e.level} ${t}`,i=e.ritual?" (ritual)":"",n=v(e.castingTime),a=v(e.range),o=function(e){const t=[];e.components.verbal&&t.push("Verbal");e.components.somatic&&t.push("Somatic");e.components.material&&t.push("Material");return t.join(", ")}(e);return`${s}${i}; ${n}; ${a}; ${e.concentration?"Concentration, "+e.duration:v(e.duration)}; ${o}`}class et extends ze{static get elementName(){return"generate-spellcasting-dialog"}static get templatePaths(){return super.templatePaths.set("generate-spellcasting-dialog","src/html/elements/autonomous/dialogs/generate-spellcasting-dialog.html")}constructor(e=null){super(et.templatePaths,e),this.spellcastingModel=new Ye,this.errorMessages=this.shadowRoot.getElementById("error-messages"),this.spellcasterTypeSelect=this.shadowRoot.getElementById("spellcaster-type-select"),this.spellcasterAbilitySelect=this.shadowRoot.getElementById("spellcaster-ability-select"),this.spellcasterLevelInput=this.shadowRoot.getElementById("spellcaster-level-input"),this.verbalComponentInput=this.shadowRoot.getElementById("verbal-component-input"),this.somaticComponentInput=this.shadowRoot.getElementById("somatic-component-input"),this.materialComponentInput=this.shadowRoot.getElementById("material-component-input"),this.spellCategoryBoxes=[];const t=this.shadowRoot.getElementById("cantrips-at-will-spell-category-box");this.spellCategoryBoxes.push(t);for(let e=1;e<=9;e++){const t=this.shadowRoot.getElementById(`level-${e}-spell-category-box`);this.spellCategoryBoxes.push(t)}this.previewNameElement=this.shadowRoot.getElementById("preview-name"),this.previewTextElement=this.shadowRoot.getElementById("preview-text"),this.cantripCountLabel=this.shadowRoot.getElementById("cantrip-count-label"),this.spellCountLabel=this.shadowRoot.getElementById("spell-count-label"),this.cancelButton=this.shadowRoot.getElementById("cancel-button"),this.resetButton=this.shadowRoot.getElementById("reset-button"),this.generateSpellcastingButton=this.shadowRoot.getElementById("generate-spellcasting-button")}connectedCallback(){if(this.isConnected&&!this.isInitialized){super.connectedCallback();for(const e of this.spellCategoryBoxes)e.propertyList.errorMessages=this.errorMessages;this.addEventListener("propertyListChanged",this.onPropertyListChanged.bind(this)),this.spellcasterTypeSelect.addEventListener("input",this.onInputSpellcasterType.bind(this)),this.spellcasterAbilitySelect.addEventListener("input",this.onInputSpellcasterAbility.bind(this)),this.spellcasterLevelInput.addEventListener("input",this.onInputSpellcasterLevel.bind(this)),this.verbalComponentInput.addEventListener("input",this.onInputVerbalComponent.bind(this)),this.somaticComponentInput.addEventListener("input",this.onInputSomaticComponent.bind(this)),this.materialComponentInput.addEventListener("input",this.onInputMaterialComponent.bind(this)),this.cancelButton.addEventListener("click",this.onClickCloseButton.bind(this)),this.resetButton.addEventListener("click",this.onClickResetButton.bind(this)),this.generateSpellcastingButton.addEventListener("click",this.onClickGenerateSpellcastingButton.bind(this)),this.isInitialized=!0}}onPropertyListChanged(){this.updateModelSpells(),this.updateDisplay()}onInputSpellcasterType(){const e=this.spellcasterTypeSelect.value;this.spellcastingModel.spellcasterType=e,this.spellcastingModel.spellcasterAbility=Ue[e].ability,this.spellcastingModel.requiresVerbalComponents=!0,this.spellcastingModel.requiresSomaticComponents=!0,this.spellcastingModel.requiresMaterialComponents="innate"!==e,this.spellcastingModel.clearAllSpells(),this.updateDataLists(),this.updateControls()}onInputSpellcasterAbility(){this.spellcastingModel.spellcasterAbility=this.spellcasterAbilitySelect.value,this.updateDisplay()}onInputSpellcasterLevel(){this.spellcastingModel.spellcasterLevel=this.spellcasterLevelInput.valueAsInt,this.updateControls()}onInputVerbalComponent(){this.spellcastingModel.requiresVerbalComponents=this.verbalComponentInput.checked,this.updateDisplay()}onInputSomaticComponent(){this.spellcastingModel.requiresSomaticComponents=this.somaticComponentInput.checked,this.updateDisplay()}onInputMaterialComponent(){this.spellcastingModel.requiresMaterialComponents=this.materialComponentInput.checked,this.updateDisplay()}onClickResetButton(){this.reset()}onClickGenerateSpellcastingButton(){this.generateSpellcasting()}get previewText(){return this.previewTextElement.innerHTMLSanitized}launch(){this.showModal(),this.updateDataLists(),this.updateControls(),re(this.spellcasterTypeSelect)}reset(){this.spellcastingModel.reset(),this.updateControls(),re(this.spellcasterTypeSelect)}checkForErrors(){this.spellcasterLevelInput.validate(this.errorMessages)}generateSpellcasting(){if(this.errorMessages.clear(),this.checkForErrors(),this.errorMessages.any)return void this.errorMessages.focusOnFirstErrorField();const e=new CustomEvent("generateSpellcasting",{bubbles:!0,composed:!0,detail:{name:this.spellcastingModel.blockName,text:this.spellcastingModel.generatedText}});this.dispatchEvent(e),this.closeModal(),this.reset()}updateModelSpells(){for(let e=0;e<=9;e++){const t=this.spellcastingModel.spellCategories[e],s=this.spellCategoryBoxes[e];t.spells=s.propertyList.itemsAsText}}updateControls(){this.spellcasterTypeSelect.value=this.spellcastingModel.spellcasterType,this.spellcasterAbilitySelect.value=this.spellcastingModel.spellcasterAbility,this.spellcasterLevelInput.value=this.spellcastingModel.spellcasterLevel,this.verbalComponentInput.checked=this.spellcastingModel.requiresVerbalComponents,this.somaticComponentInput.checked=this.spellcastingModel.requiresSomaticComponents,this.materialComponentInput.checked=this.spellcastingModel.requiresMaterialComponents;for(let e=0;e<=9;e++){const t=this.spellcastingModel.spellCategories[e],s=this.spellCategoryBoxes[e];s.disabled=!t.isEnabled,s.heading.textContent=t.title,s.propertyList.setItems(t.spells)}this.updateDisplay()}updateDisplay(){this.updatePreview(),this.updateStatistics()}updatePreview(){this.previewNameElement.textContent="innate"===this.spellcastingModel.spellcasterType?"Innate Spellcasting":"Spellcasting";const e=this.spellcastingModel.generatedText;this.previewTextElement.innerHTMLSanitized=this.spellcastingModel.renderText(e)}updateStatistics(){let e="",t="";"innate"===this.spellcastingModel.spellcasterType?(e="",t="# of Spells: "+this.spellcastingModel.currentSpellCount):"generic"===this.spellcastingModel.spellcasterType?(e="# of Cantrips: "+this.spellcastingModel.currentCantripCount,t="# of Spells: "+this.spellcastingModel.currentSpellCount):(e=`# of Known Cantrips: ${this.spellcastingModel.currentCantripCount} / ${this.spellcastingModel.knownCantripCount}`,t=`# of Prepared Spells: ${this.spellcastingModel.currentSpellCount} / ${this.spellcastingModel.preparedSpellCount}`),this.cantripCountLabel.textContent=e,this.spellCountLabel.textContent=t}updateDataLists(){for(let e=0;e<=9;e++){const t=this.spellcastingModel.spellCategories[e],s=this.spellCategoryBoxes[e],i=t.availableSpells.map(e=>({text:Ze(e),value:e.name}));s.propertyList.dataListOptions=i}}}class tt extends ye{static get elementName(){return"drop-down-menu"}static get templatePaths(){return super.templatePaths.set("drop-down-menu","src/html/elements/autonomous/menus/drop-down-menu.html")}constructor(){super(tt.templatePaths)}}class st extends ye{static get elementName(){return"expression-menu"}static get templatePaths(){return super.templatePaths.set("expression-menu","src/html/elements/autonomous/menus/expression-menu.html")}constructor(){super(st.templatePaths),this.items=this.shadowRoot.getElementById("expression-menu-items")}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.items.addEventListener("click",this.onClickItems.bind(this)),this.initialized=!0)}async onClickItems(){this.items.style.visibility="hidden",await new Promise(e=>setTimeout(e,100)),this.items.style.visibility=""}}class it extends ye{static get elementName(){return"help-tooltip"}static get templatePaths(){return super.templatePaths.set("help-tooltip","src/html/elements/autonomous/tooltips/help-tooltip.html")}constructor(){super(it.templatePaths)}}class nt extends ye{static get elementName(){return"custom-text-help-tooltip"}static get templatePaths(){return super.templatePaths.set("custom-text-help-tooltip","src/html/elements/autonomous/tooltips/custom-text-help-tooltip.html")}constructor(){super(nt.templatePaths)}}class at extends ye{static get elementName(){return"display-block-list"}static get templatePaths(){return super.templatePaths.set("display-block-list","src/html/elements/autonomous/lists/display-block-list.html")}constructor(e){super(e||at.templatePaths)}get blockElementTag(){return"display-block"}get blocks(){return Array.from(this.children)}clear(){for(const e of this.blocks)this.removeChild(e)}addBlock(e,t){const s=document.createElement(this.blockElementTag);s.name=e,s.text=t,this.appendChild(s)}}class ot extends ye{static get elementName(){return"display-block"}static get templatePaths(){return super.templatePaths.set("display-block","src/html/elements/autonomous/lists/display-block.html")}constructor(e){super(e||ot.templatePaths),this.nameElement=this.shadowRoot.getElementById("display-block-name"),this.textElement=this.shadowRoot.getElementById("display-block-text")}get name(){return this.nameElement.textContent}set name(e){this.nameElement.textContent=e}get text(){return this.textElement.innerHTMLSanitized}set text(e){this.textElement.innerHTMLSanitized=e}}class rt extends ye{static get templatePaths(){return super.templatePaths.set("drag-and-drop-list-item","src/html/elements/autonomous/lists/drag-and-drop-list-item.html")}constructor(e,t){super(e,t),this.list=t,this.dragImage=null,this.container=this.shadowRoot.getElementById("drag-and-drop-list-item-container"),this.dragHandle=this.shadowRoot.getElementById("drag-and-drop-list-item-drag-handle")}connectedCallback(){this.dragHandle.style.cssText="user-select: none; -webkit-user-drag: element;",this.dragHandle.setAttribute("draggable","true"),this.addEventListener("dragstart",this.onDragStartItem.bind(this)),this.addEventListener("dragover",this.onDragOverItem.bind(this)),this.addEventListener("dragleave",this.onDragLeaveItem.bind(this)),this.addEventListener("dragend",this.onDragEndItem.bind(this)),this.addEventListener("drop",this.onDropItem.bind(this))}onDragStartItem(e){e.dataTransfer.setData("text",""),e.dataTransfer.setDragImage(this.dragImage,0,0),this.list.draggedItem=e.target}onDragOverItem(e){if(e.preventDefault(),null!==this.list.draggedItem){e.dataTransfer.dropEffect="move";const t=e.target.getBoundingClientRect(),s=t.y+t.height/2;e.clientY<s?this.dragoverRegion="top":this.dragoverRegion="bottom"}else e.dataTransfer.dropEffect="none"}onDragLeaveItem(){this.dragoverRegion="none"}onDragEndItem(){this.list.draggedItem=null}onDropItem(e){e.preventDefault(),"top"===this.dragoverRegion?(this.list.insertDraggedItemBefore(this),this.dragoverRegion="none"):"bottom"===this.dragoverRegion&&(this.list.insertDraggedItemBefore(this.nextElementSibling),this.dragoverRegion="none")}get dragoverRegion(){return this.dataset.dragoverRegion}set dragoverRegion(e){const t="drag-and-drop-list-item__container_dragover-top",s="drag-and-drop-list-item__container_dragover-bottom";switch(e){case"top":this.dataset.dragoverRegion="top",this.container.classList.add(t),this.container.classList.remove(s);break;case"bottom":this.dataset.dragoverRegion="bottom",this.container.classList.remove(t),this.container.classList.add(s);break;default:this.dataset.dragoverRegion="none",this.container.classList.remove(t),this.container.classList.remove(s)}}}function lt(e,t,s){const i=e.substring(t-3,t),n=e.substring(s,s+3);return"***"===i&&"***"===n||"___"===i&&"___"===n||"**_"===i&&"_**"===n||"__*"===i&&"*__"===n?"bold-italic":"_**"===i&&"**_"===n||"*__"===i&&"__*"===n?"italic-bold":ct("**",i,n)||ct("__",i,n)?"bold":ct("*",i,n)||ct("_",i,n)?"italic":"none"}function ct(e,t,s){return t.endsWith(e)&&s.startsWith(e)}function dt(e,t,s,i){return{newText:e.substring(0,t)+i+e.substring(t,s)+i+e.substring(s,e.length),newSelectionStart:t+i.length,newSelectionEnd:s+i.length}}function ut(e,t,s,i){return{newText:e.substring(0,t-i)+e.substring(t,s)+e.substring(s+i,e.length),newSelectionStart:t-i,newSelectionEnd:s-i}}function mt(e,t,s,i){return{newText:e.substring(0,t-3)+e.substring(t-3+i,s+3-i)+e.substring(s+3,e.length),newSelectionStart:t-i,newSelectionEnd:s-i}}class ht extends rt{static get elementName(){return"editable-block"}static get templatePaths(){return super.templatePaths.set("editable-block","src/html/elements/autonomous/lists/editable-block.html")}constructor(e){super(e||ht.templatePaths),this.mouseOnBoldOrItalicLabel=!1,this.nameInput=this.shadowRoot.getElementById("editable-block-name"),this.boldCheckbox=this.shadowRoot.getElementById("editable-block-bold-checkbox"),this.italicCheckbox=this.shadowRoot.getElementById("editable-block-italic-checkbox"),this.boldLabel=this.shadowRoot.getElementById("editable-block-bold-label"),this.italicLabel=this.shadowRoot.getElementById("editable-block-italic-label"),this.removeButton=this.shadowRoot.getElementById("editable-block-remove-button"),this.textArea=this.shadowRoot.getElementById("editable-block-textarea"),this.previewContainer=this.shadowRoot.getElementById("editable-block-preview-container"),this.previewNameElement=this.shadowRoot.getElementById("editable-block-preview-name"),this.previewTextElement=this.shadowRoot.getElementById("editable-block-preview-text"),this.nameExpressionButtons={NAME:this.shadowRoot.getElementById("name-button"),FULLNAME:this.shadowRoot.getElementById("fullname-button")},this.modExpressionButtons={STR:this.shadowRoot.getElementById("mod-str-button"),DEX:this.shadowRoot.getElementById("mod-dex-button"),CON:this.shadowRoot.getElementById("mod-con-button"),INT:this.shadowRoot.getElementById("mod-int-button"),WIS:this.shadowRoot.getElementById("mod-wis-button"),CHA:this.shadowRoot.getElementById("mod-cha-button")},this.atkExpressionButtons={STR:this.shadowRoot.getElementById("atk-str-button"),DEX:this.shadowRoot.getElementById("atk-dex-button"),FIN:this.shadowRoot.getElementById("atk-fin-button")},this.dmgExpressionButtons={STR:this.shadowRoot.getElementById("dmg-str-button"),DEX:this.shadowRoot.getElementById("dmg-dex-button"),FIN:this.shadowRoot.getElementById("dmg-fin-button")},this.sdcExpressionButtons={INT:this.shadowRoot.getElementById("sdc-int-button"),WIS:this.shadowRoot.getElementById("sdc-wis-button"),CHA:this.shadowRoot.getElementById("sdc-cha-button")},this.dragImage=this.nameInput,this.isLegendaryActionBlock=!1}connectedCallback(){if(this.isConnected&&!this.isInitialized){super.connectedCallback(),this.nameInput.addEventListener("dragstart",this.preventDragAndDrop.bind(this)),this.textArea.addEventListener("dragstart",this.preventDragAndDrop.bind(this)),this.textArea.addEventListener("select",this.onSelectText.bind(this)),this.textArea.addEventListener("click",this.onClickOrKeyDownText.bind(this)),this.textArea.addEventListener("keydown",this.onClickOrKeyDownText.bind(this)),this.textArea.addEventListener("blur",this.onBlurText.bind(this)),this.nameInput.addEventListener("input",this.onInputName.bind(this)),this.textArea.addEventListener("input",this.onInputText.bind(this)),this.boldCheckbox.addEventListener("change",this.onChangeBoldCheckbox.bind(this)),this.italicCheckbox.addEventListener("change",this.onChangeItalicCheckbox.bind(this)),this.boldLabel.addEventListener("mouseenter",this.onMouseEnterBoldOrItalicLabel.bind(this)),this.italicLabel.addEventListener("mouseenter",this.onMouseEnterBoldOrItalicLabel.bind(this)),this.boldLabel.addEventListener("mouseleave",this.onMouseLeaveBoldOrItalicLabel.bind(this)),this.italicLabel.addEventListener("mouseleave",this.onMouseLeaveBoldOrItalicLabel.bind(this)),this.removeButton.addEventListener("click",this.onClickRemoveButton.bind(this));for(const[e,t]of Object.entries(this.nameExpressionButtons))t.addEventListener("click",this.onClickNameExpressionButton.bind(this,e));for(const[e,t]of Object.entries(this.modExpressionButtons))t.addEventListener("click",this.onClickModExpressionButton.bind(this,e));for(const[e,t]of Object.entries(this.atkExpressionButtons))t.addEventListener("click",this.onClickAtkExpressionButton.bind(this,e));for(const[e,t]of Object.entries(this.dmgExpressionButtons))t.addEventListener("click",this.onClickDmgExpressionButton.bind(this,e));for(const[e,t]of Object.entries(this.sdcExpressionButtons))t.addEventListener("click",this.onClickSdcExpressionButton.bind(this,e));this.isInitialized=!0}}preventDragAndDrop(e){e.preventDefault()}onMouseEnterBoldOrItalicLabel(){this.mouseOnBoldOrItalicLabel=!0}onMouseLeaveBoldOrItalicLabel(){this.mouseOnBoldOrItalicLabel=!1}onSelectText(){const e=this.textArea.selectionStart,t=this.textArea.selectionEnd;if(e!==t){this.boldCheckbox.disabled=!1,this.italicCheckbox.disabled=!1;const s=lt(this.text,e,t);s.includes("bold")&&(this.boldCheckbox.checked=!0),s.includes("italic")&&(this.italicCheckbox.checked=!0)}}async onClickOrKeyDownText(){await new Promise(e=>setTimeout(e,100)),this.textArea.selectionStart===this.textArea.selectionEnd&&(this.boldCheckbox.checked=!1,this.italicCheckbox.checked=!1,this.boldCheckbox.disabled=!0,this.italicCheckbox.disabled=!0)}onBlurText(e){this.mouseOnBoldOrItalicLabel&&null===e.relatedTarget||(window.getSelection().removeAllRanges(),this.boldCheckbox.checked=!1,this.italicCheckbox.checked=!1,this.boldCheckbox.disabled=!0,this.italicCheckbox.disabled=!0)}onInputName(){this.nameInput.value=this.nameInput.value.replace(/\.+$/,""),this.previewNameElement.textContent=this.nameInput.value}onInputText(){this.textArea.parse(),this.previewTextElement.innerHTMLSanitized=this.textArea.htmlText}onChangeBoldCheckbox(){const e=this.textArea.selectionStart,t=this.textArea.selectionEnd,s=function(e,t,s){switch(lt(e,t,s)){case"bold-italic":return mt(e,t,s,2);case"italic-bold":case"bold":return ut(e,t,s,2);case"italic":case"none":return dt(e,t,s,"**")}}(this.text,e,t);this.text=s.newText,this.textArea.focus(),this.textArea.setSelectionRange(s.newSelectionStart,s.newSelectionEnd),this.onInputText()}onChangeItalicCheckbox(){const e=this.textArea.selectionStart,t=this.textArea.selectionEnd,s=function(e,t,s){switch(lt(e,t,s)){case"italic-bold":return mt(e,t,s,1);case"bold-italic":case"italic":return ut(e,t,s,1);case"bold":case"none":return dt(e,t,s,"*")}}(this.text,e,t);this.text=s.newText,this.textArea.focus(),this.textArea.setSelectionRange(s.newSelectionStart,s.newSelectionEnd),this.onInputText()}onClickRemoveButton(){this.remove()}onClickNameExpressionButton(e){this.addExpressionToText(`[${e}]`)}onClickModExpressionButton(e){this.addExpressionToText(`MOD[${e}]`)}onClickAtkExpressionButton(e){this.addExpressionToText(`ATK[${e}]`)}onClickDmgExpressionButton(e){this.addExpressionToText(`DMG[d6 + ${e}]`)}onClickSdcExpressionButton(e){this.addExpressionToText(`SDC[${e}]`)}addExpressionToText(e){const t=this.textArea.selectionStart,s=this.textArea.selectionEnd;this.textArea.setRangeText(e,t,s,"end"),this.textArea.focus(),this.onInputText()}set name(e){this.nameInput.value=e}get name(){return this.nameInput.value}set text(e){this.textArea.value=e}get text(){return this.textArea.value}get markdownText(){return this.textArea.markdownText}get htmlText(){return this.textArea.htmlText}set previewName(e){this.previewNameElement.textContent=e}get previewName(){return this.previewNameElement.textContent}set previewText(e){this.previewTextElement.innerHTMLSanitized=e}get previewText(){return this.previewTextElement.innerHTMLSanitized}validate(e){this.nameInput.validate(e),this.textArea.validate(e)}parse(){this.textArea.parse()}remove(){this.list.removeChild(this)}toModel(){return new V(this.name,this.text,this.markdownText,this.htmlText)}}class pt extends ye{constructor(e,t){super(e,t),this.draggedItem=null}insertDraggedItemBefore(e){null!==this.draggedItem&&(this.insertBefore(this.draggedItem,e),this.draggedItem=null)}}class gt extends pt{static get elementName(){return"editable-block-list"}static get templatePaths(){return super.templatePaths.set("editable-block-list","src/html/elements/autonomous/lists/editable-block-list.html")}constructor(e){super(e||gt.templatePaths),this.singleName=null,this.isLegendaryActionList=!1}get blockElementTag(){return"editable-block"}get blocks(){return Array.from(this.children)}clear(){for(const e of this.blocks)e.remove()}addBlock(e="",t=""){const s=document.createElement(this.blockElementTag);return s.list=this,s.name=e,s.text=t,s.nameInput.setAttribute("pretty-name",this.singleName+" Name"),s.textArea.setAttribute("pretty-name",this.singleName+" Text"),this.appendChild(s),re(s.nameInput),s}validate(e){for(const t of this.blocks)t.validate(e)}parse(){for(const e of this.blocks)e.parse()}toModel(){return this.blocks.map(e=>e.toModel())}}class bt extends at{static get elementName(){return"legendary-action-display-block-list"}static get templatePaths(){return super.templatePaths.set("legendary-action-display-block-list","src/html/elements/autonomous/lists/legendary-action-display-block-list.html")}constructor(){super(bt.templatePaths)}get blockElementTag(){return"legendary-action-display-block"}}class vt extends ot{static get elementName(){return"legendary-action-display-block"}static get templatePaths(){return ye.templatePaths.set("legendary-action-display-block","src/html/elements/autonomous/lists/legendary-action-display-block.html")}constructor(){super(vt.templatePaths)}}class ft extends gt{static get elementName(){return"legendary-action-editable-block-list"}static get templatePaths(){return super.templatePaths.set("legendary-action-editable-block-list","src/html/elements/autonomous/lists/legendary-action-editable-block-list.html")}constructor(){super(ft.templatePaths)}get blockElementTag(){return"legendary-action-editable-block"}}class wt extends ht{static get elementName(){return"legendary-action-editable-block"}static get templatePaths(){return rt.templatePaths.set("legendary-action-editable-block","src/html/elements/autonomous/lists/legendary-action-editable-block.html")}constructor(){super(wt.templatePaths)}toModel(){return new Q(this.name,this.text,this.markdownText,this.htmlText)}}class yt extends rt{static get elementName(){return"property-list-item"}static get templatePaths(){return super.templatePaths.set("property-list-item","src/html/elements/autonomous/lists/property-list-item.html")}constructor(e,t){super(yt.templatePaths,e),this.label=this.shadowRoot.getElementById("property-list-item-label"),this.removeButton=this.shadowRoot.getElementById("property-list-item-remove-button"),this.dragImage=this.label,this.text=t}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.removeButton.addEventListener("click",this.onClickRemoveButton.bind(this)),this.isInitialized=!0)}onClickRemoveButton(){this.remove(),this.list.dispatchPropertyListChangedEvent()}onDropItem(e){super.onDropItem(e),this.list.dispatchPropertyListChangedEvent()}get text(){return this.label.textContent}set text(e){this.label.textContent=e}remove(){this.list.removeChild(this),this.list.dataList.setOptionEnabled(this.text,!0)}}class Ct extends pt{static get elementName(){return"property-list"}static get templatePaths(){return super.templatePaths.set("property-list","src/html/elements/autonomous/lists/property-list.html")}constructor(e){super(Ct.templatePaths,e),this.input=this.shadowRoot.getElementById("input"),this.addButton=this.shadowRoot.getElementById("add-button"),this.dataList=this.shadowRoot.getElementById("datalist"),this.errorMessages=null,this.singleItemName="item"}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.input.addEventListener("keydown",this.onEnterKeyDownOnInputField.bind(this)),this.addButton.addEventListener("click",this.onClickAddButton.bind(this)),this.isInitialized=!0)}onEnterKeyDownOnInputField(e){"Enter"===e.key&&(e.preventDefault(),this.addItemFromInput())}onClickAddButton(){this.addItemFromInput()}get items(){return Array.from(this.children)}get itemsAsText(){return this.items.map(e=>e.text)}contains(e){return this.itemsAsText.includes(e)}findItem(e){return this.items.filter(t=>t.text===e)[0]}clearItems(){for(const e of this.items)e.remove()}addItemFromInput(){const e=this.input.value.trim();this.input.value=e,this.errorMessages.clear(),""===e?this.errorMessages.add(this.input,`Cannot add a blank ${this.singleItemName}.`):this.contains(e)&&this.errorMessages.add(this.input,`Cannot add a duplicate ${this.singleItemName}.`),this.errorMessages.any?this.errorMessages.focusOnFirstErrorField():(this.addItem(e),this.dispatchPropertyListChangedEvent(),this.input.value="",this.input.select())}addItem(e){const t=document.createElement("property-list-item");t.list=this,t.text=e,this.appendChild(t),this.dataList.setOptionEnabled(e,!1)}setItems(e){if(t=e,s=this.itemsAsText,t.length!==s.length||!t.every((e,t)=>e===s[t])){this.clearItems();for(const t of e)this.addItem(t)}var t,s}set dataListOptions(e){!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(this.dataList),ce(this.dataList,e)}get dataListOptions(){return Array.from(this.dataList.children).map(e=>({text:e.textContent,value:e.getAttribute("value")}))}dispatchPropertyListChangedEvent(){const e=new CustomEvent("propertyListChanged",{bubbles:!0,composed:!0});this.dispatchEvent(e)}}class kt extends ye{static get templatePaths(){return super.templatePaths.set("section","src/html/elements/autonomous/sections/section.html")}constructor(e,t,s,i){super(e),this.modelPropertyName=t,this.dataset.mode="show",this.showElements=new s(this.shadowRoot),this.editElements=new i(this.shadowRoot),this.errorMessages=this.shadowRoot.querySelector("error-messages")}connectedCallback(){this.updateView(),this.showElements.section.addEventListener("click",()=>{this.edit()}),this.showElements.section.addEventListener("animationend",()=>{"edit"===this.mode&&this.focusOnInitialEditSectionElement()}),this.editElements.section.addEventListener("submit",e=>{e.preventDefault(),this.save()})}get mode(){return this.dataset.mode}set mode(e){const t="section_hidden";switch(e){case"hidden":this.dataset.mode="hidden",this.showElements.section.classList.add(t),this.editElements.section.classList.add(t);break;case"show":this.dataset.mode="show",this.showElements.section.classList.remove(t),this.editElements.section.classList.add(t);break;case"edit":this.dataset.mode="edit",this.showElements.section.classList.add(t),this.editElements.section.classList.remove(t);break;default:throw new Error(`'${e}' is not a valid section mode.`)}}get empty(){return"empty"in this.dataset}set empty(e){e?(this.dataset.empty="",this.showElements.section.classList.add("section_empty")):(delete this.dataset.empty,this.showElements.section.classList.remove("section_empty"))}setEmptyVisibility(e){this.empty?e?"hidden"===this.mode&&(this.mode="show",this.dispatchModeChangedEvent()):"show"===this.mode&&(this.mode="hidden",this.dispatchModeChangedEvent()):"hidden"===this.mode&&(this.mode="show",this.dispatchModeChangedEvent())}focusOnInitialEditSectionElement(){re(this.editElements.initiallySelectedElement)}edit(){this.mode="edit",this.dispatchModeChangedEvent(),this.focusOnInitialEditSectionElement()}save(){this.errorMessages.clear(),this.checkForErrors(),this.errorMessages.any?this.errorMessages.focusOnFirstErrorField():(this.updateModel(),this.updateShowModeView(),this.empty&&!X.localSettings.emptySectionsVisibility?this.mode="hidden":this.mode="show",this.dispatchModeChangedEvent(),this.dispatchSectionSavedEvent())}checkForErrors(){throw new Error(`The class '${this.constructor.name}' must implement the checkForErrors() method.`)}updateModel(){throw new Error(`The class '${this.constructor.name}' must implement the updateModel() method.`)}updateEditModeView(){throw new Error(`The class '${this.constructor.name}' must implement the updateEditModeView() method.`)}updateShowModeView(){throw new Error(`The class '${this.constructor.name}' must implement the updateShowModeView() method.`)}updateView(){this.updateEditModeView(),this.updateShowModeView()}dispatchModeChangedEvent(){const e=new CustomEvent("sectionModeChanged",{bubbles:!0,composed:!0});this.dispatchEvent(e)}dispatchSectionSavedEvent(){const e=new CustomEvent("sectionSaved",{bubbles:!0,composed:!0});this.dispatchEvent(e)}importFromOpen5e(e){X.creature[this.modelPropertyName].fromOpen5e(e),this.updateView(),this.setEmptyVisibility(X.localSettings.emptySectionsVisibility)}importFromJson(e){X.creature[this.modelPropertyName].fromJson(e),this.updateView(),this.setEmptyVisibility(X.localSettings.emptySectionsVisibility)}exportToJson(){return X.creature[this.modelPropertyName].toJson()}exportToHtml(){return X.creature[this.modelPropertyName].toHtml()}exportToMarkdown(){return X.creature[this.modelPropertyName].toMarkdown()}}class Et{constructor(e){this.section=e.getElementById("show-section")}}class St{constructor(e){this.section=e.getElementById("edit-section"),this.saveButton=e.getElementById("save-button")}get initiallySelectedElement(){throw new Error(`The class '${this.constructor.name}' must implement the initiallySelectedElement() getter.`)}submitForm(){this.section.dispatchEvent(new Event("submit"))}}class xt extends kt{static get elementName(){return"title-section"}static get templatePaths(){return super.templatePaths.set("title-section","src/html/elements/autonomous/sections/title-section.html")}constructor(){super(xt.templatePaths,"title",Tt,Mt)}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.fullName.addEventListener("input",this.onInputCreatureName.bind(this)),this.editElements.shortName.addEventListener("input",this.onInputShortName.bind(this)),this.editElements.properNoun.addEventListener("input",this.onInputProperNoun.bind(this)),this.isInitialized=!0)}onInputCreatureName(){const e=this.editElements.fullName.value;""!==e&&(X.creature.title.fullName=e,this.dispatchCreatureNameChangedEvent())}onInputShortName(){X.creature.title.shortName=this.editElements.shortName.value,this.dispatchCreatureNameChangedEvent()}onInputProperNoun(){X.creature.title.isProperNoun=this.editElements.properNoun.checked,this.dispatchCreatureNameChangedEvent()}get title(){return this.showElements.title.textContent}dispatchCreatureNameChangedEvent(){const e=X.creature.title,t=new CustomEvent("creatureNameChanged",{bubbles:!0,composed:!0,detail:{creatureName:e.fullName,shortName:e.shortName,isProperNoun:e.isProperNoun}});this.dispatchEvent(t)}checkForErrors(){this.editElements.fullName.value=v(this.editElements.fullName.value.trim()),this.editElements.fullName.validate(this.errorMessages)}updateModel(){const e=X.creature.title;e.fullName=this.editElements.fullName.value,e.shortName=this.editElements.shortName.value,e.isProperNoun=this.editElements.properNoun.checked}updateEditModeView(){const e=X.creature.title;this.editElements.fullName.value=e.fullName,this.editElements.shortName.value=e.shortName,this.editElements.properNoun.checked=e.isProperNoun}updateShowModeView(){this.showElements.title.textContent=X.creature.title.fullName}}class Tt extends Et{constructor(e){super(e),this.title=e.getElementById("title-text")}}class Mt extends St{constructor(e){super(e),this.fullName=e.getElementById("full-name-input"),this.shortName=e.getElementById("short-name-input"),this.properNoun=e.getElementById("proper-noun-input")}get initiallySelectedElement(){return this.fullName}}var It=["aarakocra","aasimar","any race","bullywug","demon","devil","dragonborn","dwarf","elf","firbolg","gith","gnoll","gnome","goblinoid","goliath","grimlock","half-elf","halfling","half-orc","human","kenku","kobold","kuo-toa","lizardfolk","merfolk","orc","quaggoth","sahuagin","shapechanger","tabaxi","thri-kreen","tiefling","titan","triton","troglodyte","yuan-ti","yugoloth"];class Bt extends kt{static get elementName(){return"subtitle-section"}static get templatePaths(){return super.templatePaths.set("subtitle-section","src/html/elements/autonomous/sections/subtitle-section.html")}constructor(){super(Bt.templatePaths,"subtitle",Dt,zt),de(this.editElements.size,Object.keys(l)),de(this.editElements.type,c),ue(this.editElements.tagsDataList,It),de(this.editElements.alignment,d)}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.useCustomText.disableElementsWhenChecked(this.editElements.size,this.editElements.type,this.editElements.tags,this.editElements.alignment),this.editElements.useCustomText.enableElementsWhenChecked(this.editElements.customText),this.editElements.size.addEventListener("input",this.onInputCreatureSize.bind(this)),this.isInitialized=!0)}onInputCreatureSize(){const e=this.editElements.size.value;X.creature.subtitle.size=e,X.creature.hitPoints.hitDieSize=l[e],this.dispatchCreatureSizeChangedEvent()}dispatchCreatureSizeChangedEvent(){const e=X.creature.subtitle,t=new CustomEvent("creatureSizeChanged",{bubbles:!0,composed:!0,detail:{creatureSize:e.size}});this.dispatchEvent(t)}checkForErrors(){this.editElements.tags.value=this.editElements.tags.value.trim(),this.editElements.useCustomText.checked&&this.editElements.customText.validate(this.errorMessages)}updateModel(){const e=X.creature.subtitle;e.size=this.editElements.size.value,e.type=this.editElements.type.value,e.tags=this.editElements.tags.value,e.alignment=this.editElements.alignment.value,e.useCustomText=this.editElements.useCustomText.checked,e.customText=this.editElements.customText.value}updateEditModeView(){const e=X.creature.subtitle;this.editElements.size.value=e.size,this.editElements.type.value=e.type,this.editElements.tags.value=e.tags,this.editElements.alignment.value=e.alignment,this.editElements.useCustomText.checked=e.useCustomText,this.editElements.customText.value=e.customText,this.editElements.useCustomText.onInputCheckbox()}updateShowModeView(){this.showElements.text.textContent=X.creature.subtitle.text}}class Dt extends Et{constructor(e){super(e),this.text=e.getElementById("subtitle-text")}}class zt extends St{constructor(e){super(e),this.size=e.getElementById("size-input"),this.type=e.getElementById("type-input"),this.tags=e.getElementById("tags-input"),this.tagsDataList=e.getElementById("tags-list"),this.alignment=e.getElementById("alignment-input"),this.useCustomText=e.getElementById("use-custom-text-input"),this.customText=e.getElementById("custom-text-input")}get initiallySelectedElement(){return this.size}}class Pt extends kt{constructor(e,t,s,i){super(e,t,s,i)}}class Rt extends Et{constructor(e){super(e),this.heading=e.getElementById("show-section-heading"),this.text=e.getElementById("show-section-text")}}class Lt extends St{constructor(e){super(e)}}class At extends Pt{static get elementName(){return"armor-class-section"}static get templatePaths(){return super.templatePaths.set("armor-class-section","src/html/elements/autonomous/sections/armor-class-section.html")}constructor(){super(At.templatePaths,"armorClass",Nt,Ft)}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.useCustomText.disableElementsWhenChecked(this.editElements.armorClass,this.editElements.armorType,this.editElements.hasShield),this.editElements.useCustomText.enableElementsWhenChecked(this.editElements.customText),this.isInitialized=!0)}checkForErrors(){this.editElements.armorType.value=this.editElements.armorType.value.trim(),this.editElements.customText.value=this.editElements.customText.value.trim(),this.editElements.useCustomText.checked?this.editElements.customText.validate(this.errorMessages):this.editElements.armorClass.validate(this.errorMessages)}updateModel(){const e=X.creature.armorClass;e.armorClass=this.editElements.armorClass.valueAsInt,e.armorType=this.editElements.armorType.value,e.hasShield=this.editElements.hasShield.checked,e.useCustomText=this.editElements.useCustomText.checked,e.customText=this.editElements.customText.value,e.htmlCustomText=this.editElements.customText.htmlText}updateEditModeView(){const e=X.creature.armorClass;this.editElements.armorClass.value=e.armorClass,this.editElements.armorType.value=e.armorType,this.editElements.hasShield.checked=e.hasShield,this.editElements.useCustomText.checked=e.useCustomText,this.editElements.customText.value=e.customText,e.useCustomText&&(this.editElements.customText.parse(),e.htmlCustomText=this.editElements.customText.htmlText),this.editElements.useCustomText.onInputCheckbox()}updateShowModeView(){const e=X.creature.armorClass;X.creature.armorClass.useCustomText?this.showElements.text.innerHTMLSanitized=e.htmlCustomText:this.showElements.text.textContent=e.normalText}}class Nt extends Rt{constructor(e){super(e)}}class Ft extends Lt{constructor(e){super(e),this.armorClass=e.getElementById("armor-class-input"),this.armorType=e.getElementById("armor-type-input"),this.hasShield=e.getElementById("shield-input"),this.useCustomText=e.getElementById("use-custom-text-input"),this.customText=e.getElementById("custom-text-input")}get initiallySelectedElement(){return this.useCustomText.checked?this.customText:this.armorClass}}class Ht extends Pt{static get elementName(){return"hit-points-section"}static get templatePaths(){return super.templatePaths.set("hit-points-section","src/html/elements/autonomous/sections/hit-points-section.html")}constructor(){super(Ht.templatePaths,"hitPoints",Ot,jt)}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.useHitDie.disableElementsWhenChecked(this.editElements.hitPoints),this.editElements.useHitDie.enableElementsWhenChecked(this.editElements.hitDieQuantity,this.editElements.hitDieSize),this.editElements.hitPoints.addEventListener("input",this.onInputHitPoints.bind(this)),this.editElements.useHitDie.addEventListener("input",this.onInputUseHitDie.bind(this)),this.editElements.hitDieQuantity.addEventListener("input",this.onInputHitDieQuantity.bind(this)),this.editElements.hitDieSize.addEventListener("input",this.onInputHitDieSize.bind(this)),this.isInitialized=!0)}onInputHitPoints(){this.updateModelHitPoints()}onInputUseHitDie(){this.updateModelUseHitDie(),this.updateEditModeViewHitPoints()}onInputHitDieQuantity(){this.updateModelHitDieQuantity(),this.updateEditModeViewHitPoints(),this.updateEditModeViewConstitutionHitPoints()}onInputHitDieSize(){this.updateModelHitDieSize(),this.updateEditModeViewHitPoints()}checkForErrors(){X.creature.hitPoints.useHitDie?this.editElements.hitDieQuantity.validate(this.errorMessages):this.editElements.hitPoints.validate(this.errorMessages)}updateModel(){this.updateModelHitPoints(),this.updateModelUseHitDie(),this.updateModelHitDieQuantity(),this.updateModelHitDieSize()}updateModelHitPoints(){const e=this.editElements.hitPoints.valueAsInt;null!==e&&(X.creature.hitPoints.hitPoints=e)}updateModelUseHitDie(){X.creature.hitPoints.useHitDie=this.editElements.useHitDie.checked}updateModelHitDieQuantity(){const e=this.editElements.hitDieQuantity.valueAsInt;null!==e&&(X.creature.hitPoints.hitDieQuantity=e)}updateModelHitDieSize(){const e=this.editElements.hitDieSize.valueAsInt;null!==e&&(X.creature.hitPoints.hitDieSize=e)}updateEditModeView(){const e=X.creature.hitPoints;this.editElements.hitPoints.value=e.hitPoints,this.editElements.useHitDie.checked=e.useHitDie,this.editElements.hitDieQuantity.value=e.hitDieQuantity,this.editElements.hitDieSize.value=e.hitDieSize,this.editElements.constitutionHitPoints.textContent=e.constitutionHitPointsText}updateEditModeViewHitPoints(){this.editElements.hitPoints.value=X.creature.hitPoints.hitPoints}updateEditModeViewConstitutionHitPoints(){this.editElements.constitutionHitPoints.textContent=X.creature.hitPoints.constitutionHitPointsText}updateShowModeView(){this.showElements.text.textContent=X.creature.hitPoints.text}}class Ot extends Rt{constructor(e){super(e)}}class jt extends Lt{constructor(e){super(e),this.hitPoints=e.getElementById("hit-points-input"),this.useHitDie=e.getElementById("use-hit-die-input"),this.hitDieQuantity=e.getElementById("hit-die-quantity-input"),this.hitDieSize=e.getElementById("hit-die-size-input"),this.constitutionHitPoints=e.getElementById("constitution-hit-points-value-label")}get initiallySelectedElement(){return this.useHitDie.checked?this.hitDieQuantity:this.hitPoints}}class $t extends Pt{static get elementName(){return"speed-section"}static get templatePaths(){return super.templatePaths.set("speed-section","src/html/elements/autonomous/sections/speed-section.html")}constructor(){super($t.templatePaths,"speed",Vt,_t)}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.useCustomText.disableElementsWhenChecked(this.editElements.walk,this.editElements.burrow,this.editElements.climb,this.editElements.fly,this.editElements.hover,this.editElements.swim),this.editElements.useCustomText.enableElementsWhenChecked(this.editElements.customText),this.isInitialized=!0)}checkForErrors(){this.editElements.customText.value=this.editElements.customText.value.trim(),this.editElements.useCustomText.checked&&this.editElements.customText.validate(this.errorMessages)}updateModel(){const e=X.creature.speed;e.walk=this.editElements.walk.valueAsInt,e.burrow=this.editElements.burrow.valueAsInt,e.climb=this.editElements.climb.valueAsInt,e.fly=this.editElements.fly.valueAsInt,e.hover=this.editElements.hover.checked,e.swim=this.editElements.swim.valueAsInt,e.useCustomText=this.editElements.useCustomText.checked,e.customText=this.editElements.customText.value,e.htmlCustomText=this.editElements.customText.htmlText}updateEditModeView(){const e=X.creature.speed;this.editElements.walk.value=e.walk,this.editElements.burrow.value=e.burrow,this.editElements.climb.value=e.climb,this.editElements.fly.value=e.fly,this.editElements.hover.checked=e.hover,this.editElements.swim.value=e.swim,this.editElements.useCustomText.checked=e.useCustomText,this.editElements.customText.value=e.customText,e.useCustomText&&(this.editElements.customText.parse(),e.htmlCustomText=this.editElements.customText.htmlText),this.editElements.useCustomText.onInputCheckbox()}updateShowModeView(){const e=X.creature.speed;e.useCustomText?this.showElements.text.innerHTMLSanitized=e.htmlCustomText:this.showElements.text.textContent=e.normalText}}class Vt extends Rt{constructor(e){super(e)}}class _t extends Lt{constructor(e){super(e),this.walk=e.getElementById("walk-input"),this.burrow=e.getElementById("burrow-input"),this.climb=e.getElementById("climb-input"),this.fly=e.getElementById("fly-input"),this.hover=e.getElementById("hover-input"),this.swim=e.getElementById("swim-input"),this.useCustomText=e.getElementById("use-custom-text-input"),this.customText=e.getElementById("custom-text-input")}get initiallySelectedElement(){return this.useCustomText.checked?this.customText:this.walk}}class Gt extends kt{static get elementName(){return"ability-scores-section"}static get templatePaths(){return super.templatePaths.set("ability-scores-section","src/html/elements/autonomous/sections/ability-scores-section.html")}constructor(){super(Gt.templatePaths,"abilities",Jt,Wt);for(const e of X.creature.abilities.keys)this.editElements.score[e].addEventListener("input",this.onInputAbilityScore.bind(this,e))}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.isInitialized=!0)}onInputAbilityScore(e){this.updateModelAbilityScore(e),this.updateEditModeViewAbilityModifier(e),this.updateShowModeViewAbility(e)}checkForErrors(){for(const e of X.creature.abilities.keys)this.editElements.score[e].validate(this.errorMessages)}updateModel(){for(const e of X.creature.abilities.keys)this.updateModelAbilityScore(e)}updateModelAbilityScore(e){const t=this.editElements.score[e].valueAsInt;null!==t&&(X.creature.abilities.abilities[e].score=t,this.dispatchAbilityScoreChangedEvent(e))}dispatchAbilityScoreChangedEvent(e){const t=new CustomEvent("abilityScoreChanged",{bubbles:!0,composed:!0,detail:{abilityName:e}});this.dispatchEvent(t)}updateEditModeView(){for(const e of X.creature.abilities.keys)this.updateEditModeViewAbilityScore(e),this.updateEditModeViewAbilityModifier(e)}updateEditModeViewAbilityScore(e){this.editElements.score[e].value=X.creature.abilities.abilities[e].score}updateEditModeViewAbilityModifier(e){this.editElements.modifier[e].textContent=X.creature.abilities.abilities[e].formattedModifier}updateShowModeView(){for(const e of X.creature.abilities.keys)this.updateShowModeViewAbility(e)}updateShowModeViewAbility(e){const t=X.creature.abilities.abilities[e];this.showElements.score[e].textContent=t.score,this.showElements.modifier[e].textContent=t.formattedModifier}importFromJson(e){X.creature.abilities.fromJson(e),this.updateView()}}class Jt extends Et{constructor(e){super(e),this.score={},this.modifier={};for(const t of X.creature.abilities.keys)this.score[t]=e.getElementById(t+"-score-show"),this.modifier[t]=e.getElementById(t+"-modifier-show")}}class Wt extends St{constructor(e){super(e),this.score={},this.modifier={};for(const t of X.creature.abilities.keys)this.score[t]=e.getElementById(t+"-score-edit"),this.modifier[t]=e.getElementById(t+"-modifier-edit")}get initiallySelectedElement(){return this.score.strength}}class Qt extends Pt{static get elementName(){return"saving-throws-section"}static get templatePaths(){return super.templatePaths.set("saving-throws-section","src/html/elements/autonomous/sections/saving-throws-section.html")}constructor(){super(Qt.templatePaths,"savingThrows",qt,Ut),this.empty=!0}connectedCallback(){if(this.isConnected&&!this.isInitialized){super.connectedCallback();for(const e of X.creature.savingThrows.keys)this.initializeSavingThrowElements(e);this.isInitialized=!0}}initializeSavingThrowElements(e){const t=this.editElements.savingThrow[e];t.enable.enableElementsWhenChecked(t.label,t.modifier,t.override),t.enable.addEventListener("input",this.onInputSavingThrowEnabled.bind(this,e)),t.override.addEventListener("input",this.onInputSavingThrowOverride.bind(this,e))}onInputSavingThrowEnabled(e){const t=this.editElements.savingThrow[e];t.enable.checked||le(t.override,""),this.updateModelSavingThrowEnabled(e),this.updateEditModeViewSavingThrowModifier(e),this.updateShowModeView()}onInputSavingThrowOverride(e){this.updateModelSavingThrowOverride(e),this.updateEditModeViewSavingThrowModifier(e),this.updateShowModeView()}checkForErrors(){}updateModel(){for(const e of X.creature.savingThrows.keys)this.updateModelSavingThrowEnabled(e),this.updateModelSavingThrowOverride(e)}updateModelSavingThrowEnabled(e){X.creature.savingThrows.savingThrows[e].isEnabled=this.editElements.savingThrow[e].enable.checked}updateModelSavingThrowOverride(e){X.creature.savingThrows.savingThrows[e].override=this.editElements.savingThrow[e].override.valueAsInt}updateViewOnAttributeChange(e){if(e)this.updateEditModeViewSavingThrowModifier(e);else for(const e of X.creature.savingThrows.keys)this.updateEditModeViewSavingThrowModifier(e);this.updateShowModeView()}updateEditModeView(){for(const e of X.creature.savingThrows.keys)this.updateEditModeViewSavingThrow(e),this.editElements.savingThrow[e].enable.onInputCheckbox()}updateEditModeViewSavingThrow(e){const t=this.editElements.savingThrow[e],s=X.creature.savingThrows;t.enable.checked=s.savingThrows[e].isEnabled,t.modifier.textContent=s.savingThrows[e].formattedModifier,t.override.value=s.savingThrows[e].override}updateEditModeViewSavingThrowModifier(e){this.editElements.savingThrow[e].modifier.textContent=X.creature.savingThrows.savingThrows[e].formattedModifier}updateShowModeView(){const e=X.creature.savingThrows.text;this.empty=""===e,this.showElements.text.textContent=e}}class qt extends Rt{constructor(e){super(e)}}class Ut extends Lt{constructor(e){super(e),this.savingThrow={};for(const t of X.creature.savingThrows.keys)this.savingThrow[t]={enable:e.getElementById(t+"-enable"),label:e.getElementById(t+"-label"),modifier:e.getElementById(t+"-saving-throw-modifier"),override:e.getElementById(t+"-override")}}get initiallySelectedElement(){return this.savingThrow.strength.enable}}class Kt extends Pt{static get elementName(){return"skills-section"}static get templatePaths(){return super.templatePaths.set("skills-section","src/html/elements/autonomous/sections/skills-section.html")}constructor(){super(Kt.templatePaths,"skills",Yt,Xt),this.empty=!0}connectedCallback(){if(this.isConnected&&!this.isInitialized){super.connectedCallback();for(const e of X.creature.skills.keys)this.initializeSkillElements(e);this.isInitialized=!0}}initializeSkillElements(e){const t=this.editElements.skill[e];t.enable.enableElementsWhenChecked(t.label,t.modifier,t.expert,t.override),t.enable.addEventListener("input",this.onInputSkillEnabled.bind(this,e)),t.expert.addEventListener("input",this.onInputSkillExpertise.bind(this,e)),t.override.addEventListener("input",this.onInputSkillOverride.bind(this,e))}onInputSkillEnabled(e){const t=this.editElements.skill[e];t.enable.checked||(le(t.expert,!1),le(t.override,"")),this.updateModelSkillEnabled(e),this.updateEditModeViewSkillModifier(e),this.updateShowModeView(),this.dispatchSkillChangedEvent(e)}onInputSkillExpertise(e){this.updateModelSkillExpertise(e),this.updateEditModeViewSkillModifier(e),this.updateShowModeView(),this.dispatchSkillChangedEvent(e)}onInputSkillOverride(e){this.updateModelSkillOverride(e),this.updateEditModeViewSkillModifier(e),this.updateShowModeView(),this.dispatchSkillChangedEvent(e)}dispatchSkillChangedEvent(e){const t=new CustomEvent("skillChanged",{bubbles:!0,composed:!0,detail:{skillName:e}});this.dispatchEvent(t)}checkForErrors(){}updateModel(){for(const e of X.creature.skills.keys)this.updateModelSkillEnabled(e),this.updateModelSkillExpertise(e),this.updateModelSkillOverride(e)}updateModelSkillEnabled(e){X.creature.skills.skills[e].isEnabled=this.editElements.skill[e].enable.checked}updateModelSkillExpertise(e){X.creature.skills.skills[e].hasExpertise=this.editElements.skill[e].expert.checked}updateModelSkillOverride(e){X.creature.skills.skills[e].override=this.editElements.skill[e].override.valueAsInt}updateViewOnAttributeChange(e){const t=X.creature.skills;if(e)for(const[s,i]of t.entries)X.creature.abilities.abilities[e]===i.abilityModel&&this.updateEditModeViewSkillModifier(s);else for(const e of t.keys)this.updateEditModeViewSkillModifier(e);this.updateShowModeView()}updateEditModeView(){for(const e of X.creature.skills.keys)this.updateEditModeViewSkill(e),this.editElements.skill[e].enable.onInputCheckbox()}updateEditModeViewSkill(e){const t=this.editElements.skill[e],s=X.creature.skills;t.enable.checked=s.skills[e].isEnabled,t.modifier.textContent=s.skills[e].formattedModifier,t.expert.checked=s.skills[e].hasExpertise,t.override.value=s.skills[e].override}updateEditModeViewSkillModifier(e){this.editElements.skill[e].modifier.textContent=X.creature.skills.skills[e].formattedModifier}updateShowModeView(){const e=X.creature.skills.text;this.empty=""===e,this.showElements.text.textContent=e}}class Yt extends Rt{constructor(e){super(e)}}class Xt extends Lt{constructor(e){super(e),this.skill={};for(const t of X.creature.skills.keys)this.skill[t]={enable:e.getElementById(t+"-enable"),label:e.getElementById(t+"-label"),modifier:e.getElementById(t+"-skill-modifier"),expert:e.getElementById(t+"-expert"),override:e.getElementById(t+"-override")}}get initiallySelectedElement(){return this.skill.acrobatics.enable}}class Zt extends Pt{static get templatePaths(){return super.templatePaths.set("property-list-section","src/html/elements/autonomous/sections/property-list-section.html")}constructor(e,t,s=es,i=ts){super(e,t,s,i);const n=X.creature[this.modelPropertyName];this.showElements.heading.textContent=n.headingName,this.editElements.label.textContent=n.headingName+":"}connectedCallback(){super.connectedCallback();const e=X.creature[this.modelPropertyName];this.editElements.propertyList.errorMessages=this.errorMessages,this.editElements.propertyList.singleItemName=e.singleName}checkForErrors(){const e=this.editElements.propertyList.input;if(""!==e.value){const t=`Cannot save while the ${X.creature[this.modelPropertyName].singleName} field contains text.\nClear or add the field, then try again.`;this.errorMessages.add(e,t)}}updateModel(){X.creature[this.modelPropertyName].items=this.editElements.propertyList.itemsAsText}updateEditModeView(){const e=X.creature[this.modelPropertyName].items;this.editElements.propertyList.setItems(e)}updateShowModeView(){const e=X.creature[this.modelPropertyName].text;this.empty=""===e,this.showElements.text.textContent=e}}class es extends Rt{constructor(e){super(e)}}class ts extends Lt{constructor(e){super(e),this.label=e.getElementById("property-list-label"),this.propertyList=e.getElementById("property-list")}get initiallySelectedElement(){return this.propertyList.input}}const ss=Qe.slice();ss.push("bludgeoning, piercing, and slashing from nonmagical attacks");var is=ss;class ns extends Zt{static get elementName(){return"damage-vulnerabilities-section"}static get templatePaths(){return super.templatePaths.set("damage-vulnerabilities-section","src/html/elements/autonomous/sections/damage-vulnerabilities-section.html")}constructor(){super(ns.templatePaths,"damageVulnerabilities"),this.empty=!0}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.propertyList.dataListOptions=is.map(e=>({text:e})),this.isInitialized=!0)}}class as extends Zt{static get elementName(){return"damage-resistances-section"}static get templatePaths(){return super.templatePaths.set("damage-resistances-section","src/html/elements/autonomous/sections/damage-resistances-section.html")}constructor(){super(as.templatePaths,"damageResistances"),this.empty=!0}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.propertyList.dataListOptions=is.map(e=>({text:e})),this.isInitialized=!0)}}class os extends Zt{static get elementName(){return"damage-immunities-section"}static get templatePaths(){return super.templatePaths.set("damage-immunities-section","src/html/elements/autonomous/sections/damage-immunities-section.html")}constructor(){super(os.templatePaths,"damageImmunities"),this.empty=!0}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.propertyList.dataListOptions=is.map(e=>({text:e})),this.isInitialized=!0)}}var rs=["blinded","charmed","deafened","exhaustion","frightened","grappled","incapacitated","invisible","paralyzed","petrified","poisoned","prone","restrained","stunned","unconscious"];class ls extends Zt{static get elementName(){return"condition-immunities-section"}static get templatePaths(){return super.templatePaths.set("condition-immunities-section","src/html/elements/autonomous/sections/condition-immunities-section.html")}constructor(){super(ls.templatePaths,"conditionImmunities"),this.empty=!0}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.propertyList.dataListOptions=rs.map(e=>({text:e})),this.isInitialized=!0)}}class cs extends Pt{static get elementName(){return"senses-section"}static get templatePaths(){return super.templatePaths.set("senses-section","src/html/elements/autonomous/sections/senses-section.html")}constructor(){super(cs.templatePaths,"senses",ds,us)}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.useCustomText.disableElementsWhenChecked(this.editElements.blindsight,this.editElements.blindBeyondThisRadius,this.editElements.darkvision,this.editElements.tremorsense,this.editElements.truesight),this.editElements.useCustomText.enableElementsWhenChecked(this.editElements.customText))}checkForErrors(){this.editElements.customText.value=this.editElements.customText.value.trim(),this.editElements.useCustomText.checked&&this.editElements.customText.validate(this.errorMessages)}updateModel(){const e=X.creature.senses;e.blindsight=this.editElements.blindsight.valueAsInt,e.blindBeyondThisRadius=this.editElements.blindBeyondThisRadius.checked,e.darkvision=this.editElements.darkvision.valueAsInt,e.tremorsense=this.editElements.tremorsense.valueAsInt,e.truesight=this.editElements.truesight.valueAsInt,e.useCustomText=this.editElements.useCustomText.checked,e.customText=this.editElements.customText.value,e.htmlCustomText=this.editElements.customText.htmlText}updateViewOnAttributeChange(){this.updateEditModeViewPassivePerception(),this.updateShowModeView()}updateEditModeView(){const e=X.creature.senses;this.editElements.blindsight.value=e.blindsight,this.editElements.blindBeyondThisRadius.checked=e.blindBeyondThisRadius,this.editElements.darkvision.value=e.darkvision,this.editElements.tremorsense.value=e.tremorsense,this.editElements.truesight.value=e.truesight,this.editElements.useCustomText.checked=e.useCustomText,this.editElements.customText.value=e.customText,e.useCustomText&&(this.editElements.customText.parse(),e.htmlCustomText=this.editElements.customText.htmlText),this.updateEditModeViewPassivePerception(),this.editElements.useCustomText.onInputCheckbox()}updateEditModeViewPassivePerception(){this.editElements.passivePerception.textContent=X.creature.senses.passivePerception}updateShowModeView(){const e=X.creature.senses;e.useCustomText?this.showElements.text.innerHTMLSanitized=e.htmlCustomText:this.showElements.text.textContent=e.normalText}}class ds extends Rt{constructor(e){super(e)}}class us extends Lt{constructor(e){super(e),this.blindsight=e.getElementById("blindsight-input"),this.blindBeyondThisRadius=e.getElementById("blind-beyond-this-radius-input"),this.darkvision=e.getElementById("darkvision-input"),this.tremorsense=e.getElementById("tremorsense-input"),this.truesight=e.getElementById("truesight-input"),this.passivePerception=e.getElementById("passive-perception-value"),this.useCustomText=e.getElementById("use-custom-text-input"),this.customText=e.getElementById("custom-text-input")}get initiallySelectedElement(){return this.useCustomText.checked?this.customText:this.blindsight}}var ms=["Aarakocra","Abyssal","Aquan","Auran","Blink Dog","Bullywug","Celestial","Common","Deep Speech","Draconic","Druidic","Dwarvish","Elvish","Giant","Giant Eagle","Giant Elk","Giant Owl","Gith","Gnoll","Gnomish","Goblin","Grell","Grung","Halfling","Hook Horror","Ignan","Infernal","Kraul","Loxodon","Merfolk","Minotaur","Modron","Orc","Otyugh","Primordial","Sahuagin","Slaad","Sphinx","Sylvan","Terran","Thieves' Cant","Thri-kreen","Tlincalli","Troglodyte","Undercommon","Vedalkin","Vegepygmy","Winter Wolf","Worg","Yeti"];class hs extends Zt{static get elementName(){return"languages-section"}static get templatePaths(){return super.templatePaths.set("languages-section","src/html/elements/autonomous/sections/languages-section.html")}constructor(){super(hs.templatePaths,"languages",ps,gs)}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.propertyList.dataListOptions=ms.map(e=>({text:e})),this.isInitialized=!0)}updateModel(){super.updateModel(),X.creature.languages.telepathy=this.editElements.telepathy.valueAsInt}updateEditModeView(){super.updateEditModeView(),this.editElements.telepathy.value=X.creature.languages.telepathy}}class ps extends es{constructor(e){super(e)}}class gs extends ts{constructor(e){super(e),this.telepathy=e.getElementById("telepathy-input")}}class bs extends Pt{static get elementName(){return"challenge-rating-section"}static get templatePaths(){return super.templatePaths.set("challenge-rating-section","src/html/elements/autonomous/sections/challenge-rating-section.html")}constructor(){super(bs.templatePaths,"challengeRating",vs,fs),this.editElements.challengeRating.addEventListener("input",this.onInputChallengeRating.bind(this)),this.editElements.experiencePoints.addEventListener("input",this.onInputExperiencePoints.bind(this)),this.editElements.proficiencyBonus.addEventListener("input",this.onInputProficiencyBonus.bind(this))}onInputChallengeRating(){const e=this.editElements.challengeRating.value;X.creature.challengeRating.challengeRating=e,X.creature.challengeRating.updateExperiencePointsAndProficiencyBonusFromChallengeRating(),this.updateEditModeView(),this.dispatchProficiencyBonusChangedEvent()}onInputExperiencePoints(){const e=this.editElements.experiencePoints.valueAsInt;null!==e&&(X.creature.challengeRating.experiencePoints=e)}onInputProficiencyBonus(){const e=this.editElements.proficiencyBonus.valueAsInt;null!==e&&(X.creature.challengeRating.proficiencyBonus=e,this.dispatchProficiencyBonusChangedEvent())}checkForErrors(){this.editElements.experiencePoints.validate(this.errorMessages),this.editElements.proficiencyBonus.validate(this.errorMessages)}updateModel(){}updateEditModeView(){const e=X.creature.challengeRating;this.editElements.challengeRating.value=e.challengeRating,this.editElements.experiencePoints.value=e.experiencePoints,this.editElements.proficiencyBonus.value=e.proficiencyBonus}updateShowModeView(){this.showElements.text.textContent=X.creature.challengeRating.text}dispatchProficiencyBonusChangedEvent(){const e=new CustomEvent("proficiencyBonusChanged",{bubbles:!0,composed:!0,detail:{}});this.dispatchEvent(e)}}class vs extends Rt{constructor(e){super(e)}}class fs extends Lt{constructor(e){super(e),this.challengeRating=e.getElementById("challenge-rating-input"),this.experiencePoints=e.getElementById("experience-points-input"),this.proficiencyBonus=e.getElementById("proficiency-bonus-input")}get initiallySelectedElement(){return this.challengeRating}}class ws extends kt{static get templatePaths(){return super.templatePaths.set("block-list-section","src/html/elements/autonomous/sections/block-list-section.html")}constructor(e,t,s=ys,i=Cs){super(e,t,s,i),this.heading=this.shadowRoot.getElementById("heading")}connectedCallback(){this.editElements.editableBlockList.singleName=X.creature[this.modelPropertyName].singleName,super.connectedCallback(),this.reparse(),this.editElements.addButton.addEventListener("click",this.onClickAddTextBlockButton.bind(this))}onClickAddTextBlockButton(){this.addBlock()}addBlock(e="",t=""){this.editElements.editableBlockList.addBlock(e,t)}get mode(){return super.mode}set mode(e){super.mode=e;switch(e){case"hidden":this.heading.classList.add("block-list-section__heading_hidden");break;case"show":case"edit":this.heading.classList.remove("block-list-section__heading_hidden")}}get empty(){return super.empty}set empty(e){super.empty=e;e?this.showElements.emptyLabel.classList.remove("block-list-section__empty-label_hidden"):this.showElements.emptyLabel.classList.add("block-list-section__empty-label_hidden")}checkForErrors(){this.editElements.editableBlockList.validate(this.errorMessages)}updateModel(){X.creature[this.modelPropertyName].blocks=this.editElements.editableBlockList.toModel()}updateEditModeView(){const e=X.creature[this.modelPropertyName].blocks;this.editElements.editableBlockList.clear();for(const t of e)this.editElements.editableBlockList.addBlock(t.name,t.text)}updateShowModeView(){const e=X.creature[this.modelPropertyName].blocks;this.showElements.displayBlockList.clear();for(const t of e)this.showElements.displayBlockList.addBlock(t.name,t.htmlText);this.empty=e.length<=0}reparse(){this.editElements.editableBlockList.parse(),this.updateModel();for(const[e,t]of X.creature[this.modelPropertyName].blocks.entries()){const s=this.editElements.editableBlockList.blocks[e];if(s.previewName=t.name,s.previewText=t.htmlText,"show"===this.mode){this.showElements.displayBlockList.blocks[e].text=t.htmlText}}}importFromOpen5e(e){super.importFromOpen5e(e),this.reparse()}importFromJson(e){super.importFromJson(e),this.reparse()}}class ys extends Et{constructor(e){super(e),this.emptyLabel=e.getElementById("empty-label"),this.displayBlockList=e.getElementById("display-block-list")}}class Cs extends St{constructor(e){super(e),this.editableBlockList=e.getElementById("editable-block-list"),this.addButton=e.getElementById("add-button")}get initiallySelectedElement(){return this.editableBlockList.blocks.length>0?this.editableBlockList.blocks[0].nameInput:this.addButton}}class ks extends ws{static get elementName(){return"special-traits-section"}static get templatePaths(){return super.templatePaths.set("special-traits-section","src/html/elements/autonomous/sections/special-traits-section.html")}constructor(){super(ks.templatePaths,"specialTraits",Es,Ss),this.empty=!0}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.generateSpellcastingButton.addEventListener("click",this.onClickGenerateSpellcastingButton.bind(this)),this.addEventListener("generateSpellcasting",this.onGenerateSpellcasting.bind(this)),this.isInitialized=!0)}onClickGenerateSpellcastingButton(){this.editElements.generateSpellcastingDialog.launch()}onGenerateSpellcasting(e){this.addBlock(e.detail.name,e.detail.text),this.reparse()}}class Es extends ys{constructor(e){super(e)}}class Ss extends Cs{constructor(e){super(e),this.generateSpellcastingButton=e.getElementById("generate-spellcasting-button"),this.generateSpellcastingDialog=e.getElementById("generate-spellcasting-dialog")}}class xs extends ws{static get elementName(){return"actions-section"}static get templatePaths(){return super.templatePaths.set("actions-section","src/html/elements/autonomous/sections/actions-section.html")}constructor(){super(xs.templatePaths,"actions",Ts,Ms),this.empty=!0}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.editElements.generateAttackButton.addEventListener("click",this.onClickGenerateAttackButton.bind(this)),this.addEventListener("generateAttack",this.onGenerateAttack.bind(this)),this.isInitialized=!0)}onClickGenerateAttackButton(){this.editElements.generateAttackDialog.launch()}onGenerateAttack(e){this.addBlock(e.detail.name,e.detail.text),this.reparse()}}class Ts extends ys{constructor(e){super(e)}}class Ms extends Cs{constructor(e){super(e),this.generateAttackButton=e.getElementById("generate-attack-button"),this.generateAttackDialog=e.getElementById("generate-attack-dialog")}}class Is extends ws{static get elementName(){return"reactions-section"}static get templatePaths(){return super.templatePaths.set("reactions-section","src/html/elements/autonomous/sections/reactions-section.html")}constructor(){super(Is.templatePaths,"reactions"),this.empty=!0}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.isInitialized=!0)}}class Bs extends ws{static get elementName(){return"legendary-actions-section"}static get templatePaths(){return super.templatePaths.set("legendary-actions-section","src/html/elements/autonomous/sections/legendary-actions-section.html")}constructor(){super(Bs.templatePaths,"legendaryActions",Ds,zs),this.empty=!0}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.isInitialized=!0)}get empty(){return super.empty}set empty(e){super.empty=e;e?this.showElements.description.classList.add("legendary-actions-show-section__text_hidden"):this.showElements.description.classList.remove("legendary-actions-show-section__text_hidden")}checkForErrors(){super.checkForErrors(),this.editElements.description.validate(this.errorMessages)}updateModel(){super.updateModel();const e=X.creature.legendaryActions;e.description=this.editElements.description.value,e.markdownDescription=this.editElements.description.markdownText,e.htmlDescription=this.editElements.description.htmlText}updateEditModeView(){super.updateEditModeView(),this.editElements.description.value=X.creature.legendaryActions.description}updateShowModeView(){super.updateShowModeView(),this.showElements.description.innerHTMLSanitized=X.creature.legendaryActions.htmlDescription}reparse(){this.editElements.description.parse(),super.reparse(),"show"===this.mode&&(this.showElements.description.innerHTMLSanitized=X.creature.legendaryActions.htmlDescription)}}class Ds extends ys{constructor(e){super(e),this.description=e.getElementById("description-show")}}class zs extends Cs{constructor(e){super(e),this.description=e.getElementById("description-edit")}}function Ps(e){const t=function(e){const t=document.createElement("iframe");return t.addEventListener("load",Rs),t.style.position="fixed",t.style.right="0",t.style.bottom="0",t.style.width="0",t.style.height="0",t.style.border="0",t.srcdoc=e,t}(e);document.body.appendChild(t)}function Rs(){this.contentWindow.__container__=this,this.contentWindow.addEventListener("beforeunload",Ls),this.contentWindow.addEventListener("afterprint",Ls),this.contentWindow.focus(),this.contentWindow.print()}function Ls(){document.body.removeChild(this.__container__)}var As=new class{constructor(){this.jsonKey="json",this.localSettingsKey="localSettings"}loadJson(){return localStorage.getItem(this.jsonKey)}saveJson(e){localStorage.setItem(this.jsonKey,e)}clearJson(){localStorage.removeItem(this.jsonKey)}loadLocalSettings(){return localStorage.getItem(this.localSettingsKey)}saveLocalSettings(e){localStorage.setItem(this.localSettingsKey,e)}clearLocalSettings(){localStorage.removeItem(this.localSettingsKey)}};const Ns=s(9).html;class Fs extends ye{static get elementName(){return"stat-block-editor"}static get templatePaths(){return super.templatePaths.set("stat-block-editor","src/html/elements/autonomous/containers/stat-block-editor.html")}constructor(){super(Fs.templatePaths),this.statBlockMenu=this.shadowRoot.getElementById("stat-block-menu"),this.statBlockSidebar=this.shadowRoot.getElementById("stat-block-sidebar"),this.statBlock=this.shadowRoot.getElementById("stat-block"),this.resetDialog=this.shadowRoot.getElementById("reset-dialog"),this.importJsonDialog=this.shadowRoot.getElementById("import-json-dialog"),this.importSrdDialog=this.shadowRoot.getElementById("import-srd-dialog"),this.importOpen5eDialog=this.shadowRoot.getElementById("import-open5e-dialog"),this.exportJsonDialog=this.shadowRoot.getElementById("export-json-dialog"),this.exportHtmlDialog=this.shadowRoot.getElementById("export-html-dialog"),this.exportMarkdownDialog=this.shadowRoot.getElementById("export-markdown-dialog")}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.addEventListener("dragover",this.onFileDragOver.bind(this)),this.addEventListener("drop",this.onFileDrop.bind(this)),this.addEventListener("numberOfColumnsChanged",this.onNumberOfColumnsChanged.bind(this)),this.addEventListener("twoColumnHeightChanged",this.onTwoColumnHeightChanged.bind(this)),this.addEventListener("emptySectionsVisibilityChanged",this.onEmptySectionsVisibilityChanged.bind(this)),this.addEventListener("allSectionsAction",this.onAllSectionsAction.bind(this)),this.addEventListener("resetAction",this.onResetAction.bind(this)),this.addEventListener("importAction",this.onImportAction.bind(this)),this.addEventListener("exportAction",this.onExportAction.bind(this)),this.addEventListener("printAction",this.onPrintAction.bind(this)),this.addEventListener("toggleGettingStarted",this.onToggleGettingStarted.bind(this)),this.addEventListener("sectionSaved",this.onSectionSaved.bind(this)),this.isInitialized=!0)}onFileDragOver(e){e.preventDefault()}onFileDrop(e){e.preventDefault()}onNumberOfColumnsChanged(e){const t=X.layoutSettings,s=e.detail.columns;t.columns=s,1===s?(this.statBlockSidebar.visible=!1,this.statBlock.setColumnHeight("auto")):2===s&&(this.statBlockSidebar.visible=!0,this.statBlock.setColumnHeight(t.twoColumnMode,t.twoColumnHeight)),this.statBlock.setColumns(s),this.saveJsonToLocalStorage()}onTwoColumnHeightChanged(e){const t=X.layoutSettings,s=e.detail.mode,i=e.detail.height;t.twoColumnMode=s,t.twoColumnHeight=i,this.statBlock.setColumnHeight(s,i),this.saveJsonToLocalStorage()}onEmptySectionsVisibilityChanged(e){const t=X.localSettings,s=e.detail.visibility;t.emptySectionsVisibility=s,this.statBlock.setEmptyVisibility(s),this.saveLocalSettingsToLocalStorage()}onAllSectionsAction(e){const t=e.detail.action;"edit"===t?this.statBlock.edit():"save"===t&&this.statBlock.save()}onResetAction(){this.openResetDialog()}onImportAction(e){const t=e.detail.format;switch(t){case"json":this.openImportJsonDialog();break;case"srd":this.openImportSrdDialog();break;case"open5e":this.openImportOpen5eDialog();break;default:throw new Error(`Unknown import format: '${t}'.`)}}onExportAction(e){const t=e.detail.format;switch(t){case"json":this.openExportJsonDialog();break;case"html":this.openExportHtmlDialog();break;case"markdown":this.openExportMarkdownDialog();break;default:throw new Error(`Unknown export format: '${t}'.`)}}onPrintAction(){Ps(this.exportToHtml(X.creature.title.fullName))}onToggleGettingStarted(){const e=X.localSettings;e.gettingStartedVisibility=!e.gettingStartedVisibility,this.saveLocalSettingsToLocalStorage(),this.statBlock.setGettingStartedVisibility(e.gettingStartedVisibility)}onSectionSaved(){this.saveJsonToLocalStorage()}openResetDialog(){this.resetDialog.launch(this.reset.bind(this))}openImportJsonDialog(){this.importJsonDialog.launch(this.importFromJson.bind(this))}openImportSrdDialog(){this.importSrdDialog.launch(this.importFromJson.bind(this))}openImportOpen5eDialog(){this.importOpen5eDialog.launch(this.importFromOpen5e.bind(this))}openExportJsonDialog(){const e=this.exportToJson();this.exportJsonDialog.launch(e,"application/json",X.creature.title.fullName+".json")}openExportHtmlDialog(){const e=this.exportToHtml("Statblock5e - "+X.creature.title.fullName);this.exportHtmlDialog.launch(e,"text/html",X.creature.title.fullName+".html")}openExportMarkdownDialog(){const e=this.exportToMarkdown();this.exportMarkdownDialog.launch(e,"text/markdown",X.creature.title.fullName+".md")}loadJsonFromLocalStorage(){const e=As.loadJson();if(null!==e){const t=JSON.parse(e);t.meta.version===X.localSettings.version&&this.importFromJson(t)}}saveJsonToLocalStorage(){const e=this.exportToJson();As.saveJson(e)}loadLocalSettingsFromLocalStorage(){const e=As.loadLocalSettings();if(null!==e){const t=JSON.parse(e);t.version===X.localSettings.version&&(Object.assign(X.localSettings,t),this.statBlockMenu.updateEmptySectionControls(),this.statBlock.setGettingStartedVisibility(t.gettingStartedVisibility))}}saveLocalSettingsToLocalStorage(){const e=JSON.stringify(X.localSettings);As.saveLocalSettings(e)}reset(){X.reset(),As.clearJson(),this.statBlock.updateView(),this.statBlockMenu.updateColumnControls(),this.statBlockMenu.updateEmptySectionControls(),this.statBlockSidebar.updateControls()}importFromOpen5e(e){this.statBlock.importFromOpen5e(e),this.saveJsonToLocalStorage()}importFromJson(e){X.layoutSettings.fromJson(e.layout),this.statBlock.importFromJson(e),this.statBlockMenu.updateColumnControls(),this.statBlockSidebar.updateControls(),this.saveJsonToLocalStorage()}exportToJson(){const e=X.layoutSettings,t=X.localSettings.version,s=this.statBlock.exportToJson();return s.layout=e.toJson(),s.meta={version:t,description:"Created using statblock5e-creator",url:"https://frumple.github.io/statblock5e-creator"},JSON.stringify(s,null,2)}exportToHtml(e){const t=a.cloneNode(!0),s=t.querySelector("title"),i=t.querySelector("body"),n=this.statBlock.exportToHtml();s.textContent=e,i.appendChild(n);const o="<!DOCTYPE html>"+t.documentElement.outerHTML;return Ns(o,{indent_size:2,content_unformatted:"p"})}exportToMarkdown(){return this.statBlock.exportToMarkdown()}}class Hs extends ye{static get elementName(){return"stat-block-menu"}static get templatePaths(){return super.templatePaths.set("stat-block-menu","src/html/elements/autonomous/containers/stat-block-menu.html")}constructor(e=null){super(Hs.templatePaths,e),this.columnsToggle=this.shadowRoot.getElementById("columns-toggle"),this.emptySectionsToggle=this.shadowRoot.getElementById("empty-sections-toggle"),this.editAllSectionsButton=this.shadowRoot.getElementById("edit-all-sections-button"),this.saveAllSectionsButton=this.shadowRoot.getElementById("save-all-sections-button"),this.resetButton=this.shadowRoot.getElementById("reset-button"),this.importJsonButton=this.shadowRoot.getElementById("import-json-button"),this.importSrdButton=this.shadowRoot.getElementById("import-srd-button"),this.importOpen5eButton=this.shadowRoot.getElementById("import-open5e-button"),this.exportJsonButton=this.shadowRoot.getElementById("export-json-button"),this.exportHtmlButton=this.shadowRoot.getElementById("export-html-button"),this.exportMarkdownButton=this.shadowRoot.getElementById("export-markdown-button"),this.printButton=this.shadowRoot.getElementById("print-button"),this.gettingStartedButton=this.shadowRoot.getElementById("getting-started-button"),this.wikiButton=this.shadowRoot.getElementById("wiki-button"),this.githubButton=this.shadowRoot.getElementById("github-button"),this.versionButton=this.shadowRoot.getElementById("version-button")}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.columnsToggle.addEventListener("input",this.onInputColumnsToggle.bind(this)),this.emptySectionsToggle.addEventListener("input",this.onInputEmptySectionsToggle.bind(this)),this.editAllSectionsButton.addEventListener("click",this.onClickEditAllSectionsButton.bind(this)),this.saveAllSectionsButton.addEventListener("click",this.onClickSaveAllSectionsButton.bind(this)),this.resetButton.addEventListener("click",this.onClickResetButton.bind(this)),this.importJsonButton.addEventListener("click",this.onClickImportJsonButton.bind(this)),this.importSrdButton.addEventListener("click",this.onClickImportSrdButton.bind(this)),this.importOpen5eButton.addEventListener("click",this.onClickImportOpen5eButton.bind(this)),this.exportJsonButton.addEventListener("click",this.onClickExportJsonButton.bind(this)),this.exportHtmlButton.addEventListener("click",this.onClickExportHtmlButton.bind(this)),this.exportMarkdownButton.addEventListener("click",this.onClickExportMarkdownButton.bind(this)),this.printButton.addEventListener("click",this.onClickPrintButton.bind(this)),this.gettingStartedButton.addEventListener("click",this.onClickGettingStartedButton.bind(this)),this.wikiButton.addEventListener("click",this.onClickWikiButton.bind(this)),this.githubButton.addEventListener("click",this.onClickGithubButton.bind(this)),this.versionButton.addEventListener("click",this.onClickVersionButton.bind(this)),this.versionButton.textContent="Version: "+X.localSettings.version,this.isInitialized=!0)}onInputColumnsToggle(){const e=this.columnsToggle.checked?2:1;this.dispatchMenuEvent("numberOfColumnsChanged",{columns:e})}onInputEmptySectionsToggle(){const e=this.emptySectionsToggle.checked;this.dispatchMenuEvent("emptySectionsVisibilityChanged",{visibility:e})}onClickEditAllSectionsButton(){this.dispatchMenuEvent("allSectionsAction",{action:"edit"})}onClickSaveAllSectionsButton(){this.dispatchMenuEvent("allSectionsAction",{action:"save"})}onClickResetButton(){this.dispatchMenuEvent("resetAction")}onClickImportJsonButton(){this.dispatchMenuEvent("importAction",{format:"json"})}onClickImportSrdButton(){this.dispatchMenuEvent("importAction",{format:"srd"})}onClickImportOpen5eButton(){this.dispatchMenuEvent("importAction",{format:"open5e"})}onClickExportJsonButton(){this.dispatchMenuEvent("exportAction",{format:"json"})}onClickExportHtmlButton(){this.dispatchMenuEvent("exportAction",{format:"html"})}onClickExportMarkdownButton(){this.dispatchMenuEvent("exportAction",{format:"markdown"})}onClickPrintButton(){this.dispatchMenuEvent("printAction")}onClickGettingStartedButton(){this.dispatchMenuEvent("toggleGettingStarted")}onClickWikiButton(){window.open("https://github.com/Frumple/statblock5e-creator/wiki")}onClickGithubButton(){window.open("https://github.com/Frumple/statblock5e-creator")}onClickVersionButton(){window.open("https://github.com/Frumple/statblock5e-creator/releases")}dispatchMenuEvent(e,t=null){const s=new CustomEvent(e,{bubbles:!0,composed:!0,detail:t});this.dispatchEvent(s)}updateColumnControls(){const e=X.layoutSettings;1===e.columns?this.columnsToggle.checked=!1:2===e.columns&&(this.columnsToggle.checked=!0),this.onInputColumnsToggle()}updateEmptySectionControls(){X.localSettings.emptySectionsVisibility?this.emptySectionsToggle.checked=!0:this.emptySectionsToggle.checked=!1,this.onInputEmptySectionsToggle()}}class Os extends ye{static get elementName(){return"stat-block-sidebar"}static get templatePaths(){return super.templatePaths.set("stat-block-sidebar","src/html/elements/autonomous/containers/stat-block-sidebar.html")}constructor(e=null){super(Os.templatePaths,e),this.sidebar=this.shadowRoot.getElementById("stat-block-sidebar"),this.heightModeToggle=this.shadowRoot.getElementById("height-mode-toggle"),this.manualHeightSliderContainer=this.shadowRoot.getElementById("slider-container"),this.manualHeightSlider=this.shadowRoot.getElementById("slider")}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.heightModeToggle.addEventListener("input",this.onInputHeightModeToggle.bind(this)),this.manualHeightSlider.addEventListener("input",this.onInputSlider.bind(this)),this.isInitialized=!0)}onInputHeightModeToggle(){this.heightMode=this.heightModeToggle.checked?"manual":"auto",this.dispatchHeightChangedEvent(this.heightMode)}onInputSlider(){this.dispatchHeightChangedEvent("manual")}dispatchHeightChangedEvent(e){const t=E(this.manualHeightSlider.value),s=new CustomEvent("twoColumnHeightChanged",{bubbles:!0,composed:!0,detail:{mode:e,height:t}});this.dispatchEvent(s)}get visible(){return"visible"in this.dataset}set visible(e){e?(this.dataset.visible="",this.sidebar.classList.remove("stat-block-sidebar_hidden")):(delete this.dataset.visible,this.sidebar.classList.add("stat-block-sidebar_hidden"))}get heightMode(){return this.dataset.heightMode}set heightMode(e){"auto"===e?(this.dataset.heightMode="auto",this.manualHeightSliderContainer.classList.add("stat-block-sidebar__slider-container_hidden")):"manual"===e&&(this.dataset.heightMode="manual",this.manualHeightSliderContainer.classList.remove("stat-block-sidebar__slider-container_hidden"))}updateControls(){const e=X.layoutSettings;this.manualHeightSlider.value=e.twoColumnHeight,"auto"===e.twoColumnMode?this.heightModeToggle.checked=!1:"manual"===e.twoColumnMode&&(this.heightModeToggle.checked=!0),this.onInputHeightModeToggle()}}class js extends ye{static get elementName(){return"stat-block"}static get templatePaths(){return super.templatePaths.set("stat-block","src/html/elements/autonomous/containers/stat-block.html")}constructor(e=null){super(js.templatePaths,e),this.headingStats=this.shadowRoot.querySelector("heading-stats"),this.topStats=this.shadowRoot.querySelector("top-stats"),this.bottomStats=this.shadowRoot.querySelector("bottom-stats"),this.gettingStartedHelpBox=this.shadowRoot.getElementById("getting-started-help-box")}connectedCallback(){this.isConnected&&!this.isInitialized&&(super.connectedCallback(),this.addEventListener("creatureNameChanged",this.onCreatureNameChanged.bind(this)),this.addEventListener("creatureSizeChanged",this.onCreatureSizeChanged.bind(this)),this.addEventListener("abilityScoreChanged",this.onAbilityScoreChanged.bind(this)),this.addEventListener("proficiencyBonusChanged",this.onProficiencyBonusChanged.bind(this)),this.addEventListener("skillChanged",this.onSkillChanged.bind(this)),this.isInitialized=!0)}onCreatureNameChanged(){this.reparseBlockSections()}onCreatureSizeChanged(){this.topStats.updateHitPointsView()}onAbilityScoreChanged(e){const t=e.detail.abilityName;"constitution"===t?this.topStats.updateHitPointsView():"wisdom"===t&&this.topStats.updateSensesView(),this.topStats.updateSavingThrowsView(t),this.topStats.updateSkillsView(t),this.reparseBlockSections()}onProficiencyBonusChanged(){this.topStats.updateSavingThrowsView(),this.topStats.updateSkillsView(),this.topStats.updateSensesView(),this.reparseBlockSections()}onSkillChanged(e){"perception"===e.detail.skillName&&this.topStats.updateSensesView()}setColumns(e){1===e?delete this.dataset.twoColumn:2===e&&(this.dataset.twoColumn="")}setColumnHeight(e,t){"auto"===e?this.removeAttribute("style"):"manual"===e&&this.setAttribute("style",`--statblock-content-height: ${t}px;`)}setEmptyVisibility(e){this.headingStats.setEmptyVisibility(e),this.topStats.setEmptyVisibility(e),this.bottomStats.setEmptyVisibility(e)}setGettingStartedVisibility(e){this.gettingStartedHelpBox.visible=e}edit(){this.bottomStats.edit(),this.topStats.edit(),this.headingStats.edit()}save(){this.bottomStats.save(),this.topStats.save(),this.headingStats.save()}updateView(){this.headingStats.updateView(),this.topStats.updateView(),this.bottomStats.updateView(),this.reparseBlockSections()}reparseBlockSections(){this.bottomStats.reparseAllSections()}importFromOpen5e(e){this.headingStats.importFromOpen5e(e),this.topStats.importFromOpen5e(e),this.bottomStats.importFromOpen5e(e)}importFromJson(e){this.headingStats.importFromJson(e),this.topStats.importFromJson(e),this.bottomStats.importFromJson(e)}exportToJson(){const e={};return Object.assign(e,this.headingStats.exportToJson()),Object.assign(e,this.topStats.exportToJson()),Object.assign(e,this.bottomStats.exportToJson()),e}exportToHtml(){const e=X.layoutSettings,t=document.createElement("stat-block"),s=this.headingStats.exportToHtml(),i=this.topStats.exportToHtml(),n=this.bottomStats.exportToHtml();return t.appendChild(s),t.appendChild(i),t.appendChild(n),2===e.columns&&(t.dataset.twoColumn="","manual"===e.twoColumnMode&&t.setAttribute("style",`--data-content-height: ${e.twoColumnHeight}px`)),t}exportToMarkdown(){let e="___";2===X.layoutSettings.columns&&(e+="\n___");return`${e}\n${this.headingStats.exportToMarkdown()}\n${this.topStats.exportToMarkdown()}\n${this.bottomStats.exportToMarkdown()}`}}class $s extends ye{constructor(e){super(e),this.sections=new Map}setEmptyVisibility(e){for(const t of this.sections.values())t.setEmptyVisibility(e)}edit(){for(const e of this.sections.values())e.edit()}save(){for(const e of this.sections.values())e.save()}updateView(){for(const e of Array.from(this.sections.values()))e.updateView()}importFromOpen5e(e){for(const t of this.sections.values())t.importFromOpen5e(e)}importFromJson(e){for(const t of this.sections.values())t.importFromJson(e[t.modelPropertyName])}exportToJson(){const e=Array.from(this.sections.entries()).map(([e,t])=>[e,t.exportToJson()]);return Object.fromEntries(e)}exportToHtml(){const e=document.createDocumentFragment();for(const t of this.sections.values())t.empty||e.appendChild(t.exportToHtml());return e}exportToMarkdown(){return Array.from(this.sections.values()).filter(e=>!e.empty).map(e=>e.exportToMarkdown()).join("\n")}}class Vs extends $s{constructor(e){super(e),this.dividers=this.shadowRoot.querySelectorAll("section-divider"),this.addEventListener("sectionModeChanged",()=>{this.updateSectionDividers()})}setEmptyVisibility(e){super.setEmptyVisibility(e),this.updateSectionDividers()}updateSectionDividers(){for(const e of this.dividers)e.hidden=!0;let e=null;for(const t of this.sections.values())if("hidden"!==t.mode){if(e&&Vs.shouldSectionDividerBeDisplayed(e,t)){t.previousElementSibling.hidden=!1}e=t}}static shouldSectionDividerBeDisplayed(e,t){return"edit"===e.mode&&"hidden"!==t.mode||"edit"===t.mode&&"hidden"!==e.mode}}class _s extends Vs{static get elementName(){return"heading-stats"}static get templatePaths(){return super.templatePaths.set("heading-stats","src/html/elements/autonomous/containers/heading-stats.html")}constructor(){super(_s.templatePaths),this.sections.set("title",this.shadowRoot.querySelector("title-section")),this.sections.set("subtitle",this.shadowRoot.querySelector("subtitle-section"))}edit(){this.sections.get("subtitle").edit(),this.sections.get("title").edit()}exportToJson(){return{title:this.sections.get("title").exportToJson(),subtitle:this.sections.get("subtitle").exportToJson()}}exportToHtml(){const e=document.createElement("creature-heading"),t=this.sections.get("title").exportToHtml(),s=this.sections.get("subtitle").exportToHtml();return e.appendChild(t),e.appendChild(s),e}exportToMarkdown(){return`${this.sections.get("title").exportToMarkdown()}\n${this.sections.get("subtitle").exportToMarkdown()}`}}class Gs extends $s{static get elementName(){return"top-stats"}static get templatePaths(){return super.templatePaths.set("top-stats","src/html/elements/autonomous/containers/top-stats.html")}constructor(){super(Gs.templatePaths),this.sections.set("basicStats",this.shadowRoot.querySelector("basic-stats")),this.sections.set("abilityScores",this.shadowRoot.querySelector("ability-scores-section")),this.sections.set("advancedStats",this.shadowRoot.querySelector("advanced-stats"))}updateHitPointsView(){this.sections.get("basicStats").updateHitPointsView()}updateSavingThrowsView(e){this.sections.get("advancedStats").updateSavingThrowsView(e)}updateSkillsView(e){this.sections.get("advancedStats").updateSkillsView(e)}updateSensesView(){this.sections.get("advancedStats").updateSensesView()}importFromOpen5e(e){this.sections.get("abilityScores").importFromOpen5e(e),this.sections.get("advancedStats").importFromOpen5e(e),this.sections.get("basicStats").importFromOpen5e(e)}importFromJson(e){this.sections.get("abilityScores").importFromJson(e.abilityScores),this.sections.get("advancedStats").importFromJson(e),this.sections.get("basicStats").importFromJson(e)}exportToJson(){const e={};return Object.assign(e,this.sections.get("basicStats").exportToJson()),e.abilityScores=this.sections.get("abilityScores").exportToJson(),Object.assign(e,this.sections.get("advancedStats").exportToJson()),e}exportToHtml(){const e=document.createElement("top-stats"),t=this.sections.get("basicStats").exportToHtml(),s=this.sections.get("abilityScores").exportToHtml(),i=this.sections.get("advancedStats").exportToHtml();return e.appendChild(t),e.appendChild(s),e.appendChild(i),e}exportToMarkdown(){return`>___\n${this.sections.get("basicStats").exportToMarkdown()}\n>___\n${this.sections.get("abilityScores").exportToMarkdown()}\n>___\n${this.sections.get("advancedStats").exportToMarkdown()}\n>___`}}class Js extends $s{static get elementName(){return"bottom-stats"}static get templatePaths(){return super.templatePaths.set("bottom-stats","src/html/elements/autonomous/containers/bottom-stats.html")}constructor(){super(Js.templatePaths),this.sections.set("specialTraits",this.shadowRoot.querySelector("special-traits-section")),this.sections.set("actions",this.shadowRoot.querySelector("actions-section")),this.sections.set("reactions",this.shadowRoot.querySelector("reactions-section")),this.sections.set("legendaryActions",this.shadowRoot.querySelector("legendary-actions-section"))}reparseAllSections(){for(const e of this.sections.values())e.reparse()}}class Ws extends Vs{static get elementName(){return"basic-stats"}static get templatePaths(){return super.templatePaths.set("basic-stats","src/html/elements/autonomous/containers/basic-stats.html")}constructor(){super(Ws.templatePaths),this.sections.set("armorClass",this.shadowRoot.querySelector("armor-class-section")),this.sections.set("hitPoints",this.shadowRoot.querySelector("hit-points-section")),this.sections.set("speed",this.shadowRoot.querySelector("speed-section"))}updateHitPointsView(){this.sections.get("hitPoints").updateView()}}class Qs extends Vs{static get elementName(){return"advanced-stats"}static get templatePaths(){return super.templatePaths.set("advanced-stats","src/html/elements/autonomous/containers/advanced-stats.html")}constructor(){super(Qs.templatePaths);const e=this.shadowRoot.querySelector("saving-throws-section"),t=this.shadowRoot.querySelector("skills-section"),s=this.shadowRoot.querySelector("damage-vulnerabilities-section"),i=this.shadowRoot.querySelector("damage-resistances-section"),n=this.shadowRoot.querySelector("damage-immunities-section"),a=this.shadowRoot.querySelector("condition-immunities-section"),o=this.shadowRoot.querySelector("senses-section"),r=this.shadowRoot.querySelector("languages-section"),l=this.shadowRoot.querySelector("challenge-rating-section");this.sections.set("savingThrows",e),this.sections.set("skills",t),this.sections.set("damageVulnerabilities",s),this.sections.set("damageResistances",i),this.sections.set("damageImmunities",n),this.sections.set("conditionImmunities",a),this.sections.set("senses",o),this.sections.set("languages",r),this.sections.set("challengeRating",l),this.importOrder=[l,e,t,s,i,n,a,o,r]}updateSavingThrowsView(e){this.sections.get("savingThrows").updateViewOnAttributeChange(e)}updateSkillsView(e){this.sections.get("skills").updateViewOnAttributeChange(e)}updateSensesView(){this.sections.get("senses").updateViewOnAttributeChange()}importFromOpen5e(e){for(const t of this.importOrder)t.importFromOpen5e(e)}importFromJson(e){for(const t of this.importOrder)t.importFromJson(e[t.modelPropertyName])}}!async function(){X.localSettings.version=await async function(){const e=await n("package.json");return JSON.parse(e).version}(),await async function(){const e=[ae,oe,me,he,pe,ge,ve,fe,tt,Ce,st,Ee,Se,xe,Te,Me,Ie,Be,De,Fe,Oe,$e,Ve,_e,qe,et,it,nt,at,ot,ht,gt,bt,vt,ft,wt,yt,Ct,xt,Bt,At,Ht,$t,Gt,Qt,Kt,ns,as,os,ls,cs,hs,bs,ks,xs,Is,Bs,Fs,Hs,Os,js,_s,Gs,Js,Ws,Qs];for(const t of e)await t.define()}();const e=document.querySelector("loading-screen"),t=document.querySelector("stat-block-editor");e.status="Initializing HTML export template...",await async function(){const e=await n("src/html/export-inlined.html"),t=new DOMParser;return a=t.parseFromString(e,"text/html"),a}(),e.status="Loading JSON from local storage...",t.loadJsonFromLocalStorage(),e.status="Loading local settings from local storage...",t.loadLocalSettingsFromLocalStorage(),e.status="Waiting for elements to load...",await async function(){return new Promise(e=>{const t=window.setInterval((function(){void 0!==document.getElementsByTagName("body")[0]&&(window.clearInterval(t),e())}),1e3)})}(),t.classList.remove("stat-block-editor_hidden"),e.visible=!1}()},2:function(e,t){}});